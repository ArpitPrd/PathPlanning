// For license information, see `https://assets.adobedtm.com/e5c8ba88cef8/7fd951921a72/launch-384a38e91473.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2025-06-24T18:00:13Z",turbineBuildDate:"2024-08-22T17:32:44Z",turbineVersion:"28.0.0"},environment:{id:"EN203421500d2c4b98ac8dfaafd9a08943",stage:"production"},dataElements:{},extensions:{core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP6a6d85ccbeaa4750848f31959dd9eec5/",modules:{}},"adobe-alloy":{displayName:"Adobe Experience Platform Web SDK",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP14364801d5be4c3e921fd2b44229712d/",settings:{instances:[{name:"alloy",edgeDomain:"smetrics-ieeexplore.ieee.org",edgeConfigId:"da33ad2d-12d8-4eb7-bfeb-c1e9e8b94934",stagingEdgeConfigId:"e0b9e384-24e3-4529-90dd-a03ef1feb491",developmentEdgeConfigId:"e0b9e384-24e3-4529-90dd-a03ef1feb491"}],components:{eventMerge:!1}},modules:{"adobe-alloy/dist/lib/instanceManager/index.js":{script:function(e,t,n,r){"use strict";var o;const{createCustomInstance:i,createEventMergeId:a,components:s}=n("../alloy"),c=n("./createInstanceManager"),l=n("./injectWrapOnBeforeEventSend"),d=n("../utils/createGetConfigOverrides"),u=l({version:"2.29.1"});e.exports=c({turbine:r,window:window,createCustomInstance:i,components:s,createEventMergeId:a,orgId:_satellite.company.orgId,wrapOnBeforeEventSend:u,getConfigOverrides:d(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/alloy.js":{script:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function i(e,t){function n(n,r,i){if("undefined"!=typeof document){"number"==typeof(i=o({},t,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=n+"="+e.write(r,n)+a}}function r(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=e.read(a,s),t===s)break}catch(e){}}return t?r[t]:r}}return Object.create({set:n,get:r,remove:function(e,t){n(e,"",o({},t,{expires:-1}))},withAttributes:function(e){return i(this.converter,o({},this.attributes,e))},withConverter:function(e){return i(o({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}function a(e,t=0){return(ln[e[t+0]]+ln[e[t+1]]+ln[e[t+2]]+ln[e[t+3]]+"-"+ln[e[t+4]]+ln[e[t+5]]+"-"+ln[e[t+6]]+ln[e[t+7]]+"-"+ln[e[t+8]]+ln[e[t+9]]+"-"+ln[e[t+10]]+ln[e[t+11]]+ln[e[t+12]]+ln[e[t+13]]+ln[e[t+14]]+ln[e[t+15]]).toLowerCase()}function s(){if(!dn){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");dn=crypto.getRandomValues.bind(crypto)}return dn(un)}function c(e,t,n){if(pn.randomUUID&&!t&&!e)return pn.randomUUID();const r=(e=e||{}).random??e.rng?.()??s();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return a(r)}function l(e){return"object"==typeof e||void 0===e}function d(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&r===String(n[e]).toLowerCase())return!0;return!1}}}function u(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&r===String(n[e]).toLowerCase())return!1;return!0}}}function p(){return{matches:(e,t)=>void 0!==e[t]&&null!==e[t]}}function f(){return{matches:(e,t)=>void 0===e[t]||null===e[t]}}function g(e){return"number"==typeof e}function m(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r>n[e])return!0;return!1}}}function h(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r>=n[e])return!0;return!1}}}function y(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r<n[e])return!0;return!1}}}function v(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r<=n[e])return!0;return!1}}}function b(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&-1!==r.indexOf(String(n[e]).toLowerCase()))return!0;return!1}}}function w(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&-1!==r.indexOf(String(n[e]).toLowerCase()))return!1;return!0}}}function E(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&r.startsWith(String(n[e]).toLowerCase()))return!0;return!1}}}function I(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&r.endsWith(n[e].toLowerCase()))return!0;return!1}}}function C(e){return Op[e]}function S(e){return void 0===e}function k(e){return Object.keys(e)}function O(e,t,n){switch(t){case Cp.GREATER_THAN:return e>n;case Cp.GREATER_THAN_OR_EQUAL_TO:return e>=n;case Cp.LESS_THAN:return e<n;case Cp.LESS_THAN_OR_EQUAL_TO:return e<=n;case Cp.EQUALS:return e===n;case Cp.NOT_EQUALS:return e!==n;default:return!1}}function D(e,t){for(let n=0;n<t.length;n+=1)if(!S(e[t[n]]))return e[t[n]]}function T(e,t){const n=k(e);for(let r=0;r<n.length;r+=1){const o=n[r],{event:i={}}=t;if(i[n[r]]!==e[o])return!1}return!0}function P(e,t,n,r){return e.reduce(((e,o)=>{const i=D(o,Dp);if(!i)return e;const a=t.events[i];if(!a)return e;const s=D(o,Tp);if(!s)return e;const c=a[s];if(!c)return e;if(!T(o,c))return e;const{count:l=1}=c;return S(n)||S(r)||c.timestamp>=n&&c.timestamp<=r?e+l:e}),0)}function A(e,t,n,r){let o=n;return e.every((e=>{const n=D(e,Dp);if(!n)return!1;const i=t.events[n];if(!i)return!1;const a=D(e,Tp);if(!a)return!1;const s=i[a];if(!T(e,s))return!1;if(null===s||S(s)||0===s.count)return!1;const c=(S(o)||s.timestamp>=o)&&(S(r)||s.timestamp<=r);return o=s.timestamp,c}))?1:0}function R(e,t){let n=!0;for(let r=0;r<t.length;r+=1)n=n&&t[r].evaluate(e);return n}function N(e,t){let n=!1;for(let r=0;r<t.length;r+=1)if(n=n||t[r].evaluate(e),n)return!0;return!1}function j(e,t,n){return{version:e,rules:t,metadata:n}}function x(e,t,n){return{key:n,execute:n=>e.evaluate(n)?t:[],toString:()=>`Rule{condition=${e}, consequences=${t}}`}}function _(e,t){return{evaluate:e=>t.evaluate(e),toString:()=>`Condition{type=${e}, definition=${t}}`}}function M(e,t,n){return{id:e,type:t,detail:n}}function L(e,t){return{evaluate:n=>Sp.AND===e?R(n,t):Sp.OR===e&&N(n,t)}}function $(e,t,n){return{evaluate:r=>{const o=C(t);return!!o&&o.matches(r,e,n)}}}function q(e,t,n,r,o,i){return{evaluate:a=>{let s;return s=kp.ORDERED===i?A(e,a,r,o):P(e,a,r,o),O(s,t,n)}}}function U(e,t){return Object.assign(e,t)}function B(e){const{key:t,matcher:n,values:r}=e;return $(t,n,r)}function F(e){const{logic:t,conditions:n}=e;return L(t,n.map(H))}function V(e){const{events:t,from:n,to:r,matcher:o,value:i,searchType:a}=e;return q(t,o,i,n,r,a)}function H(e){const{type:t,definition:n}=e;if(Ip.MATCHER===t)return _(t,B(n));if(Ip.GROUP===t)return _(t,F(n));if(Ip.HISTORICAL===t)return _(t,V(n));throw new Error("Can not parse condition")}function z(e){const{id:t,type:n,detail:r}=e;return M(t,n,r)}function G(e){const{condition:t,consequences:n,key:r}=e;return x(H(t),n.map(z),r)}function J(e){if(e)return{provider:e.provider,providerData:U({},e.providerData)}}function Q(e){const{version:t,rules:n,metadata:r}=e;return j(t,n.map(G),J(r))}function W(e){return{provider:Ap,execute:t=>e.map((e=>e.execute(t))).filter((e=>e.length>0))}}function X(e){const{providerData:t}=e;if(!t)throw new Error("Provider data is missing in metadata");const{identityTemplate:n,buckets:r}=t;if(!n)throw new Error("Identity template is missing in provider data");if(!r)throw new Error("Buckets is missing in provider data")}function Y(e){const{xdm:t}=e;if(!t)throw new Error("XDM object is missing in the context");const{identityMap:n}=t;if(!n)throw new Error("Identity map is missing in the XDM object");const r=n[Rp];if(!r)throw new Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(r)||0===r.length)throw new Error("ECID identities array is empty or not an array");const o=r[0].id;if(!o)throw new Error("ECID identity is missing in the identities array");return o}function K(e,t,n){const{providerData:r}=n,{identityTemplate:o}=r;return o.replace(Np,t).replace(jp,e)}function Z(e){return!S(e)}function ee(e,t=(e=>e[0])){const n={};return function(...r){const o=t(r);return Z(n[o])||(n[o]=e(...r)),n[o]}}function te(e,t){const n=65535&t;return((t-n)*e|0)+(n*e|0)|0}function ne(e,t=0){let n;const r=e.length,o=3432918353,i=461845907;let a=t;const s=-2&r;for(let t=0;t<s;t+=2)n=e.charCodeAt(t)|e.charCodeAt(t+1)<<16,n=te(n,o),n=(131071&n)<<15|n>>>17,n=te(n,i),a^=n,a=(524287&a)<<13|a>>>19,a=5*a+3864292196|0;return r%2==1&&(n=e.charCodeAt(s),n=te(n,o),n=(131071&n)<<15|n>>>17,n=te(n,i),a^=n),a^=r<<1,a^=a>>>16,a=te(a,2246822507),a^=a>>>13,a=te(a,3266489909),a^=a>>>16,a}function re(e,t){const n=xp(e),r=Math.abs(n)%t/t*_p;return Math.round(r*_p)/_p}function oe(e,t,n){return{allocation:Mp(e,t),...n}}function ie(e){const t={};for(let n=0;n<e.length;n+=1){const r=e[n];r.key&&(t[r.key]||(t[r.key]=[]),t[r.key].push(r))}return t}function ae(e,t){return t.map((t=>t.execute(e))).filter((e=>e.length>0))}function se(e,t){X(t);const n=e.filter((e=>!e.key)),r=ie(e),{buckets:o}=t.providerData;return{provider:Pp,execute:e=>{const i=Y(e),a=ae(e,n),s=k(r),c=[];for(let n=0;n<s.length;n+=1){const a=s[n],l=r[a],d=ae(oe(K(i,a,t),o,e),l);c.push(...d)}return[...a,...c]}}}function ce(e,t){if(!t)return W(e);const{provider:n}=t;return n===Pp?se(e,t):W(e)}function le(e){const{rules:t,metadata:n}=Q(e);return ce(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepAssign=t.createEventMergeId=t.createCustomInstance=t.components=void 0;var de=r(n("@adobe/reactor-query-string")),ue=e=>null==e,pe=e=>!ue(e)&&!Array.isArray(e)&&"object"==typeof e,fe=(...e)=>e.length<2?Object.assign(...e):e.reduce(((e,t)=>(pe(t)&&Object.keys(t).forEach((n=>{Array.isArray(t[n])?Array.isArray(e[n])?e[n].push(...t[n]):e[n]=[...t[n]]:e[n]=t[n]})),e))),ge=i({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),me={get:ge.get.bind(ge),set:ge.set.bind(ge),remove:ge.remove.bind(ge),withConverter:ge.withConverter.bind(ge)};const he=(e,t)=>{Object.keys(t).forEach((n=>{pe(e[n])&&pe(t[n])?he(e[n],t[n]):e[n]=t[n]}))};var ye=(e,...t)=>{if(ue(e))throw new TypeError('deepAssign "target" cannot be null or undefined');const n=Object(e);return t.forEach((e=>he(n,Object(e)))),n};t.deepAssign=ye;var ve=(e,t)=>n=>{const r=t.split(".").reduce(((e,t)=>(e[t]=e[t]||{},e[t])),e);ye(r,n)},be=()=>{const e=[];return{add(t){e.push(t)},call:(...t)=>Promise.all(e.map((e=>e(...t))))}},we=({logger:e,cookieJar:t})=>({...t,set(n,r,o){e.info("Setting cookie",{name:n,value:r,...o}),t.set(n,r,o)}}),Ee=()=>{let e=0,t=Promise.resolve();return{addTask(n){e+=1;const r=()=>n().finally((()=>{e-=1}));return t=t.then(r,r),t},get length(){return e}}};const Ie=(()=>{const e=[];for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e.push(n)}return function(t,n){t=unescape(encodeURIComponent(t)),n||(n=0),n=~n;for(let r=0;r<t.length;r++){const o=255&(n^t.charCodeAt(r));n=n>>>8^e[o]}return(n=~n)>>>0}})();var Ce=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e};const Se=(e,t)=>e===t,ke=(e,t,n)=>{for(let r=0;r<e.length;r+=1)if(n(e[r],t))return r;return-1};var Oe=(e,t=Se)=>e.filter(((n,r)=>ke(e,n,t)===r)),De=(e,t)=>e.appendChild(t);const Te=(e,t)=>{Object.keys(t).forEach((n=>{if("style"===n&&pe(t[n])){const r=t[n];Object.keys(r).forEach((t=>{e.style[t]=r[t]}))}else e[n]=t[n]}))};var Pe=(e,t={},n={},r=[],o=document)=>{const i=o.createElement(e);return Object.keys(t).forEach((e=>{i.setAttribute(e,t[e])})),Te(i,n),r.forEach((e=>De(i,e))),i};const Ae="BODY",Re="IFRAME",Ne="IMG",je="DIV",xe="STYLE",_e="SCRIPT",Me="HEAD";var Le=({src:e,currentDocument:t=document})=>new Promise(((n,r)=>{Pe(Ne,{src:e},{onload:n,onerror:r,onabort:r},[],t)})),$e=e=>"function"==typeof e,qe=e=>Array.isArray(e)&&e.length>0,Ue=e=>Array.isArray(e)?e:null==e?[]:[].slice.call(e);const Be=/^\s*>/;var Fe=(e,t)=>Be.test(t)?Ue(e.querySelectorAll(`:scope ${t}`)):Ue(e.querySelectorAll(t)),Ve=":shadow";const He=e=>e.split(Ve),ze=(e,t)=>{const n=t;return n.startsWith(">")?`${e instanceof Element||e instanceof Document?":scope":":host"} ${n}`:n};var Ge=(e,t)=>{const n=He(t);if(n.length<2)return Fe(e,t);let r=e;for(let e=0;e<n.length;e+=1){const t=n[e].trim();if(""===t&&r.shadowRoot){r=r.shadowRoot;continue}const o=ze(r,t),i=Fe(r,o);if(0===i.length||!i[0]||!i[0].shadowRoot)return i;r=i[0].shadowRoot}},Je=e=>-1!==e.indexOf(Ve),Qe=(e,t=document)=>Je(e)?Ge(t,e):Fe(t,e);const We="MutationObserver",Xe="requestAnimationFrame",Ye={childList:!0,subtree:!0},Ke="visibilityState",Ze="visible",et=100,tt=5e3,nt=e=>new Error(`Could not find: ${e}`),rt=e=>new Promise(e),ot=e=>$e(e[We]),it=(e,t,n,r,o)=>rt(((i,a)=>{let s;const c=new e[We]((()=>{const e=o(n);qe(e)&&(c.disconnect(),s&&clearTimeout(s),i(e))}));s=setTimeout((()=>{c.disconnect(),a(nt(n))}),r),c.observe(t,Ye)})),at=e=>e[Ke]===Ze,st=(e,t,n,r)=>rt(((o,i)=>{const a=()=>{const n=r(t);qe(n)?o(n):e[Xe](a)};a(),setTimeout((()=>{i(nt(t))}),n)})),ct=(e,t,n)=>rt(((r,o)=>{const i=()=>{const t=n(e);qe(t)?r(t):setTimeout(i,et)};i(),setTimeout((()=>{o(nt(e))}),t)}));var lt=(e,t=Qe,n=tt,r=window,o=document)=>{const i=t(e);return qe(i)?Promise.resolve(i):ot(r)?it(r,o,e,n,t):at(o)?st(r,e,n,t):ct(e,n,t)},dt=(e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e),ut=e=>{const t=e.parentNode;return t?t.removeChild(e):null};const pt={name:"Adobe Alloy"},ft={style:{display:"none",width:0,height:0}};var gt=({appendNode:e=De,awaitSelector:t=lt,createNode:n=Pe,fireImage:r=Le}={})=>{const o=r;let i;const a=()=>t(Ae).then((([t])=>i||(i=n(Re,pt,ft),e(t,i)))),s=({src:e})=>a().then((t=>{const n=t.contentWindow.document;return r({src:e,currentDocument:n})}));return e=>{const{hideReferrer:t,url:n}=e;return t?s({src:n}):o({src:n})}},mt=e=>pe(e)&&0===Object.keys(e).length;const ht=(e,t)=>ue(e)||!pe(e)?e:Object.keys(e).reduce(((n,r)=>{const o=e[r];if(pe(o)){const e=ht(o,t);return mt(e)?n:{...n,[r]:e}}return t(o)?{...n,[r]:o}:n}),{});var yt="com.adobe.alloy.",vt=(e,t)=>e.slice(-t);const bt=`${yt}getTld`;var wt=(e,t)=>{let n="";const r=e.location.hostname.toLowerCase().split(".");let o=1;for(;o<r.length&&!t.get(bt);)o+=1,n=vt(r,o).join("."),t.set(bt,bt,{domain:n});return t.remove(bt,{domain:n}),n},Et="kndctr",It=e=>e.replace("@","_"),Ct=(e,t)=>`${Et}_${It(e)}_${t}`,St=(e,t)=>{const n={};return e.forEach((e=>{const r=t(e);n[r]||(n[r]=[]),n[r].push(e)})),n};const kt="Chrome",Ot="Edge",Dt="EdgeChromium",Tt="Firefox",Pt="IE",At="Safari",Rt="Unknown";var Nt=e=>{let t,n=!1;return()=>(n||(n=!0,t=e()),t)};const jt=[kt,Ot,Dt,Pt,Rt];var xt=({getBrowser:e})=>Nt((()=>jt.includes(e())));const _t="identity",Mt="consent",Lt="cluster";var $t=({orgId:e})=>{const t=Ct(e,_t);return()=>Boolean(me.get(t))};const qt=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1){const o=n[r];if(e[o].test(t))return o}return Rt};var Ut=({userAgent:e})=>Nt((()=>qt({[Ot]:/Edge\/([0-9\._]+)/,[Dt]:/Edg\/([0-9\.]+)/,[kt]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,[Tt]:/Firefox\/([0-9\.]+)(?:\s|$)/,[Pt]:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,[At]:/Version\/([0-9\._]+).*Safari/},e)));const Bt=(e,t,n)=>({getItem(r){try{return e[t].getItem(n+r)}catch{return null}},setItem(r,o){try{return e[t].setItem(n+r,o),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach((r=>{r.startsWith(n)&&e[t].removeItem(r)})),!0}catch{return!1}}});var Ft=e=>t=>{const n=yt+t;return{session:Bt(e,"sessionStorage",n),persistent:Bt(e,"localStorage",n)}},Vt=(e,t)=>e.filter((e=>t.includes(e))),Ht=e=>"boolean"==typeof e,zt=e=>"number"==typeof e&&!Number.isNaN(e),Gt=e=>{const t=parseInt(e,10);return zt(t)&&e===t},Jt=(e,t)=>0===t.indexOf(`${Et}_${It(e)}_`),Qt=e=>"string"==typeof e,Wt=e=>Qt(e)&&e.length>0,Xt=()=>{};const Yt=e=>{const t={},n=e.split(".");switch(n.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=n[1];break;case 3:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=n[2];break;case 4:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=`${n[2]}.${n[3]}`}return t},Kt=e=>{try{const t=new URL(e);let n=t.pathname;return e.endsWith("/")||"/"!==n||(n=""),{host:t.hostname,path:n,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{}}},Zt=(e,t=Yt)=>{Qt(e)||(e="");const n=Kt(e)||{},{host:r="",path:o="",query:i="",anchor:a=""}=n;return{path:o,query:i,fragment:a,...t(r)}};var en=e=>{if(ue(e)||"object"!=typeof e)return null;const t=ht(e,(e=>!(ue(e)||!Ht(e)&&!zt(e)&&!Wt(e)&&!qe(e))));return mt(t)?null:t},tn=e=>e instanceof Error?e:new Error(e),nn=({error:e,message:t})=>{try{e.message=t}catch{}},rn=({error:e,message:t})=>{const n=tn(e),r=`${t}\nCaused by: ${n.message}`;return nn({error:n,message:r}),n},on=e=>Qt(e)&&"true"===e.toLowerCase(),an=(e,t)=>{if(zt(e)||Qt(e)){const t=Math.round(Number(e));if(!Number.isNaN(t))return t}return t};const sn=(e,t,n)=>`${e}`.padStart(t,n);var cn=e=>{const t=e.getFullYear(),n=sn(e.getMonth()+1,2,"0"),r=sn(e.getDate(),2,"0"),o=sn(e.getHours(),2,"0"),i=sn(e.getMinutes(),2,"0"),a=sn(e.getSeconds(),2,"0"),s=sn(e.getMilliseconds(),3,"0"),c=an(e.getTimezoneOffset(),0);return`${t}-${n}-${r}T${o}:${i}:${a}.${s}${c>0?"-":"+"}${sn(Math.floor(Math.abs(c)/60),2,"0")}:${sn(Math.abs(c)%60,2,"0")}`};const ln=[];for(let e=0;e<256;++e)ln.push((e+256).toString(16).slice(1));let dn;const un=new Uint8Array(16);var pn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};const fn=e=>function(t,n){return null==t?t:e.call(this,t,n)},gn=(e,t)=>function(n,r){return t.call(this,e.call(this,n,r),r)},mn=(e,t)=>function(n,r){const o=[],i=[e,t].reduce(((e,t)=>{try{return t.call(this,e,r)}catch(t){return o.push(t),e}}),n);if(o.length)throw new Error(o.join("\n"));return i},hn=(e,t,n)=>Object.assign(gn(e,t),e,n),yn=(e,t,n)=>Object.assign(gn(e,fn(t)),e,n),vn=(e,t,n)=>Object.assign(mn(fn(t),e),e,n),bn=(e,t,n,r)=>{if(!e)throw new Error(`'${n}': Expected ${r}, but got ${JSON.stringify(t)}.`)};var wn=(e,t)=>(bn(Ht(e),e,t,"true or false"),e),En=(e,t)=>(bn($e(e),e,t,"a function"),e),In=(e,t)=>function(n,r){let o;const i=e.find((e=>{try{return o=e.call(this,n,r),!0}catch{return!1}}));return bn(i,n,r,t),o},Cn=e=>function(t,n){bn(Array.isArray(t),t,n,"an array");const r=[],o=t.map(((o,i)=>{try{return e.call(this,o,`${n}[${i}]`,t)}catch(e){return void r.push(e.message)}}));if(r.length)throw new Error(r.join("\n"));return o},Sn=e=>t=>null==t?e:t,kn=(e="This field has been deprecated")=>function(t,n){let r=e;return void 0!==t&&(n&&(r=`'${n}': ${r}`),this&&this.logger&&this.logger.warn(r)),t},On=e=>(t,n)=>(bn(t===e,t,n,`${e}`),t),Dn=e=>function(t,n){bn(pe(t),t,n,"an object");const r=[],o={};if(Object.keys(t).forEach((i=>{const a=t[i],s=n?`${n}.${i}`:i;try{const t=e.call(this,a,s);void 0!==t&&(o[i]=t)}catch(e){r.push(e.message)}})),r.length)throw new Error(r.join("\n"));return o},Tn=(e,t)=>(n,r)=>(bn(n>=t,n,r,`${e} greater than or equal to ${t}`),n),Pn=(e,t)=>(n,r)=>(bn(n<=t,n,r,`${e} less than or equal to ${t}`),n),An=e=>(t,n)=>{const r=[];if(Object.keys(t).forEach((t=>{if(!e[t]){const e=n?`${n}.${t}`:t;r.push(`'${e}': Unknown field.`)}})),r.length)throw new Error(r.join("\n"));return t},Rn=e=>(t,n)=>(pe(t)?bn(!mt(t),t,n,e):bn(t.length>0,t,n,e),t),Nn=e=>function(t,n){bn(pe(t),t,n,"an object");const r=[],o={};if(Object.keys(e).forEach((i=>{const a=t[i],s=e[i],c=n?`${n}.${i}`:i;try{const e=s.call(this,a,c);void 0!==e&&(o[i]=e)}catch(e){r.push(e.message)}})),Object.keys(t).forEach((e=>{Object.prototype.hasOwnProperty.call(o,e)||(o[e]=t[e])})),r.length)throw new Error(r.join("\n"));return o},jn=(e,t,n)=>function(r,o){bn(pe(r),r,o,"an object");const{[e]:i,[n]:a,...s}=r,c=t(i,o);if(void 0!==c){let t=`The field '${e}' is deprecated. Use '${n}' instead.`;if(o&&(t=`'${o}': ${t}`),void 0!==a&&a!==c)throw new Error(t);this&&this.logger&&this.logger.warn(t)}return{[n]:a||c,...s}},xn=()=>{const e=[];return(t,n)=>(bn(-1===e.indexOf(t),t,n,"a unique value across instances"),e.push(t),t)},_n=e=>{const t=Object.create(null);for(let n=0;n<e.length;n+=1){const r=e[n];if(r in t)return!1;t[r]=!0}return!0},Mn=()=>(e,t)=>(bn(_n(e),e,t,"array values to be unique"),e);const Ln=/^[a-z0-9.-]{1,}$/i;var $n=(e,t)=>(bn(Ln.test(e),e,t,"a valid domain"),e),qn=(e,t)=>(bn(Gt(e),e,t,"an integer"),e),Un=(e,t)=>(bn(zt(e),e,t,"a number"),e),Bn=e=>{try{return null!==RegExp(e)}catch{return!1}},Fn=(e,t)=>(bn(Bn(e),e,t,"a regular expression"),e),Vn=(e,t)=>{if(null==e)throw new Error(`'${t}' is a required option`);return e},Hn=(e,t)=>(bn(Qt(e),e,t,"a string"),e),zn=e=>(t,n)=>(bn(e.test(t),t,n,`does not match the ${e.toString()}`),t);const Gn=e=>e;Gn.default=function(e){return hn(this,Sn(e))},Gn.required=function(){return hn(this,Vn)},Gn.deprecated=function(e){return hn(this,kn(e))};const Jn=function(){return yn(this,$n)},Qn=function(e){return yn(this,Tn("an integer",e))},Wn=function(e){return yn(this,Tn("a number",e))},Xn=function(e){return yn(this,Pn("a number",e))},Yn=function(){return yn(this,qn,{minimum:Qn})},Kn=function(){return yn(this,Rn("a non-empty string"))},Zn=function(){return yn(this,Rn("a non-empty array"))},er=function(){return yn(this,Rn("a non-empty object"))},tr=function(){return yn(this,Fn)},nr=function(e){return yn(this,zn(e))},rr=function(){return yn(this,xn())},or=function(){return yn(this,Mn())},ir=function(e,t){return hn(this,In(e,t))},ar=function(){return this},sr=function(e){return yn(this,Cn(e),{nonEmpty:Zn,uniqueItems:or})},cr=function(){return yn(this,wn)},lr=function(){return yn(this,En)},dr=function(e){return yn(this,On(e))},ur=function(){return yn(this,Un,{minimum:Wn,maximum:Xn,integer:Yn,unique:rr})},pr=function(e){return yn(this,Dn(e),{nonEmpty:er})},fr=e=>({noUnknownFields:function(){return yn(this,An(e))},nonEmpty:er,concat:function(t){const n={...e,...t.schema};return yn(this,t,fr(n))},renamed:function(e,t,n){return vn(this,jn(e,t,n))},schema:e}),gr=function(e){return yn(this,Nn(e),fr(e))},mr=function(){return yn(this,Hn,{regexp:tr,domain:Jn,nonEmpty:Kn,unique:rr,matches:nr})},hr=ir.bind(Gn),yr=ar.bind(Gn),vr=sr.bind(Gn),br=cr.bind(Gn),wr=lr.bind(Gn),Er=dr.bind(Gn),Ir=ur.bind(Gn),Cr=pr.bind(Gn),Sr=gr.bind(Gn),kr=mr.bind(Gn),Or=function(...e){return hr(e.map(Er),`one of these values: ${JSON.stringify(e)}`)};var Dr=Cr(vr(Sr({authenticatedState:Or("ambiguous","authenticated","loggedOut"),id:kr(),namespace:Sr({code:kr()}).noUnknownFields(),primary:br(),xid:kr()}).noUnknownFields()).required()),Tr=Sr({}),Pr="alloy_debug",Ar=({console:e,locationSearch:t,createLogger:n,instanceName:r,createNamespacedStorage:o,getMonitors:i})=>{const a=de.default.parse(t),s=o(`instance.${r}.`),c=s.session.getItem("debug");let l="true"===c,d=null===c;const u=()=>l,p=(e,{fromConfig:t})=>{t&&!d||(l=e),t||(s.session.setItem("debug",e.toString()),d=!1)};return void 0!==a[Pr]&&p(on(a[Pr]),{fromConfig:!1}),{setDebugEnabled:p,logger:n({getDebugEnabled:u,context:{instanceName:r},getMonitors:i,console:e}),createComponentLogger:t=>n({getDebugEnabled:u,context:{instanceName:r,componentName:t},getMonitors:i,console:e})}};const Rr=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Nr=(e,t)=>(...n)=>Promise.all(e.getLifecycleCallbacks(t).map((e=>new Promise((t=>{t(e(...n))}))))),jr=e=>(...t)=>Promise.resolve().then((()=>e(...t)));var xr=e=>Rr.reduce(((t,n)=>(t[n]=jr(Nr(e,n)),t)),{});const _r=(e,t)=>(...n)=>{let r;try{r=e(...n)}catch(e){throw rn({error:e,message:t})}return r instanceof Promise&&(r=r.catch((e=>{throw rn({error:e,message:t})}))),r};var Mr=()=>{const e={},t={},n={},r=(e,n={})=>{const r=Vt(Object.keys(t),Object.keys(n));if(r.length)throw new Error(`[ComponentRegistry] Could not register ${e} because it has existing command(s): ${r.join(",")}`);Object.keys(n).forEach((r=>{const o=n[r];o.commandName=r,o.run=_r(o.run,`[${e}] An error occurred while executing the ${r} command.`),t[r]=o}))},o=(e,t={})=>{Object.keys(t).forEach((r=>{n[r]=n[r]||[],n[r].push(_r(t[r],`[${e}] An error occurred while executing the ${r} lifecycle hook.`))}))};return{register(t,n){const{commands:i,lifecycle:a}=n;r(t,i),o(t,a),e[t]=n},getCommand:e=>t[e],getCommandNames:()=>Object.keys(t),getLifecycleCallbacks:e=>n[e]||[],getComponentNames:()=>Object.keys(e)}},Lr=({logger:e,sendFetchRequest:t,sendBeaconRequest:n,isRequestRetryable:r,getRequestRetryDelay:o})=>({requestId:i,url:a,payload:s,useSendBeacon:c})=>{const l=JSON.stringify(s),d=JSON.parse(l);e.logOnBeforeNetworkRequest({url:a,requestId:i,payload:d});const u=(s=0)=>(c?n:t)(a,l).then((t=>{if(r({response:t,retriesAttempted:s})){const e=o({response:t,retriesAttempted:s});return new Promise((t=>{setTimeout((()=>{t(u(s+1))}),e)}))}let n;try{n=JSON.parse(t.body)}catch{}return e.logOnNetworkResponse({requestId:i,url:a,payload:d,...t,parsedBody:n,retriesAttempted:s}),{statusCode:t.statusCode,body:t.body,parsedBody:n,getHeader:t.getHeader}}));return u().catch((t=>{throw e.logOnNetworkError({requestId:i,url:a,payload:d,error:t}),rn({error:t,message:"Network request failed."})}))},$r=({logger:e})=>t=>{if(t){const n=t.split(";");if(n.length>=2&&n[1].length>0)try{const e=parseInt(n[1],10);if(!Number.isNaN(e))return{regionId:e}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}};const qr="in",Ur="out",Br="pending",Fr="general",Vr="declinedConsent",Hr="default",zr="initial",Gr="new",Jr=e=>{const t=new Error(e);return t.code=Vr,t.message=e,t};var Qr=({logger:e})=>{const t=[],n=()=>{for(;t.length;)t.shift().resolve()},r=()=>{for(;t.length;)t.shift().reject(Jr("The user declined consent."))},o=()=>Promise.resolve(),i=()=>Promise.resolve(),a=()=>Promise.resolve(),s=()=>Promise.reject(Jr("No consent preferences have been set.")),c=()=>Promise.reject(Jr("The user declined consent.")),l=e=>{if(e)return Promise.reject(new Error("Consent is pending."));const n=Ce();return t.push(n),n.promise};return{in(t){t===Hr?this.awaitConsent=i:(t===zr?e.info("Loaded user consent preferences. The user previously consented."):t===Gr&&this.awaitConsent!==a&&e.info("User consented."),n(),this.awaitConsent=a)},out(t){t===Hr?(e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=s):(t===zr?e.warn("Loaded user consent preferences. The user previously declined consent."):t===Gr&&this.awaitConsent!==c&&e.warn("User declined consent."),r(),this.awaitConsent=c)},pending(t){t===Hr&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=l},awaitConsent:o,withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case i:return{state:"in",wasSet:!1};case a:return{state:"in",wasSet:!0};case s:return{state:"out",wasSet:!1};case c:return{state:"out",wasSet:!0};case l:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}},Wr=({generalConsentState:e,logger:t})=>{const n=(n,r)=>{switch(n[Fr]){case qr:e.in(r);break;case Ur:e.out(r);break;case Br:e.pending(r);break;default:t.warn(`Unknown consent value: ${n[Fr]}`)}};return{initializeConsent(e,t){t[Fr]?n(t,zr):n(e,Hr)},setConsent(e){n(e,Gr)},suspend(){e.pending()},awaitConsent:()=>e.awaitConsent(),withConsent:()=>e.withConsent(),current:()=>e.current()}};const Xr=e=>e&&e._experience&&e._experience.decisioning&&qe(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[];var Yr=()=>{const e={};let t,n,r=!1,o=!1,i=!0;const a=e=>{if(o)throw new Error(`${e} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){const r=JSON.parse(JSON.stringify(e));return t&&ye(r,{xdm:t}),n&&ye(r,{data:n}),r},setUserXdm(e){a("setUserXdm"),t=e},setUserData(e){a("setUserData"),n=e},mergeXdm(t){a("mergeXdm"),t&&ye(e,{xdm:t})},mergeData(t){a("mergeData"),t&&ye(e,{data:t})},mergeMeta(t){a("mergeMeta"),t&&ye(e,{meta:t})},mergeQuery(t){a("mergeQuery"),t&&ye(e,{query:t})},documentMayUnload(){r=!0},finalize(r){if(o)return;const a=Oe([...Xr(t),...Xr(e.xdm)],((e,t)=>e===t||e.id&&t.id&&e.id===t.id&&e.scope&&t.scope&&e.scope===t.scope));if(t&&this.mergeXdm(t),a.length>0&&(e.xdm._experience.decisioning.propositions=a),n&&s.mergeData(n),o=!0,r){i=!1;const t={xdm:e.xdm||{},data:e.data||{}},n=r(t);i=!1!==n,e.xdm=t.xdm||{},e.data=t.data||{},mt(e.xdm)&&delete e.xdm,mt(e.data)&&delete e.data}},getDocumentMayUnload:()=>r,isEmpty:()=>mt(e)&&(!t||mt(t))&&(!n||mt(n)),shouldSend:()=>i,getViewName(){if(t&&t.web&&t.web.webPageDetails)return t.web.webPageDetails.viewName},toJSON(){if(!o)throw new Error("toJSON called before finalize");return e}};return s};const Kr="Retry-After",Zr="x-adobe-edge";var eo=({extractEdgeInfo:e})=>({content:t={},getHeader:n})=>{const{handle:r=[],errors:o=[],warnings:i=[]}=t;return{getPayloadsByType:e=>r.filter((t=>t.type===e)).flatMap((e=>e.payload)),getErrors:()=>o,getWarnings:()=>i,getEdge:()=>e(n(Zr)),toJSON:()=>t}};const to="configure",no="setDebug";var ro=({logger:e,configureCommand:t,setDebugCommand:n,handleError:r,validateCommandOptions:o})=>{let i;const a=(r,a)=>{let s;if(r===to){if(i)throw new Error("The library has already been configured and may only be configured once.");s=()=>(i=t(a),i.then((()=>{})))}else{if(!i)throw new Error("The library must be configured first. Please do so by executing the configure command.");s=r===no?()=>{const e=Sr({enabled:br().required()}).noUnknownFields(),t=o({command:{commandName:no,optionsValidator:e},options:a});n(t)}:()=>i.then((e=>{const t=e.getCommand(r);if(!t||!$e(t.run)){const t=[to,no].concat(e.getCommandNames()).join(", ");throw new Error(`The ${r} command does not exist. List of available commands: ${t}.`)}const n=o({command:t,options:a});return t.run(n)}),(()=>(e.warn(`An error during configuration is preventing the ${r} command from executing.`),new Promise((()=>{})))))}return s};return(t,n={})=>new Promise((r=>{const o=a(t,n);e.logOnBeforeCommand({commandName:t,options:n}),r(o())})).catch((e=>r(e,`${t} command`))).catch((r=>{throw e.logOnCommandRejected({commandName:t,options:n,error:r}),r})).then((r=>{const o=pe(r)?r:{};return e.logOnCommandResolved({commandName:t,options:n,result:o}),o}))};const oo="https://adobe.ly/3sHgQHb";var io=({command:e,options:t})=>{const{commandName:n,documentationUri:r=oo,optionsValidator:o}=e;let i=t;if(o)try{i=o(t)}catch(e){throw new Error(`Invalid ${n} command options:\n\t - ${e} For command documentation see: ${r}`)}return i};const ao="https://adobe.ly/3sHh553",so=({combinedConfigValidator:e,options:t,logger:n})=>{try{return e.noUnknownFields().required().call({logger:n},t)}catch(e){throw new Error(`Resolve these configuration problems:\n\t - ${e.message.split("\n").join("\n\t - ")}\nFor configuration documentation see: ${ao}`)}},co=(e,t,n)=>n.reduce(((n,{buildOnInstanceConfiguredExtraParams:r})=>(r&&(n={...n,...r({config:e,logger:t})}),n)),{}),lo=e=>{const t=[],n={get enabled(){return e.enabled},flush(){t.forEach((({method:t,args:n})=>e[t](...n)))}};return Object.keys(e).filter((t=>"function"==typeof e[t])).forEach((e=>{n[e]=(...n)=>{t.push({method:e,args:n})}})),n};var uo=({options:e,componentCreators:t,coreConfigValidators:n,createConfig:r,logger:o,setDebugEnabled:i})=>{const a=lo(o),s=t.map((({configValidators:e})=>e)).filter((e=>e)).reduce(((e,t)=>e.concat(t)),n),c=r(so({combinedConfigValidator:s,options:e,logger:a}));i(c.debugEnabled,{fromConfig:!0}),a.flush();const l=co(c,o,t);return o.logOnInstanceConfigured({...l,config:c}),c},po=({componentCreators:e,lifecycle:t,componentRegistry:n,getImmediatelyAvailableTools:r})=>(e.forEach((e=>{
const{namespace:t}=e,o=r(t);let i;try{i=e(o)}catch(e){throw rn({error:e,message:`[${t}] An error occurred during component creation.`})}n.register(t,i)})),t.onComponentsRegistered({lifecycle:t}).then((()=>n)));const fo=e=>({...e}),go="edge.adobedc.net",mo="adobedc.demdex.net";var ho="ee",yo=()=>Sr({debugEnabled:br().default(!1),datastreamId:kr().unique().required(),edgeDomain:kr().domain().default(go),edgeBasePath:kr().nonEmpty().default(ho),orgId:kr().unique().required(),onBeforeEventSend:wr().default(Xt),edgeConfigOverrides:Tr}).renamed("edgeConfigId",kr().unique(),"datastreamId"),vo=({errorPrefix:e,logger:t})=>(n,r)=>{const o=tn(n);if(o.code===Vr)return t.warn(`The ${r} could not fully complete. ${o.message}`),{};throw nn({error:o,message:`${e} ${o.message}`}),o},bo=({fetch:e})=>(t,n)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:n}).then((e=>e.text().then((t=>({statusCode:e.status,getHeader:t=>e.headers.get(t),body:t}))))),wo=({sendBeacon:e,sendFetchRequest:t,logger:n})=>(r,o)=>{const i=new Blob([o],{type:"text/plain; charset=UTF-8"});return e(r,i)?Promise.resolve({statusCode:204,getHeader:()=>null,body:""}):(n.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(r,o))},Eo=({getDebugEnabled:e,console:t,getMonitors:n,context:r})=>{let o=`[${r.instanceName}]`;r.componentName&&(o+=` [${r.componentName}]`);const i=(e,t)=>{const o=n();if(o.length>0){const n={...r,...t};o.forEach((t=>{t[e]&&t[e](n)}))}},a=(n,...r)=>{i("onBeforeLog",{level:n,arguments:r}),e()&&t[n](o,...r)};return{get enabled(){return n().length>0||e()},logOnInstanceCreated(e){i("onInstanceCreated",e),a("info","Instance initialized.")},logOnInstanceConfigured(e){i("onInstanceConfigured",e),a("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand(e){i("onBeforeCommand",e),a("info",`Executing ${e.commandName} command. Options:`,e.options)},logOnCommandResolved(e){i("onCommandResolved",e),a("info",`${e.commandName} command resolved. Result:`,e.result)},logOnCommandRejected(e){i("onCommandRejected",e),a("error",`${e.commandName} command was rejected. Error:`,e.error)},logOnBeforeNetworkRequest(e){i("onBeforeNetworkRequest",e),a("info",`Request ${e.requestId}: Sending request.`,e.payload)},logOnNetworkResponse(e){i("onNetworkResponse",e);const t=e.parsedBody||e.body?"response body:":"no response body.";a("info",`Request ${e.requestId}: Received response with status code ${e.statusCode} and ${t}`,e.parsedBody||e.body)},logOnNetworkError(e){i("onNetworkError",e),a("error",`Request ${e.requestId}: Network request failed.`,e.error)},logOnContentHiding(e){i("onContentHiding",{status:e.status}),a(e.logLevel,e.message)},logOnContentRendering(e){i("onContentRendering",{status:e.status,payload:e.detail}),a(e.logLevel,e.message)},info:a.bind(null,"info"),warn:a.bind(null,"warn"),error:a.bind(null,"error")}},Io="__view__",Co=e=>(t,n)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(n)},So=e=>{const{payload:t,getAction:n,getUseSendBeacon:r,datastreamIdOverride:o,edgeSubPath:i}=e,a=c();let s=!1,l=!1;return{getId:()=>a,getPayload:()=>t,getAction:()=>n({isIdentityEstablished:l}),getDatastreamIdOverride:()=>o,getUseSendBeacon:()=>r({isIdentityEstablished:l}),getEdgeSubPath:()=>i||"",getUseIdThirdPartyDomain:()=>s,setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){l=!0}}},ko=({payload:e,datastreamIdOverride:t})=>{const n=({isIdentityEstablished:t})=>e.getDocumentMayUnload()&&t;return So({payload:e,getAction:({isIdentityEstablished:e})=>n({isIdentityEstablished:e})?"collect":"interact",getUseSendBeacon:n,datastreamIdOverride:t})},Oo=e=>{const{content:t,addIdentity:n,hasIdentity:r}=e,o=ve(t,"meta.configOverrides");return{mergeMeta:ve(t,"meta"),mergeState:ve(t,"meta.state"),mergeQuery:ve(t,"query"),mergeConfigOverride:e=>o(en(e)),addIdentity:n,hasIdentity:r,toJSON:()=>t}},Do=e=>t=>void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t]),To=()=>{const e={},t=Oo({content:e,addIdentity:Co(e),hasIdentity:Do(e)});return t.addEvent=t=>{e.events=e.events||[],e.events.push(t)},t.getDocumentMayUnload=()=>(e.events||[]).some((e=>e.getDocumentMayUnload())),t},Po=({localConfigOverrides:e,globalConfigOverrides:t,payload:n})=>{const r={payload:n},{datastreamId:o,...i}=e||{};return o&&(r.datastreamIdOverride=o),t&&!mt(t)&&n.mergeConfigOverride(t),i&&!mt(i)&&n.mergeConfigOverride(i),r};const Ao="adb_validation_sessionid",Ro="validation.",No="clientId",jo=e=>{let t=e.persistent.getItem(No);return t||(t=c(),e.persistent.setItem(No,t)),t};var xo=({window:e,createNamespacedStorage:t})=>{const n=t(Ro);return()=>{const t=de.default.parse(e.location.search)[Ao];if(!t)return"";const r=`${t}|${jo(n)}`;return`&${de.default.stringify({adobeAepValidationToken:r})}`}};const _o="Event was canceled because the onBeforeEventSend callback returned false.";var Mo=({config:e,logger:t,lifecycle:n,consent:r,createEvent:o,createDataCollectionRequestPayload:i,createDataCollectionRequest:a,sendEdgeNetworkRequest:s,applyResponse:c})=>{const{onBeforeEventSend:l,edgeConfigOverrides:d}=e;return{createEvent:o,sendEvent(e,o={}){const{edgeConfigOverrides:c,...u}=o,p=Po({payload:i(),localConfigOverrides:c,globalConfigOverrides:d}),f=a(p),g=be(),m=be();return n.onBeforeEvent({...u,event:e,onResponse:g.add,onRequestFailure:m.add}).then((()=>(p.payload.addEvent(e),r.awaitConsent()))).then((()=>{try{e.finalize(l)}catch(e){const t=()=>{throw e};return m.add(n.onRequestFailure),m.call({error:e}).then(t,t)}if(!e.shouldSend()){m.add(n.onRequestFailure),t.info(_o);const e=new Error(_o);return m.call({error:e}).then((()=>{}))}return s({request:f,runOnResponseCallbacks:g.call,runOnRequestFailureCallbacks:m.call})}))},applyResponse(e,t={}){const{renderDecisions:r=!1,decisionContext:o={},responseHeaders:s={},responseBody:l={handle:[]},personalization:d}=t,u=i(),p=a({payload:u}),f=be();return n.onBeforeEvent({event:e,renderDecisions:r,decisionContext:o,decisionScopes:[Io],personalization:d,onResponse:f.add,onRequestFailure:Xt}).then((()=>(u.addEvent(e),c({request:p,responseHeaders:s,responseBody:l,runOnResponseCallbacks:f.call}))))}}};const Lo="state:store";var $o=({cookieJar:e,shouldTransferCookie:t,apexDomain:n,dateProvider:r})=>({cookiesToPayload(r,o){const i=""!==n&&o.endsWith(n),a={domain:n,cookiesEnabled:!0};if(!i){const n=e.get(),r=Object.keys(n).filter(t).map((e=>({key:e,value:n[e]})));r.length&&(a.entries=r)}r.mergeState(a)},responseToCookies(t){t.getPayloadsByType(Lo).forEach((t=>{const o={domain:n},i=t.attrs&&t.attrs.SameSite&&t.attrs.SameSite.toLowerCase();void 0!==t.maxAge&&(o.expires=new Date(r().getTime()+1e3*t.maxAge)),void 0!==i&&(o.sameSite=i),"none"===i&&(o.secure=!0),e.set(t.key,t.value,o)}))}});const qo="mboxEdgeCluster",Uo="at_qa_mode",Bo="mbox";var Fo=({orgId:e,targetMigrationEnabled:t})=>n=>Jt(e,n)||n===Uo||t&&n===Bo,Vo="v1";const Ho="TypeError",zo="NetworkError",Go=e=>e.name===Ho||e.name===zo||0===e.status;var Jo=e=>{const t=e.shift()||[],n=e.shift()||[];return fe({},...t,...n,...e)},Qo=e=>t=>{const n=()=>{throw t};return e.call({error:t}).then(n,n)};const Wo=(e,t)=>t.getUseIdThirdPartyDomain()&&Go(e);var Xo=({config:e,lifecycle:t,cookieTransfer:n,sendNetworkRequest:r,createResponse:o,processWarningsAndErrors:i,getLocationHint:a,getAssuranceValidationTokenParams:s})=>{const{edgeDomain:c,edgeBasePath:l,datastreamId:d}=e;let u=!1;const p=(e,t)=>{const n=a(),r=n?`${l}/${n}${t.getEdgeSubPath()}`:`${l}${t.getEdgeSubPath()}`,o=t.getDatastreamIdOverride()||d;return o!==d&&t.getPayload().mergeMeta({sdkConfig:{datastream:{original:d}}}),`https://${e}/${r}/${Vo}/${t.getAction()}?configId=${o}&requestId=${t.getId()}${s()}`};return({request:e,runOnResponseCallbacks:a=Xt,runOnRequestFailureCallbacks:s=Xt})=>{const l=be();l.add(t.onResponse),l.add(a);const d=be();return d.add(t.onRequestFailure),d.add(s),t.onBeforeRequest({request:e,onResponse:l.add,onRequestFailure:d.add}).then((()=>{const t=u||!e.getUseIdThirdPartyDomain()?c:mo,o=p(t,e),i=e.getPayload();return n.cookiesToPayload(i,t),r({requestId:e.getId(),url:o,payload:i,useSendBeacon:e.getUseSendBeacon()})})).then((e=>(i(e),e))).catch((t=>{if(Wo(t,e)){u=!0,e.setUseIdThirdPartyDomain(!1);const t=p(c,e),o=e.getPayload();return n.cookiesToPayload(o,c),r({requestId:e.getId(),url:t,payload:o,useSendBeacon:e.getUseSendBeacon()})}return Qo(d)(t)})).then((({parsedBody:e,getHeader:t})=>{const r=o({content:e,getHeader:t});return n.responseToCookies(r),l.call({response:r}).then(Jo)}))}};const Yo=204,Ko="The server responded with a";var Zo=({logger:e})=>t=>{const{statusCode:n,body:r,parsedBody:o}=t;if(n<200||n>=300||!o&&n!==Yo||o&&!Array.isArray(o.handle)){const e=o?JSON.stringify(o,null,2):r;throw new Error(`${Ko} status code ${n} and ${e?`response body:\n${e}`:"no response body."}`)}if(o){const{warnings:t=[],errors:n=[]}=o;t.forEach((t=>{e.warn(`${Ko} warning:`,t)})),n.forEach((t=>{e.error(`${Ko} non-fatal error:`,t)}))}},ei=({orgId:e,cookieJar:t})=>{const n=Ct(e,Lt),r=()=>t.get(n),o=()=>{const e=t.get(qo);if(e)return`t${e}`};return()=>r()||o()};const ti=3,ni=[429,503,502,504];var ri=({response:e,retriesAttempted:t})=>t<ti&&ni.includes(e.statusCode);const oi=1e3,ii=1e3,ai=.3,si=e=>{const t=oi+e*ii,n=t*ai,r=t-n,o=t+n;return Math.round(r+Math.random()*(o-r))},ci=e=>{const t=e.getHeader(Kr);let n;if(t){const e=parseInt(t,10);n=Gt(e)?1e3*e:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return n};var li=({response:e,retriesAttempted:t})=>{let n=ci(e);return void 0===n&&(n=si(t)),n};const di=200;var ui=({cookieTransfer:e,lifecycle:t,createResponse:n,processWarningsAndErrors:r})=>({request:o,responseHeaders:i,responseBody:a,runOnResponseCallbacks:s=Xt,runOnRequestFailureCallbacks:c=Xt})=>{const l=be();l.add(t.onResponse),l.add(s);const d=be();d.add(t.onRequestFailure),d.add(c);const u=e=>i[e];return t.onBeforeRequest({request:o,onResponse:l.add,onRequestFailure:d.add}).then((()=>r({statusCode:di,getHeader:u,body:JSON.stringify(a),parsedBody:a}))).catch(Qo(d)).then((()=>{const t=n({content:a,getHeader:u});return e.responseToCookies(t),l.call({response:t}).then(Jo)}))},pi=e=>t=>{const n={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};ye(t,{web:n})};const fi=e=>{const{screen:{orientation:t}}=e;if(null==t||null==t.type)return null;const n=t.type.split("-");return 0===n.length||"portrait"!==n[0]&&"landscape"!==n[0]?null:n[0]},gi=e=>{if($e(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null};var mi=e=>t=>{const{screen:{width:n,height:r}}=e,o={},i=an(r);i>=0&&(o.screenHeight=i);const a=an(n);a>=0&&(o.screenWidth=a);const s=fi(e)||gi(e);s&&(o.screenOrientation=s),Object.keys(o).length>0&&ye(t,{device:o})},hi=e=>t=>{const{document:{documentElement:{clientWidth:n,clientHeight:r}={}}}=e,o={type:"browser"},i=an(n);i>=0&&(o.browserDetails={viewportWidth:i});const a=an(r);a>=0&&(o.browserDetails=o.browserDetails||{},o.browserDetails.viewportHeight=a),ye(t,{environment:o})},yi=e=>t=>{const n=e(),r={},o=an(n.getTimezoneOffset());void 0!==o&&(r.localTimezoneOffset=o),(void 0===o||Math.abs(o)<6e3)&&(r.localTime=cn(n)),ye(t,{placeContext:r})},vi=e=>t=>{const n=e().toISOString();ye(t,{timestamp:n})},bi="https://ns.adobe.com/experience/alloy",wi="2.26.0",Ei=e=>{ye(e,{implementationDetails:{name:bi,version:wi,environment:"browser"}})},Ii=(e,t,n,r)=>{const o=e.context.flatMap(((e,r)=>n[e]?[n[e]]:(t.warn(`Invalid context[${r}]: '${e}' is not available.`),[]))).concat(r);return{namespace:"Context",lifecycle:{onBeforeEvent({event:e}){const n={};return Promise.all(o.map((e=>Promise.resolve(e(n,t))))).then((()=>e.mergeXdm(n)))}}}},Ci=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]];const Si=e=>void 0!==e.userAgentData;var ki=e=>Si(e)?(t,n)=>{try{return e.userAgentData.getHighEntropyValues(Ci.map((e=>e[0]))).then((e=>{const n={};Ci.forEach((([t,r])=>{Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===r&&(n[t]=e[t])})),ye(t,{environment:{browserDetails:{userAgentClientHints:n}}})}))}catch(e){return n.warn(`Unable to collect user-agent client hints. ${e.message}`),Xt}}:Xt;const Oi=pi(window),Di=mi(window),Ti=hi(window),Pi=yi((()=>new Date)),Ai=vi((()=>new Date)),Ri={web:Oi,device:Di,environment:Ti,placeContext:Pi},Ni={highEntropyUserAgentHints:ki(navigator)},ji={...Ri,...Ni},xi=[Ai,Ei],_i=({config:e,logger:t})=>Ii(e,t,ji,xi);_i.namespace="Context",_i.configValidators=Sr({context:vr(kr()).default(Object.keys(Ri))});var Mi=({options:e})=>Sr({type:kr(),xdm:Sr({eventType:kr(),identityMap:Dr}),data:Sr({}),documentUnloading:br(),renderDecisions:br(),decisionScopes:vr(kr()).uniqueItems(),personalization:Sr({decisionScopes:vr(kr()).uniqueItems(),surfaces:vr(kr()).uniqueItems(),sendDisplayEvent:br().default(!0),includeRenderedPropositions:br().default(!1),defaultPersonalizationEnabled:br(),decisionContext:Sr({})}).default({sendDisplayEvent:!0}),datasetId:kr(),mergeId:kr(),edgeConfigOverrides:Tr,initializePersonalization:br()}).required().noUnknownFields()(e),Li=({options:e})=>Sr({renderDecisions:br(),responseHeaders:Cr(kr().required()),responseBody:Sr({handle:vr(Sr({type:kr().required(),payload:yr().required()})).required()}).required(),personalization:Sr({sendDisplayEvent:br().default(!0),decisionContext:Sr({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e);const $i=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:e=>Mi({options:e}),run:n=>{const{xdm:r,data:o,documentUnloading:i,type:a,mergeId:s,datasetId:c,edgeConfigOverrides:l,...d}=n,u=e.createEvent();return i&&u.documentMayUnload(),u.setUserXdm(r),u.setUserData(o),a&&u.mergeXdm({eventType:a}),s&&u.mergeXdm({eventMergeId:s}),l&&(d.edgeConfigOverrides=l),c&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),d.edgeConfigOverrides=l||{},ye(d.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:c}}}})),e.sendEvent(u,d)}},applyResponse:{documentationUri:"",optionsValidator:e=>Li({options:e}),run:t=>{const{renderDecisions:n=!1,decisionContext:r={},responseHeaders:o={},responseBody:i={handle:[]},personalization:a}=t,s=e.createEvent();return e.applyResponse(s,{renderDecisions:n,decisionContext:r,responseHeaders:o,responseBody:i,personalization:a})}}}});$i.namespace="DataCollector";const qi=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`;var Ui=({fireReferrerHideableImage:e,logger:t})=>n=>{const r=n.filter((e=>"url"===e.type));return r.length?Promise.all(r.map((n=>e(n.spec).then((()=>{t.info(qi(n,!0))})).catch((()=>{t.error(qi(n,!1))}))))).then(Xt):Promise.resolve()};const Bi=Sr({thirdPartyCookiesEnabled:br().default(!0),idMigrationEnabled:br().default(!0)});var Fi=Sr({url:kr().required().nonEmpty(),edgeConfigOverrides:Tr}).required().noUnknownFields(),Vi="ECID",Hi=({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:n,setLegacyEcid:r,handleResponseForIdSyncs:o,getNamespacesFromResponse:i,getIdentity:a,consent:s,appendIdentityToUrl:c,logger:l,getIdentityOptionsValidator:d,decodeKndctrCookie:u})=>{let p,f={};return{lifecycle:{onBeforeRequest:({request:r,onResponse:o,onRequestFailure:i})=>(e(r.getPayload()),t(r.getPayload()),n({request:r,onResponse:o,onRequestFailure:i})),onResponse({response:e}){const t=i(e);return p&&p[Vi]||!t||!t[Vi]||r(t[Vi]),t&&Object.keys(t).length>0&&(p={...p,...t}),f={...f,...e.getEdge()},o(e)}},commands:{getIdentity:{optionsValidator:d,run:e=>{const{namespaces:t}=e;return s.awaitConsent().then((()=>{if(p)return;const n=u();return n&&t.includes(Vi)&&(p||(p={}),p[Vi]=n,1===t.length)?void 0:a(e)})).then((()=>({identity:t.reduce(((e,t)=>(e[t]=p[t]||null,e)),{}),edge:f})))}},appendIdentityToUrl:{optionsValidator:Fi,run:e=>s.withConsent().then((()=>{if(p)return;const t=u();return t?(p||(p={}),void(p[Vi]=t)):a(e)})).then((()=>({url:c(p[Vi],e.url)}))).catch((t=>(l.warn(`Unable to append identity to url. ${t.message}`),e)))}}}},zi=({config:e,getEcidFromVisitor:t,apexDomain:n,isPageSsl:r,cookieJar:o})=>{const{idMigrationEnabled:i,orgId:a}=e,s=`AMCV_${a}`,c=()=>{let e=null;const t="s_ecid",n=o.get(t)||o.get(s);if(n){const t=/(^|\|)MCMID\|(\d+)($|\|)/,r=n.match(t);r&&(e=r[2])}return e};return{getEcid(){if(i){const e=c();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid(e){if(i&&c()!==e){const t=r?{sameSite:"none",secure:!0}:{};o.set(s,`MCMID|${e}`,{domain:n,expires:390,...t})}}}},Gi=({logger:e})=>new Promise(((t,n)=>{if(pe(window.adobe)&&pe(window.adobe.optIn)){const r=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),r.fetchPermissions((()=>{r.isApproved([r.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):n(new Error("Legacy opt-in was declined."))}),!0)}else t()})),Ji=e=>{const t=e.Visitor;return $e(t)&&$e(t.getInstance)&&t},Qi=({logger:e,orgId:t,awaitVisitorOptIn:n})=>()=>{const r=Ji(window);return r?n({logger:e}).then((()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((n=>{r.getInstance(t,{}).getMarketingCloudVisitorID((t=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),n(t)}),!0)}))))).catch((t=>{t?e.info(`${t.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()},Wi=({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange")),Xi=({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:n,awaitIdentityCookie:r,logger:o})=>{let i;const a=e=>(t(e),n(e.getPayload()));return({request:t,onResponse:n,onRequestFailure:s})=>{if(e())return t.setIsIdentityEstablished(),Promise.resolve();if(i){o.info("Delaying request while retrieving ECID from server.");const e=i;return i=e.catch((()=>r({onResponse:n,onRequestFailure:s}))),e.then((()=>{o.info("Resuming previously delayed request."),t.setIsIdentityEstablished()})).catch((()=>a(t)))}return i=r({onResponse:n,onRequestFailure:s}),i.catch((()=>{})),a(t)}},Yi="CORE",Ki=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{const n={identity:{fetch:[Vi]}};return e&&t()&&n.identity.fetch.push(Yi),e=>{e.mergeQuery(n)}},Zi=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>n=>{e&&t()&&n.setUseIdThirdPartyDomain()},ea=({getLegacyEcid:e,addEcidToPayload:t})=>n=>n.hasIdentity(Vi)?Promise.resolve():e().then((e=>{e&&t(n,e)})),ta="adobe_mc",na=e=>{try{return decodeURIComponent(e)}catch{return""}};const ra=300;var oa=({locationSearch:e,dateProvider:t,orgId:n,logger:r})=>o=>{if(o.hasIdentity(Vi))return;let i=de.default.parse(e)[ta];if(void 0===i)return;Array.isArray(i)&&(r.warn("Found multiple adobe_mc query string paramters, only using the last one."),i=i[i.length-1]);const a=i.split("|").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=na(r),e[n]=e[n].replace(/[^a-zA-Z0-9@.]/g,""),e}),{}),s=parseInt(a.TS,10),c=a.MCMID,l=na(a.MCORGID);t().getTime()/1e3<=s+ra&&l===n&&c?(r.info(`Found valid ECID identity ${c} from the adobe_mc query string parameter.`),o.addIdentity(Vi,{id:c})):r.info("Detected invalid or expired adobe_mc query string parameter.")},ia=(e,t)=>{e.addIdentity(Vi,{id:t})},aa=({doesIdentityCookieExist:e,orgId:t,logger:n})=>({onResponse:r,onRequestFailure:o})=>new Promise(((i,a)=>{r((()=>{e()?i():(n.warn(`Identity cookie not found. This could be caused by any of the following issues:\n\t* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.\n\t* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.\n\t* The request was canceled by the browser and not fully processed.`),a(new Error("Identity cookie not found.")))})),o((()=>{e()?i():a(new Error("Identity cookie not found."))}))})),sa=e=>e.getPayloadsByType("identity:result").reduce(((e,t)=>(t.namespace&&t.namespace.code&&(e[t.namespace.code]=t.id),e)),{}),ca=({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:n,globalConfigOverrides:r})=>({namespaces:o,edgeConfigOverrides:i}={})=>{const a=Po({payload:t(o),globalConfigOverrides:r,localConfigOverrides:i}),s=n(a);return e({request:s})},la=({payload:e,datastreamIdOverride:t})=>So({payload:e,datastreamIdOverride:t,getAction:()=>"identity/acquire",getUseSendBeacon:()=>!1}),da=e=>{const t={query:{identity:{fetch:e}}};return Oo({content:t,addIdentity:Co(t),hasIdentity:Do(t)})};const ua=/^([^?#]*)(\??[^#]*)(#?.*)$/,pa=e=>""===e?"?":"?"===e?"":"&";var fa=({dateProvider:e,orgId:t})=>(n,r)=>{const o=Math.round(e().getTime()/1e3),i=encodeURIComponent(`TS=${o}|MCMID=${n}|MCORGID=${encodeURIComponent(t)}`),[,a,s,c]=r.match(ua);return`${a}${s}${pa(s)}adobe_mc=${i}${c}`};const ga=Sr({namespaces:vr(Or(Vi,Yi)).nonEmpty().uniqueItems().default([Vi]),edgeConfigOverrides:Tr}).noUnknownFields().default({namespaces:[Vi]});var ma=({thirdPartyCookiesEnabled:e})=>t=>{const n=ga(t);if(!e&&n.namespaces.includes(Yi))throw new Error(`namespaces: The ${Yi} namespace cannot be requested when third-party cookies are disabled.`);return n};const ha=1,ya=(e,t)=>{let n,r=0,o=0;do{if(t<0||t+o>=e.length)throw new Error("Invalid varint: buffer ended unexpectedly");if(n=e[t+o],r|=(127&n)<<7*o,o+=1,o>10)throw new Error("Invalid varint: too long")}while(128&n);return{value:r,length:o}},va=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),ba=e=>{let t=0,n=null;for(;t<e.length&&!n;){const{value:r,length:o}=ya(e,t);t+=o;const i=7&r;if(r>>3===ha){if(i===va.LEN){const r=ya(e,t);return t+=r.length,n=(new TextDecoder).decode(e.slice(t,t+r.value)),t+=r.value,n}}else switch(i){case va.VARINT:t+=ya(e,t).length;break;case va.I64:t+=8;break;case va.LEN:{const n=ya(e,t);t+=n.length+n.value;break}case va.SGROUP:case va.EGROUP:break;case va.I32:t+=4;break;default:throw new Error(`Malformed kndctr cookie. Unknown wire type: ${i}`)}}throw new Error("No ECID found in cookie.")},wa=e=>{const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)))};var Ea=({orgId:e,cookieJar:t,logger:n})=>{const r=Ct(e,"identity");return()=>{const e=t.get(r);if(!e)return null;try{const t=decodeURIComponent(e).replace(/_/g,"/").replace(/-/g,"+"),n=wa(t);return ba(n)}catch(e){return n.warn(`Unable to decode ECID from ${r} cookie`,e),null}}};const Ia=({config:e,logger:t,consent:n,fireReferrerHideableImage:r,sendEdgeNetworkRequest:o,apexDomain:i,getBrowser:a})=>{const{orgId:s,thirdPartyCookiesEnabled:c,edgeConfigOverrides:l}=e,d=Qi({logger:t,orgId:s,awaitVisitorOptIn:Gi}),u=we({logger:t,cookieJar:me}),p=zi({config:e,getEcidFromVisitor:d,apexDomain:i,cookieJar:u,isPageSsl:"https:"===window.location.protocol}),f=$t({orgId:s}),g=ca({sendEdgeNetworkRequest:o,createIdentityRequestPayload:da,createIdentityRequest:la,globalConfigOverrides:l}),m=xt({getBrowser:a}),h=Zi({thirdPartyCookiesEnabled:c,areThirdPartyCookiesSupportedByDefault:m}),y=ea({getLegacyEcid:p.getEcid,addEcidToPayload:ia}),v=oa({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:s,logger:t}),b=aa({doesIdentityCookieExist:f,orgId:s,logger:t}),w=Xi({doesIdentityCookieExist:f,setDomainForInitialIdentityPayload:h,addLegacyEcidToPayload:y,awaitIdentityCookie:b,logger:t}),E=Ui({fireReferrerHideableImage:r,logger:t}),I=Wi({processIdSyncs:E}),C=fa({dateProvider:()=>new Date,orgId:s}),S=ma({thirdPartyCookiesEnabled:c}),k=Ki({thirdPartyCookiesEnabled:c,areThirdPartyCookiesSupportedByDefault:m}),O=Ea({orgId:s,cookieJar:u,logger:t});return Hi({addEcidQueryToPayload:k,addQueryStringIdentityToPayload:v,ensureSingleIdentity:w,setLegacyEcid:p.setEcid,handleResponseForIdSyncs:I,getNamespacesFromResponse:sa,getIdentity:g,consent:n,appendIdentityToUrl:C,logger:t,getIdentityOptionsValidator:S,decodeKndctrCookie:O})};Ia.namespace="Identity",Ia.configValidators=Bi;const Ca=({config:e,componentRegistry:t})=>{const n=[...t.getCommandNames(),to,no].sort(),r={...e};Object.keys(e).forEach((t=>{const n=e[t];"function"==typeof n&&(r[t]=n.toString())}));const o=t.getComponentNames();return{version:wi,configs:r,commands:n,components:o}},Sa=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:Ca({config:e,componentRegistry:t})})}}});Sa.namespace="LibraryInfo";var ka=Object.freeze({__proto__:null,context:_i,dataCollector:$i,identity:Ia,libraryInfo:Sa});const Oa=Ft(window),{fetch:Da,navigator:Ta}=window,Pa=yo(),Aa=wt(window,me),Ra=bo({fetch:Da}),Na=gt(),ja=xo({window:window,createNamespacedStorage:Oa}),xa=Ut({userAgent:window.navigator.userAgent}),_a=({instanceName:e,logController:{setDebugEnabled:t,logger:n,createComponentLogger:r},components:o})=>{const i=Mr(),a=xr(i),s=o.concat(Object.values(ka)),c=e=>{t(e.enabled,{fromConfig:!1})},l=we({logger:n,cookieJar:me}),d=o=>{const c=uo({options:o,componentCreators:s,coreConfigValidators:Pa,createConfig:fo,logger:n,setDebugEnabled:t}),{orgId:d,targetMigrationEnabled:u}=c,p=Fo({orgId:d,targetMigrationEnabled:u}),f=$o({cookieJar:l,shouldTransferCookie:p,apexDomain:Aa,dateProvider:()=>new Date}),g=$e(Ta.sendBeacon)?wo({sendBeacon:Ta.sendBeacon.bind(Ta),sendFetchRequest:Ra,logger:n}):Ra,m=Lr({logger:n,sendFetchRequest:Ra,sendBeaconRequest:g,isRequestRetryable:ri,getRequestRetryDelay:li}),h=Zo({logger:n}),y=$r({logger:n}),v=eo({extractEdgeInfo:y}),b=ei({orgId:d,cookieJar:me}),w=Xo({config:c,lifecycle:a,cookieTransfer:f,sendNetworkRequest:m,createResponse:v,processWarningsAndErrors:h,getLocationHint:b,getAssuranceValidationTokenParams:ja}),E=ui({lifecycle:a,cookieTransfer:f,createResponse:v,processWarningsAndErrors:h}),I=Qr({logger:n}),C=Wr({generalConsentState:I,logger:n}),S=Mo({config:c,logger:n,lifecycle:a,consent:C,createEvent:Yr,createDataCollectionRequestPayload:To,createDataCollectionRequest:ko,sendEdgeNetworkRequest:w,applyResponse:E});return po({componentCreators:s,lifecycle:a,componentRegistry:i,getImmediatelyAvailableTools(t){const n=r(t);return{config:c,componentRegistry:i,consent:C,eventManager:S,fireReferrerHideableImage:Na,logger:n,lifecycle:a,sendEdgeNetworkRequest:w,handleError:vo({errorPrefix:`[${e}] [${t}]`,logger:n}),createNamespacedStorage:Oa,apexDomain:Aa,getBrowser:xa}}})},u=vo({errorPrefix:`[${e}]`,logger:n});return ro({logger:n,configureCommand:d,setDebugCommand:c,handleError:u,validateCommandOptions:io})},Ma=({eventManager:e,lifecycle:t,handleError:n})=>r=>{if(r.s_fe)return Promise.resolve();const o=r.target,i=e.createEvent();return i.documentMayUnload(),t.onClick({event:i,clickedElement:o}).then((()=>i.isEmpty()?Promise.resolve():e.sendEvent(i))).then(Xt).catch((e=>{n(e,"click collection")}))};var La=({eventManager:e,lifecycle:t,handleError:n})=>{const r=Ma({eventManager:e,lifecycle:t,handleError:n});document.addEventListener("click",r,!0)};const $a="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",qa=kr().regexp().default($a),Ua=Sr({clickCollectionEnabled:br().default(!0),clickCollection:Sr({internalLinkEnabled:br().default(!0),externalLinkEnabled:br().default(!0),downloadLinkEnabled:br().default(!0),sessionStorageEnabled:br().default(!1),eventGroupingEnabled:br().default(!1),filterClickProperties:wr()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:qa,onBeforeLinkClickSend:wr().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),Ba="cppXYctnr";var Fa=(e=document)=>null!==e.getElementById(Ba),Va=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname},Ha=(e,t)=>Va(e)!==Va(t);const za=(e,t)=>t&&("download"===t&&!e.downloadLinkEnabled||"exit"===t&&!e.externalLinkEnabled||"other"===t&&!e.internalLinkEnabled);var Ga=({config:e,logger:t,getClickedElementProperties:n,clickActivityStorage:r})=>{const{clickCollectionEnabled:o,clickCollection:i}=e;return o?({event:o,clickedElement:a})=>{const s=n({clickActivityStorage:r,clickedElement:a,config:e,logger:t}),c=s.linkType;Fa()||(s.isValidLink()&&za(i,c)?t.info(`Cancelling link click event due to clickCollection.${c}LinkEnabled = false.`):!s.isInternalLink()||!i.eventGroupingEnabled||e.onBeforeLinkClickSend&&!i.filterClickDetails||Ha(window.location.hostname,s.linkUrl)?s.isValidLink()?(o.mergeXdm(s.xdm),o.mergeData(s.data),r.save({pageName:s.pageName,pageIDType:s.pageIDType})):s.isValidActivityMapData()&&r.save(s.properties):r.save(s.properties))}:()=>{}};const Ja=e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}),Qa=e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}),Wa=(e,t)=>{const{xdm:n,data:r,clickedElement:o}=e;if(t.clickedElement=o,n&&n.web&&n.web.webInteraction){const{name:e,region:r,type:o,URL:i}=n.web.webInteraction;t.linkName=e,t.linkRegion=r,t.linkType=o,t.linkUrl=i}if(r&&r.__adobe&&r.__adobe.analytics){const{contextData:e}=r.__adobe.analytics;if(e&&e.a&&e.a.activitymap){const{page:n,link:r,region:o,pageIDType:i}=e.a.activitymap;t.pageName=n||t.pageName,t.linkName=r||t.linkName,t.linkRegion=o||t.linkRegion,void 0!==i&&(t.pageIDType=i)}}};var Xa=({properties:e,logger:t}={})=>{let n=e||{};return{get pageName(){return n.pageName},set pageName(e){n.pageName=e},get linkName(){return n.linkName},set linkName(e){n.linkName=e},get linkRegion(){return n.linkRegion},set linkRegion(e){n.linkRegion=e},get linkType(){return n.linkType},set linkType(e){n.linkType=e},get linkUrl(){return n.linkUrl},set linkUrl(e){n.linkUrl=e},get pageIDType(){return n.pageIDType},set pageIDType(e){n.pageIDType=e},get clickedElement(){return n.clickedElement},set clickedElement(e){n.clickedElement=e},get properties(){return{pageName:n.pageName,linkName:n.linkName,linkRegion:n.linkRegion,linkType:n.linkType,linkUrl:n.linkUrl,pageIDType:n.pageIDType}},isValidLink:()=>!!(n.linkUrl&&n.linkType&&n.linkName&&n.linkRegion),isInternalLink(){return this.isValidLink()&&"other"===n.linkType},isValidActivityMapData:()=>!!n.pageName&&!!n.linkName&&!!n.linkRegion&&void 0!==n.pageIDType,get xdm(){return n.filteredXdm?n.filteredXdm:Ja(this)},get data(){return n.filteredData?n.filteredData:Qa(this)},applyPropertyFilter(e){e&&!1===e(n)&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),n={})},applyOptionsFilter(e){const r=this.options;if(r&&r.clickedElement&&(r.xdm||r.data)){if(e&&!1===e(r))return t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),void(this.options=void 0);this.options=r,n.filteredXdm=r.xdm,n.filteredData=r.data}},get options(){const e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),e.xdm||e.data)return e},set options(e){n={},e&&Wa(e,n)}}},Ya=({clickActivityStorage:e})=>t=>{if(Fa())return;const n=e.load(),r=Xa({properties:n});if(r.isValidLink()||r.isValidActivityMapData()){if(r.isValidLink()){const e=r.xdm;delete e.eventType,t.mergeXdm(e)}r.isValidActivityMapData()&&t.mergeData(r.data),e.save({pageName:r.pageName,pageIDType:r.pageIDType})}},Ka=({window:e,getLinkName:t,getLinkRegion:n,getAbsoluteUrlFromAnchorElement:r,findClickableElement:o,determineLinkType:i})=>({clickedElement:a,config:s,logger:c,clickActivityStorage:l})=>{const{onBeforeLinkClickSend:d,clickCollection:u}=s,{filterClickDetails:p}=u,f=Xa({logger:c});if(a){const c=o(a);if(c){f.clickedElement=a,f.linkUrl=r(e,c),f.linkType=i(e,s,f.linkUrl,c),f.linkRegion=n(c),f.linkName=t(c),f.pageIDType=0,f.pageName=e.location.href;const o=l.load();o&&o.pageName&&(f.pageName=o.pageName,f.pageIDType=1),p?f.applyPropertyFilter(p):d&&f.applyOptionsFilter(d)}}return f};const Za="clickData";var es=({storage:e})=>({save:t=>{const n=JSON.stringify(t);e.setItem(Za,n)},load:()=>{let t=null;const n=e.getItem(Za);return n&&(t=JSON.parse(n)),t},remove:()=>{e.removeItem(Za)}}),ts=({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})},ns=(e,t)=>{const{clickCollectionEnabled:n,onBeforeLinkClickSend:r,downloadLinkQualifier:o}=e
;!1===n&&(r&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),o&&o!==$a&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))},rs=e=>e&&e.replace(/\s+/g," ").trim();const os=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i;var is=e=>!(e&&e.nodeName&&e.nodeName.match(os));const as=e=>{let t=[],n=!1;return is(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((e=>{const r=as(e);t=t.concat(r.supportedNodes),n=n||r.includesUnsupportedNodes}))):n=!0,{supportedNodes:t,includesUnsupportedNodes:n}},ss=(e,t,n)=>{let r;return n&&n!==e.nodeName.toUpperCase()||(r=e.getAttribute(t)),r},cs=e=>{const t={texts:[]};return e.supportedNodes.forEach((e=>{e.getAttribute&&(t.alt||(t.alt=rs(e.getAttribute("alt"))),t.title||(t.title=rs(e.getAttribute("title"))),t.inputValue||(t.inputValue=rs(ss(e,"value","INPUT"))),t.imgSrc||(t.imgSrc=rs(ss(e,"src","IMG")))),e.nodeValue&&t.texts.push(e.nodeValue)})),t},ls=/^(HEADER|MAIN|FOOTER|NAV)$/i,ds=e=>{let t;return"region"===e.role&&Wt(e["aria-label"])&&(t=e["aria-label"]),t},us=e=>{let t;return e&&e.nodeName&&e.nodeName.match(ls)&&(t=e.nodeName),t};var ps=e=>!!e&&/^[a-z0-9]+:\/\//i.test(e),fs=e=>!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0)),gs=e=>!!e&&!!e.onclick,ms=e=>{if("INPUT"===e.tagName){const t=e.getAttribute("type");if("submit"===t)return!0;if("image"===t&&e.src)return!0}return!1},hs=e=>"BUTTON"===e.tagName&&"submit"===e.type,ys=e=>{const t=e.indexOf("?"),n=e.indexOf("#");return t>=0&&(t<n||n<0)?e.substring(0,t):n>=0?e.substring(0,n):e},vs=(e,t,n)=>{let r=!1;if(t)if(n&&n.download)r=!0;else if(e){const n=new RegExp(e),o=ys(t).toLowerCase();r=n.test(o)}return r},bs=(e,t)=>{let n=!1;if(t&&e.location.hostname){const r=e.location.hostname.toLowerCase();n=ys(t).toLowerCase().indexOf(r)<0}return n},ws=e=>{const t=e.getContent();return void 0!==t.xdm&&void 0!==t.xdm.web&&void 0!==t.xdm.web.webPageDetails&&void 0!==t.xdm.web.webPageDetails.name},Es=()=>{const e={};return{getItem:t=>e[t],setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}};const Is=Ka({window:window,getLinkName:e=>{let t=rs(e.innerText||e.textContent);const n=as(e);if(!t||n.includesUnsupportedNodes){const e=cs(n);t=rs(e.texts.join("")),t||(t=e.alt||e.title||e.inputValue||e.imgSrc)}return t||""},getLinkRegion:e=>{let t,n=e.parentNode;for(;n;){if(t=rs(n.id||ds(n)||us(n)),t)return t;n=n.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:(e,t)=>{const n=e.location;let r=t.href||"";"string"!=typeof r&&(r="");let{protocol:o,host:i}=t;if(r&&!ps(r)){o||(o=n.protocol?n.protocol:""),o=o?`${o}//`:"",i||(i=n.host?n.host:"");let e="";if("/"!==r.substring(0,1)){let t=n.pathname.lastIndexOf("/");t=t<0?0:t,e=n.pathname.substring(0,t)}r=`${o}${i}${e}/${r}`}return r},findClickableElement:e=>{let t=e;for(;t;){if(fs(t)||gs(t)||ms(t)||hs(t))return t;t=t.parentNode}return null},determineLinkType:(e,t,n,r)=>{let o="other";return Wt(n)&&(vs(t.downloadLinkQualifier,n,r)?o="download":bs(e,n)&&(o="exit")),o}});let Cs;const Ss=e=>{if(!Cs){const t=Ft(window)(e.orgId||""),n=Es(),r=e.clickCollection.sessionStorageEnabled?t.session:n;Cs=es({storage:r})}},ks=({config:e,eventManager:t,handleError:n,logger:r})=>{ns(e,r);const o=e.clickCollection;Cs||Ss(e);const i=Ga({config:e,logger:r,clickActivityStorage:Cs,getClickedElementProperties:Is}),a=Ya({clickActivityStorage:Cs}),s=ts({clickActivityStorage:Cs});return{lifecycle:{onComponentsRegistered(e){const{lifecycle:r}=e;La({eventManager:t,lifecycle:r,handleError:n})},onClick({event:e,clickedElement:t}){i({event:e,clickedElement:t})},onBeforeEvent({event:e}){ws(e)&&(o.eventGroupingEnabled&&a(e),s(e,r,Cs))}}}};ks.namespace="ActivityCollector",ks.configValidators=Ua,ks.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(Cs||Ss(e),{getLinkDetails:n=>Is({clickActivityStorage:Cs,clickedElement:n,config:e,logger:t}).properties});const Os=e=>`URL destination succeeded: ${e.spec.url}`;var Ds=({fireReferrerHideableImage:e,logger:t,cookieJar:n,isPageSsl:r})=>{const o=r?{sameSite:"none",secure:!0}:{},i=e=>{e.filter((e=>"cookie"===e.type)).forEach((e=>{const{name:t,value:r,domain:i,ttlDays:a}=e.spec;n.set(t,r||"",{domain:i||"",expires:a||10,...o})}))},a=n=>{const r=n.filter((e=>"url"===e.type));return Promise.all(r.map((n=>e(n.spec).then((()=>{t.info(Os(n))})).catch((()=>{}))))).then(Xt)};return e=>(i(e),a(e))},Ts=({processDestinations:e})=>{const t=({response:t})=>{const n=t.getPayloadsByType("activation:push");return e(n)},n=({response:e})=>({destinations:e.getPayloadsByType("activation:pull")});return({response:e})=>t({response:e}).then((()=>n({response:e})))};const Ps=({logger:e,fireReferrerHideableImage:t})=>{const n=me.withConverter({write:e=>encodeURIComponent(e)}),r=we({logger:e,cookieJar:n}),o=Ds({fireReferrerHideableImage:t,logger:e,cookieJar:r,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:Ts({processDestinations:o})},commands:{}}};Ps.namespace="Audiences";var As=({storedConsent:e,taskQueue:t,defaultConsent:n,consent:r,sendSetConsentRequest:o,validateSetConsentOptions:i,consentHashStore:a,doesIdentityCookieExist:s})=>{const c={[Fr]:n};let l=e.read();const d=s(),u=void 0!==l[Fr];d&&u||a.clear(),d||(e.clear(),l={}),r.initializeConsent(c,l);const p=()=>{if(0===t.length){const t=e.read();void 0!==t[Fr]&&r.setConsent(t)}};return{commands:{setConsent:{optionsValidator:i,run:({consent:e,identityMap:n,edgeConfigOverrides:i})=>{r.suspend();const s=a.lookup(e);return t.addTask((()=>s.isNew()?o({consentOptions:e,identityMap:n,edgeConfigOverrides:i}):Promise.resolve())).then((()=>s.save())).finally(p)}}},lifecycle:{onResponse:p,onRequestFailure:p}}};const Rs=e=>Array.isArray(e)?e.map((e=>Rs(e))):"object"==typeof e&&null!==e?Object.keys(e).sort().reduce(((t,n)=>(t[n]=Rs(e[n]),t)),{}):e;var Ns=e=>Ie(JSON.stringify(Rs(e)));const js=({standard:e,version:t})=>`${e}.${t}`;var xs=({storage:e})=>({clear(){e.clear()},lookup(t){const n={},r=e=>{const t=js(e),{standard:r,version:o,...i}=e;return n[t]||(n[t]=Ns(i).toString()),n[t]};return{isNew:()=>t.some((t=>{const n=js(t),o=e.getItem(n);return null===o||o!==r(t)})),save(){t.forEach((t=>{const n=js(t);e.setItem(n,r(t))}))}}}}),_s=()=>{const e={},t=Oo({content:e,addIdentity:(t,n)=>{e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(n)},hasIdentity:t=>void 0!==(e.identityMap&&e.identityMap[t])});return t.setConsent=t=>{e.consent=t},t},Ms=({payload:e,datastreamIdOverride:t})=>So({payload:e,datastreamIdOverride:t,getAction:()=>"privacy/set-consent",getUseSendBeacon:()=>!1}),Ls=({parseConsentCookie:e,orgId:t,cookieJar:n})=>{const r=Ct(t,Mt);return{read(){const t=n.get(r);return t?e(t):{}},clear(){n.remove(r)}}},$s=({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:n,edgeConfigOverrides:r})=>({consentOptions:o,identityMap:i,edgeConfigOverrides:a})=>{const s=Po({payload:e(),globalConfigOverrides:r,localConfigOverrides:a});s.payload.setConsent(o),pe(i)&&Object.keys(i).forEach((e=>{i[e].forEach((t=>{s.payload.addIdentity(e,t)}))}));const c=t(s);return n({request:c}).then((()=>{}))},qs=e=>e.split(";").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{}),Us=Sr({consent:vr(yr()).required().nonEmpty(),identityMap:Dr,edgeConfigOverrides:Tr}).noUnknownFields().required(),Bs=Sr({defaultConsent:Or(qr,Ur,Br).default(qr)});const Fs=({config:e,consent:t,sendEdgeNetworkRequest:n,createNamespacedStorage:r})=>{const{orgId:o,defaultConsent:i}=e,a=Ls({parseConsentCookie:qs,orgId:o,cookieJar:me}),s=Ee(),c=$s({createConsentRequestPayload:_s,createConsentRequest:Ms,sendEdgeNetworkRequest:n,edgeConfigOverrides:e.edgeConfigOverrides}),l=r(`${It(o)}.consentHashes.`),d=xs({storage:l.persistent}),u=$t({orgId:o});return As({storedConsent:a,taskQueue:s,defaultConsent:i,consent:t,sendSetConsentRequest:c,validateSetConsentOptions:Us,consentHashStore:d,doesIdentityCookieExist:u})};Fs.namespace="Consent",Fs.configValidators=Bs;var Vs=()=>({eventMergeId:c()});t.createEventMergeId=Vs;var Hs={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},zs=({mediaRequestPayload:e,action:t})=>So({payload:e,edgeSubPath:"/va",getAction:()=>t,getUseSendBeacon:()=>!1}),Gs=({config:e,eventManager:t,consent:n,sendEdgeNetworkRequest:r,setTimestamp:o})=>({createMediaEvent({options:n}){const r=t.createEvent(),{xdm:i}=n;if(o(i),r.setUserXdm(i),i.eventType===Hs.AD_START){const{advertisingDetails:t}=n.xdm.mediaCollection;r.mergeXdm({mediaCollection:{advertisingDetails:{playerName:t.playerName||e.streamingMedia.playerName}}})}return r},createMediaSession(n){const{playerName:r,channel:o,appVersion:i}=e.streamingMedia,a=t.createEvent(),{sessionDetails:s}=n.xdm.mediaCollection;return a.setUserXdm(n.xdm),a.mergeXdm({eventType:Hs.SESSION_START,mediaCollection:{sessionDetails:{playerName:s.playerName||r,channel:s.channel||o,appVersion:s.appVersion||i}}}),a},augmentMediaEvent({event:e,playerId:t,getPlayerDetails:n,sessionID:r}){if(!t||!n)return e;const{playhead:o,qoeDataDetails:i}=n({playerId:t});return e.mergeXdm({mediaCollection:{playhead:an(o),qoeDataDetails:i,sessionID:r}}),e},trackMediaSession({event:e,mediaOptions:n,edgeConfigOverrides:r}){const o={mediaOptions:n,edgeConfigOverrides:r};return t.sendEvent(e,o)},trackMediaEvent({event:e,action:t}){const o=To(),i=zs({mediaRequestPayload:o,action:t});return o.addEvent(e),e.finalize(),n.awaitConsent().then((()=>r({request:i}).then((()=>({})))))}}),Js={MAIN:"main",COMPLETED:"completed"},Qs=()=>{let e;return{getSession:t=>e[t]||{},storeSession:({playerId:t,sessionDetails:n})=>{void 0===e&&(e={}),e[t]=n},stopPing:({playerId:t})=>{const n=e[t];n&&(clearTimeout(n.pingId),n.pingId=null,n.playbackState=Js.COMPLETED)},savePing:({playerId:t,pingId:n,playbackState:r})=>{e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=n,e[t].playbackState=r)}}};const Ws=(e,t)=>e===Hs.AD_START||e===Hs.Ad_BREAK_START||e===Hs.AD_SKIP||e===Hs.AD_COMPLETE?"ad":e===Hs.AD_BREAK_COMPLETE||e===Hs.CHAPTER_COMPLETE||e===Hs.CHAPTER_START||e===Hs.CHAPTER_SKIP||e===Hs.SESSION_START?"main":e===Hs.SESSION_END||e===Hs.SESSION_COMPLETE?"completed":t;var Xs=({mediaEventManager:e,mediaSessionCacheManager:t,config:n})=>{const r=o=>{const i=e.createMediaEvent({options:o}),{playerId:a,xdm:s}=o,{eventType:c}=s,l=c.split(".")[1],{getPlayerDetails:d,sessionPromise:u,playbackState:p}=t.getSession(a);return u.then((o=>o.sessionId?(e.augmentMediaEvent({event:i,eventType:c,playerId:a,getPlayerDetails:d,sessionID:o.sessionId}),e.trackMediaEvent({event:i,action:l}).then((()=>{if(a)if(c===Hs.SESSION_COMPLETE||c===Hs.SESSION_END)t.stopPing({playerId:a});else{const e=Ws(c,p);if("completed"===e)return;const o="ad"===e?n.streamingMedia.adPingInterval:n.streamingMedia.mainPingInterval,i=setTimeout((()=>{const e={playerId:a,xdm:{eventType:Hs.PING}};r(e)}),1e3*o);t.savePing({playerId:a,pingId:i,playbackState:e})}}))):Promise.reject(new Error(`Failed to trigger media event: ${c}. Session ID is not available for playerId: ${a}.`))))};return e=>r(e)},Ys=({config:e,mediaEventManager:t,mediaSessionCacheManager:n,legacy:r=!1})=>o=>{if(!e.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));const{playerId:i,getPlayerDetails:a,edgeConfigOverrides:s}=o,c=t.createMediaSession(o);t.augmentMediaEvent({event:c,playerId:i,getPlayerDetails:a});const l=t.trackMediaSession({event:c,mediaOptions:{playerId:i,getPlayerDetails:a,legacy:r},edgeConfigOverrides:s});return n.storeSession({playerId:i,sessionDetails:{sessionPromise:l,getPlayerDetails:a,playbackState:Js.MAIN}}),l},Ks=e=>!Qt(e)||!e.trim(),Zs=({mediaSessionCacheManager:e,config:t,trackMediaEvent:n})=>({response:r,playerId:o,getPlayerDetails:i})=>{const a=r.getPayloadsByType("media-analytics:new-session");if(qe(a)){const{sessionId:r}=a[0];if(Ks(r))return{};if(!o||!i)return{sessionId:r};const s=setTimeout((()=>{n({playerId:o,xdm:{eventType:Hs.PING}})}),1e3*t.streamingMedia.mainPingInterval);return e.savePing({playerId:o,pingId:s,playbackState:Js.MAIN}),{sessionId:r}}return{}};const ec={Video:"video",Audio:"audio"},tc={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},nc={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},rc={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},oc={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},ic={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},ac={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},sc={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},cc={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"};var lc=({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:n,logger:r,createMediaHelper:o,createGetInstance:i,config:a})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Xt}){if(!e)return;const{legacy:r,playerId:o,getPlayerDetails:i}=e;r&&t((({response:e})=>n({playerId:o,getPlayerDetails:i,response:e})))}},commands:{getMediaAnalyticsTracker:{run:()=>{if(!a.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));r.info("Streaming media is configured in legacy mode.");const n=o({logger:r});return Promise.resolve({getInstance:()=>i({logger:r,trackMediaEvent:e,trackMediaSession:t,uuid:c}),Event:rc,MediaType:ec,PlayerState:nc,StreamType:tc,MediaObjectKey:ic,VideoMetadataKeys:ac,AudioMetadataKeys:sc,AdMetadataKeys:cc,...n})}}}}),dc=({logger:e})=>{const t=(t,n,r)=>{const o={friendlyName:t,offset:n,index:r},i=Sr({friendlyName:kr().nonEmpty(),offset:Ir(),index:Ir()});try{const e=i(o);return{advertisingPodDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index}}}catch(t){return e.warn("An error occurred while creating the Ad Break Object.",t),{}}},n=(t,n,r,o)=>{const i={friendlyName:t,name:n,podPosition:r,length:o},a=Sr({friendlyName:kr().nonEmpty(),name:kr().nonEmpty(),podPosition:Ir(),length:Ir()});try{const e=a(i);return{advertisingDetails:{friendlyName:e.friendlyName,name:e.name,podPosition:e.podPosition,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Advertising Object.",t),{}}},r=(t,n,r,o)=>{const i={friendlyName:t,offset:n,length:r,index:o},a=Sr({friendlyName:kr().nonEmpty(),offset:Ir(),length:Ir(),index:Ir()});try{const e=a(i);return{chapterDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Chapter Object.",t),{}}},o=t=>{const n=/^[a-zA-Z0-9_]{1,64}$/,r=kr().matches(n,"This is not a valid state name.");try{return{name:r(t)}}catch(t){return e.warn("An error occurred while creating the State Object.",t),{}}},i=(t,n,r,o)=>{const i={bitrate:t,droppedFrames:n,fps:r,startupTime:o},a=Sr({bitrate:Ir(),droppedFrames:Ir(),fps:Ir(),startupTime:Ir()});try{const e=a(i);return{bitrate:e.bitrate,droppedFrames:e.droppedFrames,framesPerSecond:e.fps,timeToStart:e.startupTime}}catch(t){return e.warn("An error occurred while creating the QOE Object.",t),{}}};return{createMediaObject:(t,n,r,o,i)=>{const a={friendlyName:t,name:n,length:r,streamType:i,contentType:o},s=Sr({friendlyName:kr().nonEmpty(),name:kr().nonEmpty(),length:Ir().required(),streamType:kr().nonEmpty(),contentType:kr().nonEmpty()});try{const e=s(a);return{sessionDetails:{name:e.name,friendlyName:e.friendlyName,length:e.length,streamType:e.streamType,contentType:e.contentType}}}catch(t){return e.warn("An error occurred while creating the Media Object.",t),{}}},createAdBreakObject:t,createAdObject:n,createChapterObject:r,createStateObject:o,createQoEObject:i}};const uc={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},pc={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"};var fc=({logger:e,trackMediaSession:t,trackMediaEvent:n,uuid:r})=>{let o=null;const i=()=>{o={qoe:null,lastPlayhead:0,playerId:r()}},a=({eventType:e})=>e===rc.BufferComplete||e===rc.SeekComplete?oc.Play:e===rc.StateStart||e===rc.StateEnd?oc.StateUpdate:e===rc.SeekStart?oc.Pause:e,s=({eventType:e,mediaDetails:t={},contextData:n=[]})=>{const r=a({eventType:e});if(e===rc.StateStart)return{eventType:`media.${r}`,mediaCollection:{statesStart:[t]}};if(e===rc.StateEnd)return{eventType:`media.${r}`,mediaCollection:{statesEnd:[t]}};const o={eventType:`media.${r}`,mediaCollection:{...t}},i=[];return Object.keys(n).forEach((e=>{uc[e]?o.mediaCollection.sessionDetails[uc[e]]=n[e]:pc[e]?o.mediaCollection.advertisingDetails[pc[e]]=n[e]:i.push({name:e,value:n[e]})})),qe(i)&&(o.mediaCollection.customMetadata=i),o};return{trackSessionStart:(n,r={})=>{if(ue(n)||mt(n))return e.warn("Invalid media object"),{};null===o&&(e.warn("The Media Session was completed. Restarting a new session."),i());const a=s({eventType:oc.SessionStart,mediaDetails:n,contextData:r});return t({playerId:o.playerId,getPlayerDetails:()=>({playhead:o.lastPlayhead,qoeDataDetails:o.qoe}),xdm:a})},trackPlay:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:oc.Play});return n({playerId:o.playerId,xdm:t})},trackPause:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:oc.Pause});return n({playerId:o.playerId,xdm:t})},trackSessionEnd:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:oc.SessionEnd});return n({playerId:o.playerId,xdm:t})},trackComplete:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:oc.SessionComplete});return n({playerId:o.playerId,xdm:t})},trackError:t=>{if(e.warn(`trackError(${t})`),null===o)return e.warn("The Media Session was completed."),{};const r={name:t,source:"player"},i=s({eventType:oc.Error,mediaDetails:{errorDetails:r}});return n({playerId:o.playerId,xdm:i})},trackEvent:(t,r,i)=>{if(mt(r))return e.warn("Invalid media object."),{};if(null===o)return e.warn("The Media Session was completed."),{};if(!Object.values(rc).includes(t))return e.warn("Invalid event type"),{};const a=s({eventType:t,mediaDetails:r,contextData:i});return n({playerId:o.playerId,xdm:a})},updatePlayhead:t=>{null!==o?zt(t)&&(o.lastPlayhead=parseInt(t,10)):e.warn("The Media Session was completed.")},updateQoEObject:t=>{null!==o?t&&(o.qoe=t):e.warn("The Media Session was completed.")},destroy:()=>{e.warn("Destroy called, destroying the tracker."),o=null}}};const gc=({eventManager:e,sendEdgeNetworkRequest:t,config:n,logger:r,consent:o})=>{const i=Qs(),a=Gs({sendEdgeNetworkRequest:t,config:n,consent:o,eventManager:e,setTimestamp:vi((()=>new Date))}),s=Xs({mediaSessionCacheManager:i,mediaEventManager:a,config:n}),c=Ys({config:n,mediaEventManager:a,mediaSessionCacheManager:i,legacy:!0}),l=Zs({mediaSessionCacheManager:i,config:n,trackMediaEvent:s});return lc({mediaResponseHandler:l,trackMediaSession:c,trackMediaEvent:s,createMediaHelper:dc,createGetInstance:fc,logger:r,config:n})};gc.namespace="Legacy Media Analytics";const mc="web",hc="webapp",yc="://",vc="#",bc=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,wc=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,Ec=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,Ic=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,Cc=(e="/")=>{let t=e.length;for(;t>0&&-1!=="/".indexOf(e.charAt(t-1));)t-=1;return e.substring(0,t)||"/"},Sc=e=>Wt(e)?e.toLowerCase():"",kc=e=>Wt(e)?e.toLowerCase():"",Oc=e=>Wt(e)?Cc(e):"/",Dc=e=>{const t=e.match(bc);return t?{surfaceType:Sc(t[1]),authority:kc(t[2]),path:Oc(t[3]),fragment:t[4]}:null},Tc=e=>`${e.surfaceType}${yc}${e.authority}${e.path||""}${e.fragment||""}`,Pc=e=>{const t=e(),n=t.host.toLowerCase(),r=t.pathname;return mc+yc+n+Cc(r)},Ac=(e,t)=>e.startsWith(vc)?Pc(t)+e:e,Rc=(e,t,n)=>{const r=e=>(n.warn(e),null);if(!Wt(e))return r(`Invalid surface: ${e}`);const o=Ac(e,t),i=Dc(o);return null===i?r(`Invalid surface: ${e}`):[mc,hc].includes(i.surfaceType)?i.authority&&wc.test(i.authority)?i.path&&!Ec.test(i.path)?r(`Invalid path ${i.path} in surface: ${e}`):i.fragment&&!Ic.test(i.fragment)?r(`Invalid fragment ${i.fragment} in surface: ${e}`):i:r(`Invalid authority ${i.authority} in surface: ${e}`):r(`Unsupported surface type ${i.surfaceType} in surface: ${e}`)},Nc=e=>!!e&&0===e.indexOf(mc+yc)&&-1===e.indexOf(vc),jc=(e=[],t,n)=>e.map((e=>Rc(e,t,n))).filter((e=>!ue(e))).map(Tc),xc="https://ns.adobe.com/personalization/default-content-item",_c="https://ns.adobe.com/personalization/dom-action",Mc="https://ns.adobe.com/personalization/html-content-item",Lc="https://ns.adobe.com/personalization/json-content-item",$c="https://ns.adobe.com/personalization/ruleset-item",qc="https://ns.adobe.com/personalization/redirect-item",Uc="https://ns.adobe.com/personalization/message/in-app",Bc="https://ns.adobe.com/personalization/message/content-card",Fc=e=>{e.includes(Io)||e.push(Io)},Vc=(e,t)=>{const n=Pc(t);e.includes(n)||e.push(n)},Hc=e=>e.filter(((t,n)=>e.indexOf(t)===n));var zc=({getPageLocation:e,renderDecisions:t,decisionScopes:n,personalization:r,event:o,isCacheInitialized:i,logger:a})=>{const s=o.getViewName();return{isRenderDecisions:()=>t,isSendDisplayEvent:()=>!!r.sendDisplayEvent,shouldIncludeRenderedPropositions:()=>!!r.includeRenderedPropositions,getViewName:()=>s,hasScopes:()=>n.length>0||qe(r.decisionScopes),hasSurfaces:()=>qe(r.surfaces),hasViewName:()=>Wt(s),createQueryDetails(){const t=[...n];qe(r.decisionScopes)&&t.push(...r.decisionScopes);const o=jc(r.surfaces,e,a);this.shouldRequestDefaultPersonalization()&&(Fc(t),Vc(o,e));const i=[xc,Mc,Lc,qc,$c,Uc,Bc];return t.includes(Io)&&i.push(_c),{schemas:i,decisionScopes:Hc(t),surfaces:Hc(o)}},isCacheInitialized:()=>i,shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return r.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==r.defaultPersonalizationEnabled}}};const Gc="Rendering is disabled for authoring mode.",Jc="decisioning.propositionDisplay",Qc="decisioning.propositionInteract",Wc="decisioning.propositionTrigger",Xc="decisioning.propositionDismiss",Yc="decisioning.propositionSuppressDisplay",Kc=1,Zc={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},el={[Jc]:Zc.DISPLAY,[Qc]:Zc.INTERACT,[Wc]:Zc.TRIGGER,[Xc]:Zc.DISMISS,[Yc]:Zc.SUPPRESS},tl={[Zc.DISPLAY]:Jc,[Zc.INTERACT]:Qc,[Zc.TRIGGER]:Wc,[Zc.DISMISS]:Xc,[Zc.SUPPRESS]:Yc},nl=e=>el[e],rl=e=>tl[e],ol={propositions:[]};var il=({logger:e,options:t})=>{const n=Sr({propositions:vr(Sr({id:kr().required(),scope:kr().required(),scopeDetails:Sr({decisionProvider:kr().required()}).required(),items:vr(Sr({id:kr().required(),schema:kr().required(),data:Sr(yr())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:Sr(yr()),viewName:kr()}).required();try{return n(t)}catch(t){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",t),ol}},al=({getPageLocation:e,logger:t,fetchDataHandler:n,viewChangeHandler:r,onClickHandler:o,isAuthoringModeEnabled:i,mergeQuery:a,viewCache:s,showContainers:c,applyPropositions:l,setTargetMigration:d,mergeDecisionsMeta:u,renderedPropositions:p,onDecisionHandler:f,handleConsentFlicker:g})=>({lifecycle:{onComponentsRegistered(){g()},onDecision:f,onBeforeRequest:({request:e})=>(d(e),Promise.resolve()),onBeforeEvent({event:o,renderDecisions:l,decisionScopes:d=[],personalization:f={},onResponse:g=Xt,onRequestFailure:m=Xt}){if(g((()=>({propositions:[]}))),m((()=>c())),i())return t.warn(Gc),a(o,{enabled:!1}),Promise.resolve();const h=zc({getPageLocation:e,renderDecisions:l,decisionScopes:d,personalization:f,event:o,isCacheInitialized:s.isInitialized(),logger:t}),y=[];if(h.shouldIncludeRenderedPropositions()&&y.push(p.clear()),h.shouldFetchData()){const e=s.createCacheUpdate(h.getViewName());m((()=>e.cancel())),n({cacheUpdate:e,personalizationDetails:h,event:o,onResponse:g})}else h.shouldUseCachedData()&&y.push(r({personalizationDetails:h,event:o,onResponse:g,onRequestFailure:m}));return Promise.all(y).then((e=>{const t=e.flatMap((e=>e));qe(t)&&u(o,t,[Zc.DISPLAY])}))},onClick({event:e,clickedElement:t}){o({event:e,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:e=>il({logger:t,options:e}),run:l}}}),sl=(e="undefined")=>Pe(je,{},{innerHTML:e});const cl=":eq(",ll=/:eq\((\d+)\)/g,dl=e=>-1===e.indexOf(cl),ul=e=>e.split(ll).filter(Wt),pl=/(#|\.)(-?\w+)/g,fl=(e,t,n)=>`${t}${CSS.escape(n)}`,gl=e=>e.replace(pl,fl),ml=e=>{const t=[],n=gl(e.trim()),r=ul(n),{length:o}=r;let i=0;for(;i<o;){const e=r[i],n=r[i+1];n?t.push({sel:e,eq:Number(n)}):t.push({sel:e}),i+=2}return t},hl=e=>{const t=document;if(dl(e))return Qe(e,t);const n=ml(e),{length:r}=n;let o=[],i=t,a=0;for(;a<r;){const{sel:e,eq:t}=n[a],s=Qe(e,i),{length:c}=s;if(0===c)break;if(null!=t&&t>c-1)break;a<r-1&&(null==t?[i]=s:i=s[t]),a===r-1&&(o=null==t?s:[s[t]]),a+=1}return o};var yl=(e,t=document)=>t.getElementById(e),vl=(e,t,n)=>{e.setAttribute(t,n)},bl=(e,t)=>e.getAttribute(t),wl=(e,t)=>{e.removeAttribute(t)},El=(e,t,n,r)=>{let o;o=r?`${t}:${n} !${r};`:`${t}:${n};`,e.style.cssText+=`;${o}`},Il=e=>e.parentNode,Cl=e=>e.nextElementSibling,Sl=(e,t)=>{if(!e)return;const n=Il(e);n&&n.insertBefore(t,Cl(e))},kl=(e,t)=>{if(!e)return;const n=Il(e);n&&n.insertBefore(t,e)},Ol=e=>{const{children:t}=e;return t?Ue(t):[]},Dl=e=>{const{childNodes:t}=e;return t?Ue(t):[]},Tl=e=>e.firstElementChild;let Pl;var Al=(e=document)=>{if(void 0===Pl){const t=e.querySelector("[nonce]");Pl=t&&(t.nonce||t.getAttribute("nonce"))}return Pl};const Rl="src",Nl=e=>e.tagName===Ne,jl=e=>Pe(Ne,{src:e}),xl=e=>{Qe(Ne,e).forEach((e=>{const t=bl(e,Rl);t&&jl(t)}))},_l=(e,t)=>e.tagName===t,Ml=e=>_l(e,xe)&&!bl(e,Rl);var Ll=e=>{const t=Qe(xe,e),{length:n}=t,r=Al();if(r)for(let e=0;e<n;e+=1){const n=t[e];Ml(n)&&(n.nonce=r)}};const $l=(e,t)=>new Promise(((n,r)=>{t.onload=()=>{n(t)},t.onerror=()=>{r(new Error(`Failed to load script: ${e}`))}})),ql=e=>{const t=document.createElement("script");t.src=e,t.async=!0;const n=$l(e,t);return document.head.appendChild(t),n},Ul=(e,t)=>!!e&&e.tagName===t,Bl=e=>Ul(e,_e)&&!bl(e,Rl),Fl=e=>Ul(e,_e)&&bl(e,Rl),Vl=e=>{const t=Qe(_e,e),n=[],{length:r}=t,o=Al(),i={...o&&{nonce:o}};for(let e=0;e<r;e+=1){const r=t[e];if(!Bl(r))continue;const{textContent:o}=r;o&&n.push(Pe(_e,i,{textContent:o}))}return n},Hl=e=>{const t=Qe(_e,e),n=[],{length:r}=t;for(let e=0;e<r;e+=1){const r=t[e];if(!Fl(r))continue;const o=bl(r,Rl);o&&n.push(o)}return n},zl=(e,t)=>{t.forEach((t=>{e.appendChild(t),e.removeChild(t)}))},Gl=e=>Promise.all(e.map(ql));var Jl=(e,t,n)=>{const r=sl(t);Ll(r);const o=Dl(r),i=Vl(r),a=Hl(r);return xl(r),o.forEach((t=>{De(e,t)})),n(e),zl(e,i),Gl(a)};const Ql=e=>{Dl(e).forEach(ut)};var Wl=(e,t,n)=>(Ql(e),Jl(e,t,n)),Xl=(e,t,n)=>{const r=sl(t);Ll(r);const o=Dl(r),i=Vl(r),a=Hl(r),{length:s}=o;let c=s-1;for(xl(r);c>=0;){const t=o[c];n(t);const r=Tl(e);r?kl(r,t):De(e,t),c-=1}return zl(e,i),Gl(a)};const Yl="alloy-prehiding",Kl="{ visibility: hidden }",Zl={},ed=e=>{if(Zl[e])return;const t=Al(),n={...t&&{nonce:t}},r=Pe(xe,n,{textContent:`${e} ${Kl}`});De(document.head,r),Zl[e]=r},td=e=>{const t=Zl[e];t&&(ut(t),delete Zl[e])},nd=e=>t=>{if(!t)return;if(yl(Yl))return;const n=Al(),r={id:Yl,...n&&{nonce:n}},o=Pe(xe,r,{textContent:t});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),De(document.head,o)},rd=e=>()=>{const t=yl(Yl);t&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),ut(t))};var od=(e,t,n)=>{n(e),e.textContent=t},id=(e,t,n)=>{const r=sl(t);Ll(r);const o=Dl(r),i=Vl(r),a=Hl(r);return xl(r),o.forEach((t=>{n(t),kl(e,t)})),zl(e,i),Gl(a)},ad=(e,t,n)=>id(e,t,n).then((()=>{ut(e)})),sd=(e,t,n)=>{const r=sl(t);Ll(r);const o=Dl(r),i=Vl(r),a=Hl(r);xl(r);let s=e;return o.forEach((e=>{n(e),Sl(s,e),s=e})),zl(e,i),Gl(a)},cd=(e,t,n)=>{const{priority:r,...o}=t;Object.keys(o).forEach((t=>{El(e,t,o[t],r)})),n(e)},ld=(e,t,n)=>{Object.keys(t).forEach((n=>{vl(e,n,t[n])})),n(e)},dd=(e,t,n)=>{Nl(e)&&(jl(t),n(e),wl(e,Rl),vl(e,Rl,t))},ud=(e,{from:t,to:n},r)=>{const o=Ol(e),i=o[t],a=o[n];i&&a&&(t<n?Sl(a,i):kl(a,i),r(a),r(i))};const pd=(e,t,n,r)=>{const o=e.map((e=>r(e,t,n)));return Promise.all(o)},fd=e=>(t,n)=>{const{selector:r,prehidingSelector:o,content:i}=t;return ed(o),lt(r,hl).then((t=>pd(t,i,n,e))).then((()=>{td(o)}),(e=>{throw td(o),e}))},gd=e=>`${e}`.endsWith("px")?e:`${e}px`;var md=(e,t,n)=>{const{priority:r,...o}=t;Object.keys(o).forEach((t=>{let n=o[t];"left"!==t&&"top"!==t||(n=gd(n)),El(e,t,n,r)})),n(e)},hd=(e,t,n)=>{n(e)},yd=(e,t,n)=>{const{priority:r,...o}=t;Object.keys(o).forEach((t=>{let n=o[t];"width"!==t&&"height"!==t||(n=gd(n)),El(e,t,n,r)})),n(e)};const vd="setHtml",bd="customCode",wd="setText",Ed="setAttribute",Id="setImageSource",Cd="setStyle",Sd="move",kd="resize",Od="rearrange",Dd="remove",Td="insertAfter",Pd="insertBefore",Ad="replaceHtml",Rd="prependHtml",Nd="appendHtml",jd="click",xd="collectInteractions";var _d=()=>({[vd]:fd(Wl),[bd]:fd(Xl),[wd]:fd(od),[Ed]:fd(ld),[Id]:fd(dd),[Cd]:fd(cd),[Sd]:fd(md),[kd]:fd(yd),[Od]:fd(ud),[Dd]:fd(ut),[Td]:fd(sd),[Pd]:fd(id),[Ad]:fd(ad),[Rd]:fd(Xl),[Nd]:fd(Jl),[xd]:fd(hd)}),Md=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:n=[],propositionAction:r,documentMayUnload:o=!1,eventType:i=Jc,propositionEventTypes:a=[nl(i)],viewName:s})=>{const c=e.createEvent(),l={eventType:i};return s&&(l.web={webPageDetails:{viewName:s}}),qe(n)&&t(c,n,a,r),c.mergeXdm(l),o&&c.documentMayUnload(),e.sendEvent(c)};const Ld="personalization:decisions";var $d=({logger:e,prehidingStyle:t,showContainers:n,hideContainers:r,mergeQuery:o,processPropositions:i,createProposition:a,notificationHandler:s,consent:c})=>({cacheUpdate:l,personalizationDetails:d,event:u,onResponse:p})=>{const{state:f,wasSet:g}=c.current();"out"===f&&g||(d.isRenderDecisions()?r(t):n()),o(u,d.createQueryDetails());const m=s(d.isRenderDecisions(),d.isSendDisplayEvent(),d.getViewName());p((({response:t})=>{const r=t.getPayloadsByType(Ld);qe(r)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:d.createQueryDetails()}})
;const o=r.map((e=>a(e))),{page:s=[],view:c=[],proposition:u=[]}=St(o,(e=>e.getScopeType())),p=l.update(c);let f,g,h;return d.isRenderDecisions()?(({render:f,returnedPropositions:g,returnedDecisions:h}=i([...s,...p],u)),qe(s)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:Io,propositions:s.map((e=>e.toJSON()))}}),qe(p)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${d.getViewName()}.`,logLevel:"info",detail:{scope:d.getViewName(),propositions:p.map((e=>e.toJSON()))}}),f().then(m),n()):({returnedPropositions:g,returnedDecisions:h}=i([],[...s,...p,...u])),{propositions:g,decisions:h}}))},qd=(e,t)=>{if(dl(e))return dt(e,t);const n=hl(e);let r=!1;for(let e=0;e<n.length;e+=1)if(n[e]===t){r=!0;break}return r};const Ud="view",Bd="page",Fd="proposition",Vd=e=>e.map((e=>{const{trackingLabel:t,scopeType:n,...r}=e;return r})),Hd=e=>e.filter(((t,n)=>{const r=JSON.stringify(t);return n===e.findIndex((e=>JSON.stringify(e)===r))})),zd=(e,t,n)=>{const{documentElement:r}=document;let o=e,i=0;for(;o&&o!==r;){if(qd(t,o)){const e=n(t),r={metas:e},o=e.find((e=>e.trackingLabel));o&&(r.label=o.trackingLabel,r.weight=i);const a=e.find((e=>e.scopeType===Ud));return a&&(r.viewName=a.scope,r.weight=i),r}o=o.parentNode,i+=1}return{metas:null}};var Gd=(e,t,n)=>{const r=[];let o,i="",a=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(let c=0;c<t.length;c+=1){const{metas:l,label:d,weight:u,viewName:p}=zd(e,t[c],n);l&&(d&&u<=a&&(i=d,a=u),p&&u<=s&&(o=p,s=u),r.push(...Vd(l)))}return{decisionsMeta:Hd(r),propositionActionLabel:i,propositionActionToken:void 0,viewName:o}},Jd=(e=document)=>-1!==e.location.href.indexOf("adobe_authoring_enabled");const Qd=(e,t,n,r)=>{if(0===t.length)return;const o={};n.forEach((e=>{o[e]=Kc}));const i={_experience:{decisioning:{propositions:t,propositionEventType:o}}};r&&(i._experience.decisioning.propositionAction=r),e.mergeXdm(i)},Wd=(e,t)=>{e.mergeQuery({personalization:{...t}})},Xd=(e,t)=>{if(!t&&!e)return;const n={};return e&&(n.label=e),t&&(n.tokens=[t]),n};var Yd=({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:n,getInteractionMetas:r,getClickMetas:o,getClickSelectors:i,autoCollectPropositionInteractions:a})=>({event:s,clickedElement:c})=>{const l=[];let d,u,p;if([t(c,r,a),n(c,i(),o)].forEach((({decisionsMeta:e,propositionActionLabel:t,propositionActionToken:n,viewName:r})=>{Array.prototype.push.apply(l,e),!d&&t&&(d=t),!u&&n&&(u=n),!p&&r&&(p=r)})),qe(l)){const t={eventType:Qc};p&&(t.web={webPageDetails:{viewName:p}}),s.mergeXdm(t),e(s,l,[Zc.INTERACT],Xd(d,u))}},Kd=({createProposition:e})=>{let t=!1,n=Promise.resolve({});const r=(t,n)=>{const r=t[n.toLowerCase()];return r&&r.length>0?r:[e({scope:n,scopeDetails:{characteristics:{scopeType:Ud}},items:[{schema:xc}]},!1)]};return{createCacheUpdate:e=>{const o=Ce();return t=!0,n=n.then((e=>o.promise.then((t=>({...e,...t}))).catch((()=>e)))),{update(t){const n=t.filter((e=>e.getScope())),i=St(n,(e=>e.getScope().toLowerCase()));return o.resolve(i),e?r(i,e):[]},cancel(){o.reject()}}},getView:e=>n.then((t=>r(t,e))),isInitialized:()=>t}},Zd=({processPropositions:e,viewCache:t,logger:n})=>({personalizationDetails:r,onResponse:o})=>{let i,a;const s=r.getViewName();return o((()=>({propositions:i,decisions:a}))),t.getView(s).then((t=>{let o;return r.isRenderDecisions()?(({render:o,returnedPropositions:i,returnedDecisions:a}=e(t)),n.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:t.map((e=>e.toJSON()))}}),o()):(({returnedPropositions:i,returnedDecisions:a}=e([],t)),[])}))};const eu=e=>Object.keys(e).map((t=>({id:t,...e[t]})));var tu=()=>{const e={};return{storeClickMeta:({selector:t,meta:{id:n,scope:r,scopeDetails:o,trackingLabel:i,scopeType:a}})=>{e[t]||(e[t]={}),e[t][n]={scope:r,scopeDetails:o,trackingLabel:i,scopeType:a}},getClickSelectors:()=>Object.keys(e),getClickMetas:t=>e[t]?eu(e[t]):{}}},nu=()=>{const e={},t={};return{storeInteractionMeta:(n,r,o,i,a)=>{a=parseInt(a,10),e[a]||(e[a]={},t[a]={}),t[a][n]||(t[a][n]=new Set),t[a][n].add(r),e[a][n]={...i,scopeType:o}},getInteractionMetas:n=>Array.isArray(n)&&0!==n.length?Object.values(n.map((e=>parseInt(e,10))).reduce(((n,r)=>(Object.keys(e[r]||{}).forEach((o=>{n[o]||(n[o]={proposition:e[r][o],items:new Set}),n[o].items=new Set([...n[o].items,...t[r][o]])})),n)),{})).map((({proposition:e,items:t})=>({...e,items:Array.from(t).map((e=>({id:e})))}))):[]}};const ru=(e,t)=>e===Lc&&t===xd,ou={[_c]:()=>!0,[Mc]:()=>!0,[Lc]:ru,[Uc]:()=>!0,[xc]:()=>!0},iu=(e,t)=>"function"==typeof ou[e]&&ou[e](e,t);var au=({processPropositions:e,createProposition:t,renderedPropositions:n,viewCache:r})=>{const o=({items:e,metadataForScope:t={}})=>{const{actionType:n,selector:r}=t;return e.filter((e=>iu(e.schema,n))).map((e=>{const{schema:o}=e;return o===Mc||ru(o,n)?mt(t)?void 0:{...e,schema:ru(o,n)?_c:o,data:{...e.data,selector:r,type:n}}:{...e}})).filter((e=>e))},i=e=>!(e.scope===Io&&e.renderAttempted),a=({propositions:e,metadata:t})=>e.filter(i).map((e=>{if(qe(e.items)){const{id:n,scope:r,scopeDetails:i}=e;return{id:n,scope:r,scopeDetails:i,items:o({items:e.items,metadataForScope:t[e.scope]})}}return e})).filter((e=>qe(e.items)));return({propositions:o=[],metadata:i={},viewName:s})=>{const c=Ce();n.concat(c.promise);const l=a({propositions:o,metadata:i}).map((e=>t(e)));return Promise.resolve().then((()=>s?r.getView(s):[])).then((t=>{const{render:n,returnedPropositions:r}=e([...l,...t]);return n().then(c.resolve),{propositions:r}}))}},su=({window:e})=>()=>e.location,cu=({targetMigrationEnabled:e})=>e?e=>{e.getPayload().mergeMeta({target:{migration:!0}})}:Xt;const lu="BODY > *:eq(0)";var du=e=>{const{selector:t,type:n}=e;return n!==bd||t!==lu?e:{...e,selector:"BODY"}};const uu="SCRIPT,LINK,STYLE",pu=e=>{const t=sl(e);return Qe(uu,t).map((e=>e.outerHTML)).join("")};var fu=e=>{const t={...e},{content:n,selector:r}=t;if(Ks(n))return t;if(null==r)return t;const o=hl(r);return Ul(o[0],Me)?(t.type=Nd,t.content=pu(n),t):t},gu=e=>t=>t?e.reduce(((e,t)=>({...e,...t(e)})),t):t,mu=({preprocess:e,isPageWideSurface:t})=>{const n=(t,n)=>{const{id:r,schema:o,data:i,characteristics:{trackingLabel:a}={}}=t,s=i?i.type:void 0,c=e(i);return{getId:()=>r,getSchema:()=>o,getSchemaType:()=>s,getData:()=>c,getProposition:()=>n,getTrackingLabel:()=>a,getOriginalItem:()=>t,toString:()=>JSON.stringify(t),toJSON:()=>t}};return(e,r=!0,o=!1)=>{const{id:i,scope:a,scopeDetails:s,items:c=[]}=e,{characteristics:{scopeType:l}={}}=s||{};return{getScope:()=>a,getScopeType:()=>a===Io||t(a)?Bd:l===Ud?Ud:Fd,getItems(){return c.map((e=>n(e,this)))},getNotification:()=>({id:i,scope:a,scopeDetails:s}),getId:()=>i,toJSON:()=>e,shouldSuppressDisplay:()=>o,addToReturnValues(t,n,o,i){r&&(t.push({...e,items:o.map((e=>e.getOriginalItem())),renderAttempted:i}),i||n.push({...e,items:o.map((e=>e.getOriginalItem()))}))}}}},hu=()=>{let e=Promise.resolve([]);return{concat(t){e=e.then((e=>t.then((t=>e.concat(t))).catch((()=>e))))},clear(){const t=e;return e=Promise.resolve([]),t}}},yu=()=>({render:Xt,setRenderAttempted:!0,includeInNotification:!0});const vu="always",bu="never",wu="decoratedElementsOnly",Eu=[vu,bu,wu],Iu="data-aep-interact-id",Cu="data-aep-click-label",Su="data-aep-click-token";let ku=0;const Ou=(e,t)=>t?parseInt(t,10):++ku,Du=(e,t)=>!!e&&!!e[t]&&[vu,wu].includes(e[t]),Tu=(e,t,n,r,o,i,a,s)=>{const{scopeDetails:c={}}=a,{decisionProvider:l}=c;return Du(e,l)||t===jd?e=>{if(!e.tagName)return;const t=Ou(n,bl(e,Iu));s(n,r,i,a,t),vl(e,Iu,t),o&&!bl(e,Cu)&&vl(e,Cu,o)}:Xt};var Pu=({modules:e,logger:t,storeInteractionMeta:n,storeClickMeta:r,autoCollectPropositionInteractions:o})=>i=>{const{type:a,selector:s}=i.getData()||{};if(!a)return t.warn("Invalid DOM action data: missing type.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(a===jd)return s?(r({selector:s,meta:{...i.getProposition().getNotification(),trackingLabel:i.getTrackingLabel(),scopeType:i.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[a])return t.warn("Invalid DOM action data: unknown type.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};const c=Tu(o,a,i.getProposition().getId(),i.getId(),i.getTrackingLabel(),i.getProposition().getScopeType(),i.getProposition().getNotification(),n);return{render:()=>e[a](i.getData(),c),setRenderAttempted:!0,includeInNotification:!0}},Au=({modules:e,logger:t,storeInteractionMeta:n,autoCollectPropositionInteractions:r})=>o=>{const{type:i,selector:a}=o.getData()||{};if(!a||!i)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[i])return t.warn("Invalid HTML content data",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};const s=Tu(r,i,o.getProposition().getId(),o.getId(),o.getTrackingLabel(),o.getProposition().getScopeType(),o.getProposition().getNotification(),n);return{render:()=>e[i](o.getData(),s),setRenderAttempted:!0,includeInNotification:!0}};const Ru="BODY";var Nu=({logger:e,executeRedirect:t,collect:n})=>r=>{const{content:o}=r.getData()||{};return o?{render:()=>(ed(Ru),n({decisionsMeta:[r.getProposition().getNotification()],documentMayUnload:!0}).then((()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:r.getProposition().getNotification(),redirect:o},message:`Redirect action ${r.toString()} executed.`,logLevel:"info"}),t(o)))).catch((e=>{throw td(Ru),e}))),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",r.getData()),{})},ju=({schemaProcessors:e,logger:t})=>{const n=(e,n)=>()=>Promise.resolve().then(e).then((()=>(t.enabled&&t.info(`Action ${n.toString()} executed.`),n.toJSON()))).catch((e=>{const{message:r,stack:o}=e,i=`Failed to execute action ${n.toString()}. ${r} ${o}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:n.getProposition().getNotification(),item:n.toJSON()},error:e,message:i,logLevel:"warn"})})),r=async(e,t)=>{const n=(await Promise.allSettled(e.map((e=>e())))).filter((e=>"fulfilled"===e.status)).map((e=>e.value));if(t&&qe(n))return{...t,items:n}},o=t=>{const n=e[t.getSchema()];return n?n(t):{}},i=({renderers:e,returnedPropositions:t,returnedDecisions:i,items:a,proposition:s})=>{let c,l,d,u,p=[...e],f=[...t],g=[...i],m=[],h=[],y=[],v=!1,b=!1,w=0;for(;a.length>w;){if(u=a[w],({render:c,setRenderAttempted:l,includeInNotification:d,onlyRenderThis:b}=o(u)),b){f=[],g=[],l?(m=[u],h=[]):(m=[],h=[u]),p=[],y=[c],v=d;break}c&&y.push(n(c,u)),d&&(v=!0),l?m.push(u):h.push(u),w+=1}if(y.length>0){const e=v?s.getNotification():void 0;p.push((()=>r(y,e)))}else v&&p.push((()=>Promise.resolve(s.getNotification())));return m.length>0&&s.addToReturnValues(f,g,m,!0),h.length>0&&s.addToReturnValues(f,g,h,!1),{renderers:p,returnedPropositions:f,returnedDecisions:g,onlyRenderThis:b}};return(e,n=[])=>{let r,o,a,s=[],c=[],l=[],d=0;for(;e.length>d&&(o=e[d],a=o.getItems(),({renderers:s,returnedPropositions:c,returnedDecisions:l,onlyRenderThis:r}=i({renderers:s,returnedPropositions:c,returnedDecisions:l,items:a,proposition:o})),!r);)d+=1;return r&&e.forEach(((e,t)=>{t!==d&&e.addToReturnValues(c,l,e.getItems(),!1)})),n.forEach((e=>{e.addToReturnValues(c,l,e.getItems(),!1)})),{returnedPropositions:c,returnedDecisions:l,render:()=>Promise.all(s.map((e=>e()))).then((e=>{const n=e.filter((e=>e)),r=n.map((e=>{const{id:t,scope:n,scopeDetails:r}=e;return{id:t,scope:n,scopeDetails:r}}));if(qe(n)){const e=St(n,(e=>e.scope));t.logOnContentRendering({status:"rendering-succeeded",detail:{...e},message:`Scopes: ${JSON.stringify(e)} successfully executed.`,logLevel:"info"})}return r}))}}};const xu=()=>{let e=0;return t=>{const{items:n=[]}=t;return!!n.some((e=>e.schema===Uc))&&(e+=1,e>1)}};var _u=({processPropositions:e,createProposition:t,notificationHandler:n})=>({renderDecisions:r,propositions:o,event:i,personalization:a={}})=>{if(!r)return Promise.resolve();const{sendDisplayEvent:s=!0}=a,c=i?i.getViewName():void 0,l=xu(),d=o.map((e=>t(e,!0,l(e)))),{render:u,returnedPropositions:p}=e(d),f=n(r,s,c),g=d.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return u().then((e=>{const t=e.filter((e=>!g[e.id].shouldSuppressDisplay())),n=e.filter((e=>g[e.id].shouldSuppressDisplay()));f(t,n)})),Promise.resolve({propositions:p})};const Mu="text/html",Lu="application/json",$u="defaultContent",qu=["content","contentType"],Uu=["mobileParameters","webParameters","html"],Bu=(e,t)=>{for(let n=0;n<qu.length;n+=1){const r=qu[n];if(!Object.prototype.hasOwnProperty.call(e,r))return t.warn(`Invalid in-app message data: missing property '${r}'.`,e),!1}const{content:n,contentType:r}=e;if(r===Lu)for(let r=0;r<Uu.length;r+=1){const o=Uu[r];if(!Object.prototype.hasOwnProperty.call(n,o))return t.warn(`Invalid in-app message data.content: missing property '${o}'.`,e),!1}return!0};var Fu=({modules:e,logger:t})=>n=>{const r=n.getData(),o=n.getProposition(),i={...o.getNotification()},a=o.shouldSuppressDisplay();if(!r)return t.warn("Invalid in-app message data: undefined.",r),{};const{type:s=$u}=r;return e[s]?Bu(r,t)?i?{render:()=>a?null:e[s]({...r,meta:i}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",i),{}):{}:(t.warn("Invalid in-app message data: unknown type.",r),{})};const Vu=e=>{const t=Qe(`#${e}`,document);t&&t.length>0&&ut(t[0])},Hu=e=>{const t={};if(!e||"a"!==e.tagName.toLowerCase())return t;const{href:n}=e;if(!n||!n.startsWith("adbinapp://"))return t;const r=n.split("?"),o=r[0].split("://")[1],i=e.innerText,a=e.getAttribute("data-uuid")||"";let s,c;if(qe(r)){const e=de.default.parse(r[1]);s=e.interaction||"",c=na(e.link||"")}return{action:o,interaction:s,link:c,label:i,uuid:a}};var zu=e=>(t,n=!1)=>(n?e.location.href=t:e.location.replace(t),new Promise((()=>{})));const Gu="alloy-messaging-container",Ju="alloy-overlay-container",Qu="alloy-content-iframe",Wu=()=>[Gu,Ju].forEach(Vu),Xu=(e,t=zu(window))=>n=>{n.preventDefault(),n.stopImmediatePropagation();const{target:r}=n,o="a"===r.tagName.toLowerCase()?r:r.closest("a");if(!o)return;const{action:i,interaction:a,link:s,label:c,uuid:l}=Hu(o);e(i,{label:c,id:a,uuid:l,link:s}),"dismiss"===i&&Wu(),Wt(s)&&s.length>0&&t(s,!0)},Yu=(e,t)=>{const n=(new DOMParser).parseFromString(e,Mu),r=n.querySelector("script");r&&r.setAttribute("nonce",Al());const o=Pe("iframe",{src:URL.createObjectURL(new Blob([n.documentElement.outerHTML],{type:"text/html"})),id:Qu});return o.addEventListener("load",(()=>{const{addEventListener:e}=o.contentDocument||o.contentWindow.document;e("click",t)})),o},Ku=(e,t,n,r)=>{[{id:Ju,element:r},{id:Gu,element:n},{id:Qu,element:e}].forEach((({id:e,element:n})=>{const{style:r={},params:o={}}=t[e];n.style={...n.style,...r};const{parentElement:i="body",insertionMethod:a="appendChild",enabled:s=!0}=o,c=document.querySelector(i);s&&c&&"function"==typeof c[a]&&c[a](n)}))},Zu=e=>{const{verticalAlign:t,width:n,horizontalAlign:r,backdropColor:o,height:i,cornerRadius:a,horizontalInset:s,verticalInset:c,uiTakeover:l=!1}=e,d={width:n?`${n}%`:"100%",backgroundColor:o||"rgba(0, 0, 0, 0.5)",borderRadius:a?`${a}px`:"0px",border:"none",position:l?"fixed":"relative",overflow:"hidden"};return"left"===r?d.left=s?`${s}%`:"0":"right"===r?d.right=s?`${s}%`:"0":"center"===r&&(d.left="50%",d.transform="translateX(-50%)"),"top"===t?d.top=c?`${c}%`:"0":"bottom"===t?(d.position="fixed",d.bottom=c?`${c}%`:"0"):"center"===t&&(d.top="50%",d.transform=("center"===r?`${d.transform} `:"")+"translateY(-50%)",d.display="flex",d.alignItems="center",d.justifyContent="center"),d.height=i?`${i}vh`:"100%",d},ep=e=>{const{backdropOpacity:t,backdropColor:n}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:n||"#FFFFFF"}},tp=["enabled","parentElement","insertionMethod"],np=e=>{if(!e)return!1;const t=Object.keys(e);if(!t.includes(Gu))return!1;if(!t.includes(Ju))return!1;const n=Object.values(e);for(let e=0;e<n.length;e+=1){if(!Sr(n[e],"style"))return!1;if(!Sr(n[e],"params"))return!1;for(let t=0;t<tp.length;t+=1)if(!Sr(n[e].params,tp[t]))return!1}return!0},rp=e=>{if(!e)return;const{uiTakeover:t=!1}=e;return{[Qu]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[Gu]:{style:Zu(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[Ju]:{style:ep(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}}}},op=(e={},t)=>{Wu();const{content:n,contentType:r,mobileParameters:o}=e;let{webParameters:i}=e;if(r!==Mu)return;const a=Pe("div",{id:Gu}),s=Yu(n,Xu(t)),c=Pe("div",{id:Ju});np(i)||(i=rp(o)),i&&Ku(s,i,a,c)};var ip=(e,t)=>new Promise((n=>{const{meta:r}=e;op(e,((e,n)=>{const o={};o[Zc.INTERACT]=Kc,-1!==Object.values(Zc).indexOf(e)&&(o[e]=Kc),t({decisionsMeta:[r],propositionAction:n,eventType:Qc,propositionEventTypes:Object.keys(o)})})),n({meta:r})})),ap=e=>({defaultContent:t=>ip(t,e)}),sp=(e,t)=>(n,r,o)=>{if(!n)return()=>{};if(!r){const e=Ce();return t.concat(e.promise),e.resolve}return(t=[],n=[])=>{qe(t)&&e({decisionsMeta:t,viewName:o}),qe(n)&&e({decisionsMeta:n,eventType:Yc,propositionAction:{reason:"Conflict"},viewName:o})}},cp=({showContainers:e,consent:t})=>()=>{const{state:n,wasSet:r}=t.current();n===Ur&&r?e():t.awaitConsent().catch(e)};const lp=e=>{const{documentElement:t}=document;let n=e;const r=new Set;let o,i;for(;n&&n!==t;){const e=bl(n,Iu);e&&r.add(e),o=o||bl(n,Cu),i=i||bl(n,Su),n=n.parentNode}return{interactIds:[...r],clickLabel:o,clickToken:i}},dp=e=>{const t=e.find((e=>e.scopeType===Ud));return t?t.scope:void 0},up=(e,t,n)=>r=>{const{scopeDetails:o={}}=r,{decisionProvider:i}=o;return e[i]===vu||e[i]===wu&&(t||n)};var pp=(e,t,n)=>{const{interactIds:r,clickLabel:o="",clickToken:i}=lp(e),a=up(n,o,i);if(0===r.length)return{};const s=t(r).filter(a);return{decisionsMeta:Vd(s),propositionActionLabel:o,propositionActionToken:i,viewName:dp(s)}};const fp="AJO",gp="TGT",mp=({config:e,logger:t,eventManager:n,consent:r})=>{const{targetMigrationEnabled:o,prehidingStyle:i,autoCollectPropositionInteractions:a}=e,s=Md({eventManager:n,mergeDecisionsMeta:Qd}),c=rd(t),l=nd(t),{storeInteractionMeta:d,getInteractionMetas:u}=nu(),{storeClickMeta:p,getClickSelectors:f,getClickMetas:g}=tu(),m=su({window:window}),h=_d(),y=gu([fu,du]),v=mu({preprocess:y,isPageWideSurface:Nc}),b=Kd({createProposition:v}),w=zu(window),E={[xc]:yu,[_c]:Pu({modules:h,logger:t,storeInteractionMeta:d,storeClickMeta:p,autoCollectPropositionInteractions:a}),[Mc]:Au({modules:h,logger:t,storeInteractionMeta:d,autoCollectPropositionInteractions:a}),[qc]:Nu({logger:t,executeRedirect:w,collect:s}),[Uc]:Fu({modules:ap(s),logger:t})},I=ju({schemaProcessors:E,logger:t}),C=hu(),S=sp(s,C),k=$d({prehidingStyle:i,showContainers:c,hideContainers:l,mergeQuery:Wd,processPropositions:I,createProposition:v,notificationHandler:S,consent:r,logger:t}),O=Yd({mergeDecisionsMeta:Qd,collectInteractions:pp,collectClicks:Gd,getInteractionMetas:u,getClickMetas:g,getClickSelectors:f,autoCollectPropositionInteractions:a}),D=Zd({processPropositions:I,viewCache:b,logger:t}),T=au({processPropositions:I,createProposition:v,renderedPropositions:C,viewCache:b}),P=cu({targetMigrationEnabled:o}),A=_u({processPropositions:I,createProposition:v,notificationHandler:S}),R=cp({showContainers:c,consent:r});return al({getPageLocation:m,logger:t,fetchDataHandler:k,viewChangeHandler:D,onClickHandler:O,isAuthoringModeEnabled:Jd,mergeQuery:Wd,viewCache:b,showContainers:c,applyPropositions:T,setTargetMigration:P,mergeDecisionsMeta:Qd,renderedPropositions:C,onDecisionHandler:A,handleConsentFlicker:R})};mp.namespace="Personalization";const hp=Eu.map((e=>Er(e)));mp.configValidators=Sr({prehidingStyle:kr().nonEmpty(),targetMigrationEnabled:br().default(!1),autoCollectPropositionInteractions:Sr({[fp]:hr(hp).default(vu),[gp]:hr(hp).default(bu)}).default({[fp]:vu,[gp]:bu}).noUnknownFields()});const yp="personalization:decisions",vp=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,bp=(e,t={},n=[])=>(Object.keys(e).forEach((r=>{vp(e[r])||Array.isArray(e[r])?bp(e[r],t,[...n,r]):t[[...n,r].join(".")]=e[r]})),t);var wp=e=>vp(e)?bp(e):e,Ep=({renderDecisions:e,decisionProvider:t,applyResponse:n,event:r,personalization:o,decisionContext:i})=>{const a={...wp(r.getContent()),...i};return({response:i})=>{if(t.addPayloads(i.getPayloadsByType(yp)),!r.hasQuery())return{propositions:[]};const s=t.evaluate(a);return n({renderDecisions:e,propositions:s,event:r,personalization:o})}};const Ip={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},Cp={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},Sp={AND:"and",OR:"or"},kp={ORDERED:"ordered"},Op={[Cp.EQUALS]:d(),[Cp.NOT_EQUALS]:u(),[Cp.EXISTS]:p(),[Cp.NOT_EXISTS]:f(),[Cp.GREATER_THAN]:m(),[Cp.GREATER_THAN_OR_EQUAL_TO]:h(),[Cp.LESS_THAN]:y(),[Cp.LESS_THAN_OR_EQUAL_TO]:v(),[Cp.CONTAINS]:b(),[Cp.NOT_CONTAINS]:w(),[Cp.STARTS_WITH]:E(),[Cp.ENDS_WITH]:I()},Dp=["iam.eventType","eventType","type"],Tp=["iam.id","id"],Pp="TGT",Ap="DEFAULT",Rp="ECID",Np="<key>",jp="<identity>",xp=ee(ne,(e=>e.join("-"))),_p=100,Mp=ee(re),Lp=(e,t)=>n=>{const r=e.getItem(t);if(!r)return n;try{return JSON.parse(r)}catch{return n}},$p=(e,t,n=(e=>e))=>r=>{e.setItem(t,JSON.stringify(n(r)))},qp=e=>{const t=new Date;return t.setDate(t.getDate()-e),t},Up=e=>{const{scopeDetails:t={}}=e,{activity:n={}}=t,{id:r}=n;return r},Bp=()=>{const e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,n)=>{e[t]=n}}},Fp=e=>{e.clear()},Vp=(e={})=>{const{_experience:t}=e;return!(!t||"object"!=typeof t)},Hp=e=>{const{scopeDetails:t={}}=e,{decisionProvider:n}=t;return n},zp=(e=[])=>{const t=[];return Array.isArray(e)?(e.forEach((e=>{Array.isArray(e)?t.push(...zp(e)):t.push(e)})),t):e};var Gp=(e,t,n)=>{const{html:r,mobileParameters:o}=n;return{schema:Uc,data:{mobileParameters:o,webParameters:{},content:r,contentType:Mu},id:e}},Jp=(e,t,n)=>{const{schema:r,data:o,id:i}=n;return{schema:r,data:o,id:i||e}};const Qp="cjmiam",Wp="schema",Xp={[Qp]:Gp,[Wp]:Jp};var Yp=()=>e=>{const{id:t,type:n,detail:r}=e;return"function"==typeof Xp[n]?Xp[n](t,n,r):r};const Kp=e=>{const{schema:t,data:n}=e;if(t===$c)return!0;if(t!==Lc)return!1;try{const e="string"==typeof n.content?JSON.parse(n.content):n.content;return e&&Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"rules")}catch{return!1}};var Zp=(e,t,n)=>{const r=Yp(),o=Up(e),i=[],a=e=>{const{data:t={},schema:n}=e,r=n===$c?t:t.content;r&&i.push(le("string"==typeof r?JSON.parse(r):r))},s=a=>{const s=t.getEvent(Jc,o),c=s?s.firstTimestamp:void 0,l=zp(i.map((e=>e.execute(a)))).map(r).map((e=>{const{firstTimestamp:t}=n.recordQualified(o)||{};return{...e,data:{...e.data,qualifiedDate:t,displayedDate:c}}}));return{...e,items:l}};return Array.isArray(e.items)&&e.items.filter(Kp).forEach(a),{rank:e?.scopeDetails?.rank||1/0,evaluate:s,isEvaluable:i.length>0}},ef=({eventRegistry:e})=>({recordQualified:t=>{if(t)return e.addEvent({},Zc.TRIGGER,t)}}),tf=({eventRegistry:e})=>{const t={},n=ef({eventRegistry:e}),r=r=>{const o=Up(r);if(!o)return;const i=Zp(r,e,n);i.isEvaluable&&(t[o]=i)};return{addPayload:r,addPayloads:e=>{e.forEach(r)},evaluate:(e={})=>Object.values(t).sort((({rank:e},{rank:t})=>e-t)).map((t=>t.evaluate(e))).filter((e=>e.items.length>0))}},nf=e=>({renderDecisions:t=!1,propositions:n=[],event:r,personalization:o})=>(e&&e.onDecision({renderDecisions:t,propositions:n,event:r,personalization:o}),{propositions:n});const rf="events",of=1e3,af=30,sf=e=>`iam.${e}`,cf=(e=of,t=af)=>n=>{const r={};return Object.keys(n).forEach((o=>{r[o]={},Object.values(n[o]).filter((e=>new Date(e.firstTimestamp)>=qp(t))).sort(((e,t)=>e.firstTimestamp-t.firstTimestamp)).slice(-1*e).forEach((e=>{r[o][e.event[sf("id")]]=e}))})),r};var lf=({storage:e})=>{let t,n,r,o=e;const i=e=>{o=e,t=Lp(o,rf),n=$p(o,rf,cf(of,af)),r=t({})};i(e);const a=(e,t,o,i)=>{if(!t||!o)return;r[t]||(r[t]={});const a=r[t][o],s=a?a.count:0,c=(new Date).getTime(),l=a?a.firstTimestamp||a.timestamp:c;return r[t][o]={event:{...e,[sf("id")]:o,[sf("eventType")]:t,[sf("action")]:i},firstTimestamp:l,timestamp:c,count:s+1},n(r),r[t][o]};return{addExperienceEdgeEvent:e=>{const{xdm:t={}}=e.getContent(),{_experience:n}=t;if(!Vp(t))return;const{decisioning:r={}}=n,{propositionEventType:o={},propositionAction:i={},propositions:s=[]}=r,c=Object.keys(o);if(0===c.length)return;const l=e=>o[e]===Kc,{id:d}=i;c.filter(l).forEach((e=>{s.forEach((t=>{Hp(t)===fp&&a({},e,Up(t),d)}))}))},addEvent:a,getEvent:(e,t)=>{if(r[e])return r[e][t]},toJSON:()=>r,setStorage:i}},df=({eventRegistry:e,window:t,getBrowser:n})=>{const r=(new Date).getTime(),o=()=>({title:t.title,url:t.url,...Zt(t.url)}),i=()=>({url:t.referrer,...Zt(t.referrer)}),a=()=>{const e=new Date,t=e.getTime();return{pageLoadTimestamp:r,currentTimestamp:t,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:t-r,"~timestampu":t/1e3,"~timestampz":e.toISOString()}},s=()=>({height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}),c={browser:{name:n()},page:o(),referringPage:i()},l=()=>({...c,...a(),window:s(),"~sdkver":wi});return{getContext:(t={})=>{const n={...l(),...t};return{...wp(n),events:e.toJSON()}}}};const uf=(e,...t)=>t,pf=()=>!0,ff=()=>{let e=uf,t=pf,n=0;const r={},o=e=>()=>{delete r[e]},i=(e,t)=>"function"!=typeof e?()=>{}:(n+=1,r[n]={callback:e,params:t},{id:n,unsubscribe:o(n)}),a=(...n)=>{Object.values(r).forEach((({callback:r,params:o})=>{const i=e(o,...n);t(o,...i)&&r(...i)}))},s=(n,...o)=>{if(!n||!r[n])return;const{callback:i,params:a}=r[n],s=e(a,...o);t(a,...s)&&i(...s)};return{add:i,emit:a,emitOne:s,hasSubscriptions:()=>Object.keys(r).length>0,setEmissionPreprocessor:t=>{"function"==typeof t&&(e=t)},setEmissionCondition:e=>{"function"==typeof e&&(t=e)}}},gf=({options:e})=>Sr({surfaces:vr(kr()).uniqueItems(),schemas:vr(kr()).uniqueItems(),callback:wr().required()}).noUnknownFields()(e),mf=e=>{const{id:t,scope:n,scopeDetails:r}=e;return{id:t,scope:n,scopeDetails:r}};var hf=({collect:e})=>{let t=()=>{};const n=new Set,r=e=>[Zc.INTERACT,Zc.DISMISS].includes(e),o=(e,t,o)=>{const i=[e,t].join("-"),a=!o.has(i)&&(r(e)||!n.has(i));return o.add(i),n.add(i),a},i=(t,n=[])=>{if(!(n instanceof Array))return Promise.resolve();if(!Object.values(Zc).includes(t))return Promise.resolve();const r=[],i=new Set;return n.forEach((e=>{const n=mf(e);o(t,n.id,i)&&r.push(n)})),r.length>0?e({decisionsMeta:r,eventType:rl(t),documentMayUnload:!0}):Promise.resolve()},a=ff(),s=(e,t)=>{const{surfacesFilter:n,schemasFilter:r}=e;return[{propositions:t.filter((e=>!n||n.includes(e.scope))).map((e=>{const{items:t=[]}=e;return{...e,items:t.filter((e=>!r||r.includes(e.schema)))}})).filter((e=>e.items.length>0))},i]};a.setEmissionPreprocessor(s);const c=({surfaces:e,schemas:n,callback:r})=>{const{id:o,unsubscribe:i}=a.add(r,{surfacesFilter:e instanceof Array?e:void 0,schemasFilter:n instanceof Array?n:void 0});return t(o),Promise.resolve({unsubscribe:i})};return{refresh:e=>{t=t=>{t?a.emitOne(t,e):a.emit(e)},t()},command:{optionsValidator:e=>gf({options:e}),run:c}}};const yf={TYPE:"~type",SOURCE:"~source"},vf={EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},bf={REQUEST:"com.adobe.eventSource.requestContent"},wf=({options:e})=>Sr({renderDecisions:br(),personalization:Sr({decisionContext:Sr({})})}).noUnknownFields()(e);var Ef=({contextProvider:e,decisionProvider:t})=>({optionsValidator:e=>wf({options:e}),run:({renderDecisions:n,decisionContext:r,applyResponse:o})=>o({renderDecisions:n,propositions:t.evaluate(e.getContext(r))})});const If=({config:e,eventManager:t,createNamespacedStorage:n,consent:r,getBrowser:o})=>{const{orgId:i,personalizationStorageEnabled:a}=e,s=Md({eventManager:t,mergeDecisionsMeta:Qd}),c=n(`${It(i)}.decisioning.`);a||Fp(c.persistent);const l=lf({storage:Bp()}),d=tf({eventRegistry:l}),u=df({eventRegistry:l,window:window,getBrowser:o}),p=Ef({contextProvider:u,decisionProvider:d}),f=hf({collect:s});let g;return{lifecycle:{onDecision({propositions:e}){f.refresh(e)},onComponentsRegistered(e){g=nf(e.lifecycle),a&&r.awaitConsent().then((()=>{l.setStorage(c.persistent)})).catch((()=>{c&&Fp(c.persistent)}))},onBeforeEvent({event:e,renderDecisions:t,personalization:n={},onResponse:r=Xt}){const{decisionContext:o={}}=n;r(Ep({renderDecisions:t,decisionProvider:d,applyResponse:g,event:e,personalization:n,decisionContext:u.getContext({[yf.TYPE]:vf.EDGE,[yf.SOURCE]:bf.REQUEST,...o})}))},onBeforeRequest({request:e}){const t=e.getPayload().toJSON(),{events:n=[]}=t;0!==n.length&&n.forEach((e=>l.addExperienceEdgeEvent(e)))}},commands:{evaluateRulesets:{run:({renderDecisions:e,personalization:t={}})=>{const{decisionContext:n={}}=t;return p.run({renderDecisions:e,decisionContext:{[yf.TYPE]:vf.RULES_ENGINE,[yf.SOURCE]:bf.REQUEST,...n},applyResponse:g})},optionsValidator:p.optionsValidator},subscribeRulesetItems:f.command}}};If.namespace="RulesEngine",If.configValidators=Sr({personalizationStorageEnabled:br().default(!1)});var Cf=Sr({streamingMedia:Sr({channel:kr().nonEmpty().required(),playerName:kr().nonEmpty().required(),appVersion:kr(),mainPingInterval:Ir().minimum(10).maximum(50).default(10),adPingInterval:Ir().minimum(1).maximum(10).default(10)}).noUnknownFields()}),Sf=({options:e})=>hr([Sr({playerId:kr().required(),getPlayerDetails:wr().required(),xdm:Sr({mediaCollection:Sr({sessionDetails:Sr(yr()).required()})}),edgeConfigOverrides:Sr({})}).required(),Sr({xdm:Sr({mediaCollection:Sr({playhead:Ir().required(),sessionDetails:Sr(yr()).required()})}),edgeConfigOverrides:Sr({})}).required()],"Error validating the createMediaSession command options.")(e),kf=({options:e})=>hr([Sr({playerId:kr().required(),xdm:Sr({eventType:Or(...Object.values(Hs)).required(),mediaCollection:Sr(yr())}).required()}).required(),Sr({xdm:Sr({eventType:Or(...Object.values(Hs)).required(),mediaCollection:Sr({playhead:Ir().integer().required(),sessionID:kr().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e),Of=({config:e,trackMediaEvent:t,trackMediaSession:n,mediaResponseHandler:r})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Xt}){if(!e)return;const{legacy:n,playerId:o,getPlayerDetails:i}=e;n||t((({response:e})=>r({playerId:o,getPlayerDetails:i,response:e})))}},commands:{createMediaSession:{optionsValidator:e=>Sf({options:e}),run:n},sendMediaEvent:{optionsValidator:e=>kf({options:e}),run:n=>e.streamingMedia?t(n):Promise.reject(new Error("Streaming media is not configured."))}}});const Df=({config:e,logger:t,eventManager:n,sendEdgeNetworkRequest:r,consent:o})=>{const i=Qs(),a=Gs({config:e,eventManager:n,consent:o,sendEdgeNetworkRequest:r,setTimestamp:vi((()=>new Date))}),s=Xs({mediaSessionCacheManager:i,mediaEventManager:a,config:e}),c=Ys({config:e,mediaEventManager:a,mediaSessionCacheManager:i}),l=Zs({mediaSessionCacheManager:i,config:e,trackMediaEvent:s});return Of({config:e,trackMediaEvent:s,mediaResponseHandler:l,trackMediaSession:c})};Df.namespace="Streaming media",Df.configValidators=Cf;const{console:Tf}=window,Pf=Ft(window),Af=(e={})=>{const t=Sr({name:kr().default("alloy"),monitors:vr(Sr({})).default([]),components:vr(wr())}).noUnknownFields(),{name:n,monitors:r,components:o}=t(e),i=()=>(window.__alloyMonitors||[]).concat(r),a=Ar({console:Tf,locationSearch:window.location.search,createLogger:Eo,instanceName:n,createNamespacedStorage:Pf,getMonitors:i}),s=_a({instanceName:n,logController:a,components:o});return a.logger.logOnInstanceCreated({instance:s}),s};t.createCustomInstance=Af,t.components=[ks,Ps,Fs,gc,mp,If,Df]}},"adobe-alloy/dist/lib/instanceManager/createInstanceManager.js":{script:function(e){"use strict";e.exports=({turbine:e,window:t,createCustomInstance:n,components:r,createEventMergeId:o,orgId:i,wrapOnBeforeEventSend:a,getConfigOverrides:s})=>{const{instances:c}=e.getExtensionSettings(),l={},d={};return t.__alloyMonitors=t.__alloyMonitors||[],t.__alloyMonitors.push({onInstanceCreated:(...e)=>{d.onInstanceCreated||=[],d.onInstanceCreated.push(e)},onInstanceConfigured:(...e)=>{d.onInstanceConfigured||=[],
d.onInstanceConfigured.push(e)},onBeforeCommand(...e){const{commandName:t}=e[0];"configure"===t&&(d.onBeforeCommand||=[],d.onBeforeCommand.push(e))}}),c.forEach((({name:o,edgeConfigId:c,stagingEdgeConfigId:d,developmentEdgeConfigId:u,onBeforeEventSend:p,...f})=>{const g=n({name:o,components:r});t[o]=g,t.__alloyNS||(t.__alloyNS=[]),t.__alloyNS.push(o),l[o]=g;const m=e.environment&&e.environment.stage,h="development"===m&&u||"staging"===m&&d||c;f.edgeConfigOverrides=s(f),g("configure",{...f,datastreamId:h,debugEnabled:e.debugEnabled,orgId:f.orgId||i,onBeforeEventSend:a(p)}),e.onDebugChanged((e=>{g("setDebug",{enabled:e})}))})),{getInstance:e=>l[e],createEventMergeId:()=>o(),addMonitor(e){t.__alloyMonitors.push(e),Object.keys(d).forEach((t=>{e[t]&&d[t].forEach((n=>{e[t](...n)}))}))}}}}},"adobe-alloy/dist/lib/instanceManager/injectWrapOnBeforeEventSend.js":{script:function(e){"use strict";e.exports=({version:e})=>t=>n=>{if(n.xdm.implementationDetails.name=`${n.xdm.implementationDetails.name}/reactor`,n.xdm.implementationDetails.version=`${n.xdm.implementationDetails.version}+${e}`,t)return t(n)}}},"adobe-alloy/dist/lib/utils/createGetConfigOverrides.js":{script:function(e){"use strict";const t=e=>t=>{var n,r,o,i;const{edgeConfigOverrides:a}=t;let s;if(a){if(a[e])s={...a[e]};else{if(a.development||a.staging||a.production)return;s=a}if(0!==Object.keys(s).length&&!1!==s.enabled){if(delete s.enabled,(null===(n=s.com_adobe_analytics)||void 0===n||null===(n=n.reportSuites)||void 0===n?void 0:n.length)>0&&(s.com_adobe_analytics.reportSuites=s.com_adobe_analytics.reportSuites.flatMap((e=>e.includes(",")?e.split(/,\s*/gi):e)).map((e=>e.trim())).filter(Boolean)),void 0!==(null===(r=s.com_adobe_identity)||void 0===r?void 0:r.idSyncContainerId)&&null!==(null===(o=s.com_adobe_identity)||void 0===o?void 0:o.idSyncContainerId)&&"string"==typeof(null===(i=s.com_adobe_identity)||void 0===i?void 0:i.idSyncContainerId)){const e=parseInt(s.com_adobe_identity.idSyncContainerId.trim(),10);if(Number.isNaN(e))throw new Error(`The ID sync container ID "${s.com_adobe_identity.idSyncContainerId}" is not a valid integer.`);s.com_adobe_identity.idSyncContainerId=e}return s}}};e.exports=t}}}},"gcoe-adobe-client-data-layer":{displayName:"Adobe Client Data Layer",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP6e4c031a8b7640d7ac3fab013fa28b17/",settings:{dataLayerName:"adobeDataLayer",injectLibrary:!0},modules:{"gcoe-adobe-client-data-layer/src/lib/main.js":{script:function(e,t,n,r){var o=r.getExtensionSettings(),i=o.dataLayerName,a=o.injectLibrary;if(window.adobeDataLayer=window.adobeDataLayer||[],"object"!=typeof window.adobeDataLayer&&(r.logger.log("Initializing adobeDataLayer to [] as it isn't an object yet."),window.adobeDataLayer=[]),"adobeDataLayer"!==i&&("object"==typeof window[i]?(r.logger.log('Using "'+i+'" instead of "adobeDataLayer" as data layer name.'),window.adobeDataLayer.push((function(e){for(var t=0;t<window[i].length;t++)e.push(window[i][t]);window[i]=e}))):r.logger.warn('Could not use "'+i+'" instead of "adobeDataLayer", because the object does not exist!')),a&&void 0===window.adobeDataLayer.getState){function s(e,t){return d(e)||l(e,t)||p(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}function d(e){if(Array.isArray(e))return e}function u(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=p(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.logger.log("Initializing adobeDataLayer as it wasn't found during the initialization."),function e(t,r,o){function i(s,c){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!c&&l)return l(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,r,o)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){(function(e){(function(){function r(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function o(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function i(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function a(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function s(e,t,n){var r=e.length;for(n+=-1;++n<r;)if(t(e[n],n,e))return n;return-1}function c(e){return e!=e}function l(e){return function(t){return e(t)}}function d(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function u(e){var t=Object;return function(n){return e(t(n))}}function p(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function f(){}function m(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function v(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new y;++t<n;)this.add(e[t])}function b(e){this.size=(this.__data__=new h(e)).size}function w(e,t){var n,r=bn(e),o=!r&&vn(e),i=!r&&!o&&wn(e),a=!r&&!o&&!i&&Cn(e);if(r=r||o||i||a){o=e.length;for(var s=String,c=-1,l=Array(o);++c<o;)l[c]=s(c);o=l}else o=[];for(n in s=o.length,e)!t&&!bt.call(e,n)||r&&("length"==n||i&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||te(n,s))||o.push(n);return o}function E(e,t,n){(n===Ue||fe(e[t],n))&&(n!==Ue||t in e)||S(e,t,n)}function I(e,t,n){var r=e[t];bt.call(e,t)&&fe(r,n)&&(n!==Ue||t in e)||S(e,t,n)}function C(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1}function S(e,t,n){"__proto__"==t&&xt?xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function k(e,t,n,r,o,i){var a,s=1&t,c=2&t,l=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),a!==Ue)return a;if(!ve(e))return e;if(r=bn(e)){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&bt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return F(e,a)}else{var d=sn(e),u="[object Function]"==d||"[object GeneratorFunction]"==d;if(wn(e))return q(e,s);if("[object Object]"==d||"[object Arguments]"==d||u&&!o){if(a=c||u?{}:Z(e),!s)return c?function(e,t){return V(e,an(e),t)}(e,function(e,t){return e&&V(t,Re(t),e)}(a,e)):function(e,t){return V(e,on(e),t)}(e,function(e,t){return e&&V(t,Ae(t),e)}(a,e))}else{if(!tt[d])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return U(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?U(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return B(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,Qe.exec(e))).lastIndex=e.lastIndex,t;case"[object Symbol]":return Kt?Object(Kt.call(e)):{}}}(e,d,s)}}if(o=(i=i||new b).get(e))return o;if(i.set(e,a),In(e))return e.forEach((function(r){a.add(k(r,t,n,r,e,i))})),a;if(En(e))return e.forEach((function(r,o){a.set(o,k(r,t,n,o,e,i))})),a;c=l?c?Q:J:c?Re:Ae;var p=r?Ue:c(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(p||e,(function(r,o){p&&(r=e[o=r]),I(a,o,k(r,t,n,o,e,i))})),a}function O(e,t){for(var n=0,r=(t=$(t,e)).length;null!=e&&n<r;)e=e[ae(t[n++])];return n&&n==r?e:Ue}function D(e,t,n){return t=t(e),bn(e)?t:i(t,n(e))}function T(e){if(null==e)e=e===Ue?"[object Undefined]":"[object Null]";else if(jt&&jt in Object(e)){var t=bt.call(e,jt),n=e[jt];try{e[jt]=Ue;var r=!0}catch(e){}var o=Et.call(e);r&&(t?e[jt]=n:delete e[jt]),e=o}else e=Et.call(e);return e}function P(e,t){return null!=e&&bt.call(e,t)}function A(e,t){return null!=e&&t in Object(e)}function R(e){return be(e)&&"[object Arguments]"==T(e)}function N(e,t,n,r,o){if(e===t)t=!0;else if(null==e||null==t||!be(e)&&!be(t))t=e!=e&&t!=t;else e:{var i,a,s=bn(e),c=bn(t),l="[object Object]"==(i="[object Arguments]"==(i=s?"[object Array]":sn(e))?"[object Object]":i);if(c="[object Object]"==(a="[object Arguments]"==(a=c?"[object Array]":sn(t))?"[object Object]":a),(a=i==a)&&wn(e)){if(!wn(t)){t=!1;break e}l=!(s=!0)}if(a&&!l)o=o||new b,t=s||Cn(e)?G(e,t,n,r,N,o):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new Ot(e),new Ot(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return fe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=d;case"[object Set]":if(s=s||p,e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=G(s(e),s(t),r,o,i,a),a.delete(e),t);case"[object Symbol]":if(Kt)return Kt.call(e)==Kt.call(t)}return!1}(e,t,i,n,r,N,o);else{if(!(1&n)&&(s=l&&bt.call(e,"__wrapped__"),i=c&&bt.call(t,"__wrapped__"),s||i)){t=N(e=s?e.value():e,t=i?t.value():t,n,r,o=o||new b);break e}if(a)t:if(o=o||new b,s=1&n,i=J(e),c=i.length,a=J(t).length,c==a||s){for(l=c;l--;){var u=i[l];if(!(s?u in t:bt.call(t,u))){t=!1;break t}}if((a=o.get(e))&&o.get(t))t=a==t;else{a=!0,o.set(e,t),o.set(t,e);for(var f=s;++l<c;){var g=e[u=i[l]],m=t[u];if(r)var h=s?r(m,g,u,t,e,o):r(g,m,u,e,t,o);if(h===Ue?g!==m&&!N(g,m,n,r,o):!h){a=!1;break}f=f||"constructor"==u}a&&!f&&(n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(a=!1),o.delete(e),o.delete(t),t=a}}else t=!1;else t=!1}}return t}function j(e){return"function"==typeof e?e:null==e?xe:"object"==g(e)?bn(e)?function(e,t){return ne(e)&&t==t&&!ve(t)?oe(ae(e),t):function(n){var r=Te(n,e);return r===Ue&&r===t?Pe(n,e):N(t,r,3)}}(e[0],e[1]):function(e){var t=function(e){for(var t=Ae(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,o==o&&!ve(o)]}return t}(e);return 1==t.length&&t[0][2]?oe(t[0][0],t[0][1]):function(n){return n===e||function(e,t){var n=t.length,r=n;if(null==e)return!r;for(e=Object(e);n--;)if((o=t[n])[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++n<r;){var o,i=(o=t[n])[0],a=e[i],s=o[1];if(o[2]){if(a===Ue&&!(i in e))return!1}else if(o=new b,void 0!==Ue||!N(s,a,3,void 0,o))return!1}return!0}(n,t)}}(e):Me(e)}function x(e){if(!re(e))return Lt(e);var t,n=[];for(t in Object(e))bt.call(e,t)&&"constructor"!=t&&n.push(t);return n}function _(e,t,n,r,o){e!==t&&nn(t,(function(i,a){if(ve(i)){var s=o=o||new b,c="__proto__"==a?Ue:e[a],l="__proto__"==a?Ue:t[a];if(g=s.get(l))E(e,a,g);else{var d=(g=r?r(c,l,a+"",e,t,s):Ue)===Ue;if(d){var u=bn(l),p=!u&&wn(l),f=!u&&!p&&Cn(l),g=l;u||p||f?g=bn(c)?c:me(c)?F(c):p?q(l,!(d=!1)):f?B(l,!(d=!1)):[]:we(l)||vn(l)?vn(g=c)?g=Oe(c):(!ve(c)||n&&he(c))&&(g=Z(l)):d=!1}d&&(s.set(l,g),_(g,l,n,r,s),s.delete(l)),E(e,a,g)}}else(s=r?r("__proto__"==a?Ue:e[a],i,a+"",e,t,o):Ue)===Ue&&(s=i),E(e,a,s)}),Re)}function M(e){if("string"==typeof e)return e;if(bn(e))return o(e,M)+"";if(Ie(e))return Zt?Zt.call(e):"";var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function L(e,t){var n;if((t=$(t,e)).length<2)n=e;else{var r=0,o=-1,i=-1,a=(n=t).length;for(r<0&&(r=a<-r?0:a+r),(o=a<o?a:o)<0&&(o+=a),a=o<r?0:o-r>>>0,r>>>=0,o=Array(a);++i<a;)o[i]=n[i+r];n=O(e,o)}null==(e=n)||delete e[ae(de(t))]}function $(e,t){return bn(e)?e:ne(e,t)?[e]:mn(De(e))}function q(e,t){if(t)return e.slice();var n=e.length;return n=Dt?Dt(n):new e.constructor(n),e.copy(n),n}function U(e){var t=new e.constructor(e.byteLength);return new Ot(t).set(new Ot(e)),t}function B(e,t){return new e.constructor(t?U(e.buffer):e.buffer,e.byteOffset,e.length)}function F(e,t){var n=-1,r=e.length;for(t=t||Array(r);++n<r;)t[n]=e[n];return t}function V(e,t,n){var r=!n;n=n||{};for(var o=-1,i=t.length;++o<i;){var a=t[o],s=Ue;s===Ue&&(s=e[a]),r?S(n,a,s):I(n,a,s)}return n}function H(e){return function(e){return gn(ie(e,void 0,xe),e+"")}((function(t,n){var r,o=-1,i=n.length,a=1<i?n[i-1]:Ue,s=2<i?n[2]:Ue;if(a=3<e.length&&"function"==typeof a?(i--,a):Ue,r=s){r=n[0];var c=n[1];if(ve(s)){var l=g(c);r=!!("number"==l?ge(s)&&te(c,s.length):"string"==l&&c in s)&&fe(s[c],r)}else r=!1}for(r&&(a=i<3?Ue:a,i=1),t=Object(t);++o<i;)(s=n[o])&&e(t,s,o,a);return t}))}function z(e){return we(e)?Ue:e}function G(e,t,n,r,o,i){var s=1&n,c=e.length;if(c!=(l=t.length)&&!(s&&c<l))return!1;if((l=i.get(e))&&i.get(t))return l==t;var l=-1,d=!0,u=2&n?new v:Ue;for(i.set(e,t),i.set(t,e);++l<c;){var p=e[l],f=t[l];if(r)var g=s?r(f,p,l,t,e,i):r(p,f,l,e,t,i);if(g!==Ue){if(g)continue;d=!1;break}if(u){if(!a(t,(function(e,t){if(!u.has(t)&&(p===e||o(p,e,n,r,i)))return u.push(t)}))){d=!1;break}}else if(p!==f&&!o(p,f,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function J(e){return D(e,Ae,on)}function Q(e){return D(e,Re,an)}function W(e,t){var n=(n=f.iteratee||_e)===_e?j:n;return arguments.length?n(e,t):n}function X(e,t){var n=e.__data__,r=g(t);return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function Y(e,t){var n=null==e?Ue:e[t];return!ve(n)||wt&&wt in n||!(he(n)?Ct:Ye).test(se(n))?Ue:n}function K(e,t,n){for(var r=-1,o=(t=$(t,e)).length,i=!1;++r<o;){var a=ae(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&ye(o)&&te(a,o)&&(bn(e)||vn(e))}function Z(e){return"function"!=typeof e.constructor||re(e)?{}:en(Tt(e))}function ee(e){return bn(e)||vn(e)||!!(Nt&&e&&e[Nt])}function te(e,t){var n=g(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ze.test(e))&&-1<e&&0==e%1&&e<t}function ne(e,t){if(bn(e))return!1;var n=g(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ie(e))||He.test(e)||!Ve.test(e)||null!=t&&e in Object(t)}function re(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ht)}function oe(e,t){return function(n){return null!=n&&n[e]===t&&(t!==Ue||e in Object(n))}}function ie(e,t,n){return t=$t(t===Ue?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=$t(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];for(o=-1,i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,i)}}function ae(e){if("string"==typeof e||Ie(e))return e;var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function se(e){if(null==e)return"";try{return vt.call(e)}catch(e){}return e+""}function ce(e,t,n){var r=null==e?0:e.length;return r?((n=null==n?0:Se(n))<0&&(n=$t(r+n,0)),s(e,W(t,3),n)):-1}function le(e){return null!=e&&e.length?function e(t,n,r,o,a){var s=-1,c=t.length;for(r=r||ee,a=a||[];++s<c;){var l=t[s];0<n&&r(l)?1<n?e(l,n-1,r,o,a):i(a,l):o||(a[a.length]=l)}return a}(e,1):[]}function de(e){var t=null==e?0:e.length;return t?e[t-1]:Ue}function ue(e,t){function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;return i.has(o)?i.get(o):(r=e.apply(this,r),n.cache=i.set(o,r)||i,r)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");return n.cache=new(ue.Cache||y),n}function pe(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function fe(e,t){return e===t||e!=e&&t!=t}function ge(e){return null!=e&&ye(e.length)&&!he(e)}function me(e){return be(e)&&ge(e)}function he(e){return!!ve(e)&&("[object Function]"==(e=T(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function ye(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}function ve(e){var t=g(e);return null!=e&&("object"==t||"function"==t)}function be(e){return null!=e&&"object"==g(e)}function we(e){return!(!be(e)||"[object Object]"!=T(e))&&(null===(e=Tt(e))||"function"==typeof(e=bt.call(e,"constructor")&&e.constructor)&&e instanceof e&&vt.call(e)==It)}function Ee(e){return"string"==typeof e||!bn(e)&&be(e)&&"[object String]"==T(e)}function Ie(e){return"symbol"==g(e)||be(e)&&"[object Symbol]"==T(e)}function Ce(e){return e?(e=ke(e))===Be||e===-Be?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Se(e){var t=(e=Ce(e))%1;return e==e?t?e-t:e:0}function ke(e){if("number"==typeof e)return e;if(Ie(e))return Fe;if(ve(e)&&(e=ve(e="function"==typeof e.valueOf?e.valueOf():e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(Ge,"");var t=Xe.test(e);return t||Ke.test(e)?rt(e.slice(2),t?2:8):We.test(e)?Fe:+e}function Oe(e){return V(e,Re(e))}function De(e){return null==e?"":M(e)}function Te(e,t,n){return(e=null==e?Ue:O(e,t))===Ue?n:e}function Pe(e,t){return null!=e&&K(e,t,A)}function Ae(e){return ge(e)?w(e):x(e)}function Re(e){if(ge(e))e=w(e,!0);else if(ve(e)){var t,n=re(e),r=[];for(t in e)("constructor"!=t||!n&&bt.call(e,t))&&r.push(t);e=r}else{if(t=[],null!=e)for(n in Object(e))t.push(n);e=t}return e}function Ne(e){return null==e?[]:function(e,t){return o(t,(function(t){return e[t]}))}(e,Ae(e))}function je(e){return function(){return e}}function xe(e){return e}function _e(e){return j("function"==typeof e?e:k(e,1))}function Me(e){return ne(e)?function(e){return function(t){return null==t?Ue:t[e]}}(ae(e)):function(e){return function(t){return O(t,e)}}(e)}function Le(){return[]}function $e(){return!1}function qe(){}var Ue,Be=1/0,Fe=NaN,Ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,He=/^\w*$/,ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/^\s+|\s+$/g,Je=/\\(\\)?/g,Qe=/\w*$/,We=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,Ze=/^(?:0|[1-9]\d*)$/,et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et["[object Arguments]"]=et["[object Array]"]=et["[object ArrayBuffer]"]=et["[object Boolean]"]=et["[object DataView]"]=et["[object Date]"]=et["[object Error]"]=et["[object Function]"]=et["[object Map]"]=et["[object Number]"]=et["[object Object]"]=et["[object RegExp]"]=et["[object Set]"]=et["[object String]"]=et["[object WeakMap]"]=!1;var tt={};tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object DataView]"]=tt["[object Boolean]"]=tt["[object Date]"]=tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object Symbol]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Error]"]=tt["[object Function]"]=tt["[object WeakMap]"]=!1;var nt,rt=parseInt,ot="object"==g(e)&&e&&e.Object===Object&&e,it="object"==("undefined"==typeof self?"undefined":g(self))&&self&&self.Object===Object&&self,at=ot||it||Function("return this")(),st="object"==g(n)&&n&&!n.nodeType&&n,ct=st&&"object"==g(t)&&t&&!t.nodeType&&t,lt=ct&&ct.exports===st,dt=lt&&ot.process;e:{try{nt=dt&&dt.binding&&dt.binding("util");break e}catch(l){}nt=void 0}var ut,pt=nt&&nt.isMap,ft=nt&&nt.isSet,gt=nt&&nt.isTypedArray,mt=Array.prototype,ht=Object.prototype,yt=at["__core-js_shared__"],vt=Function.prototype.toString,bt=ht.hasOwnProperty,wt=(ut=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||""))?"Symbol(src)_1."+ut:"",Et=ht.toString,It=vt.call(Object),Ct=RegExp("^"+vt.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=lt?at.Buffer:Ue,kt=at.Symbol,Ot=at.Uint8Array,Dt=St?St.a:Ue,Tt=u(Object.getPrototypeOf),Pt=Object.create,At=ht.propertyIsEnumerable,Rt=mt.splice,Nt=kt?kt.isConcatSpreadable:Ue,jt=kt?kt.toStringTag:Ue,xt=function(){try{var e=Y(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_t=Object.getOwnPropertySymbols,Mt=St?St.isBuffer:Ue,Lt=u(Object.keys),$t=Math.max,qt=Date.now,Ut=Y(at,"DataView"),Bt=Y(at,"Map"),Ft=Y(at,"Promise"),Vt=Y(at,"Set"),Ht=Y(at,"WeakMap"),zt=Y(Object,"create"),Gt=se(Ut),Jt=se(Bt),Qt=se(Ft),Wt=se(Vt),Xt=se(Ht),Yt=kt?kt.prototype:Ue,Kt=Yt?Yt.valueOf:Ue,Zt=Yt?Yt.toString:Ue,en=function(e){return ve(e)?Pt?Pt(e):(qe.prototype=e,e=new qe,qe.prototype=Ue,e):{}};m.prototype.clear=function(){this.__data__=zt?zt(null):{},this.size=0},m.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},m.prototype.get=function(e){var t=this.__data__;return zt?"__lodash_hash_undefined__"===(e=t[e])?Ue:e:bt.call(t,e)?t[e]:Ue},m.prototype.has=function(e){var t=this.__data__;return zt?t[e]!==Ue:bt.call(t,e)},m.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zt&&t===Ue?"__lodash_hash_undefined__":t,this},h.prototype.clear=function(){this.__data__=[],this.size=0},h.prototype.delete=function(e){var t=this.__data__;return!((e=C(t,e))<0||(e==t.length-1?t.pop():Rt.call(t,e,1),--this.size,0))},h.prototype.get=function(e){var t=this.__data__;return(e=C(t,e))<0?Ue:t[e][1]},h.prototype.has=function(e){return-1<C(this.__data__,e)},h.prototype.set=function(e,t){var n=this.__data__,r=C(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},y.prototype.clear=function(){this.size=0,this.__data__={hash:new m,map:new(Bt||h),string:new m}},y.prototype.delete=function(e){return e=X(this,e).delete(e),this.size-=e?1:0,e},y.prototype.get=function(e){return X(this,e).get(e)},y.prototype.has=function(e){return X(this,e).has(e)},y.prototype.set=function(e,t){var n=X(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},v.prototype.add=v.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},v.prototype.has=function(e){return this.__data__.has(e)},b.prototype.clear=function(){this.__data__=new h,this.size=0},b.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},b.prototype.get=function(e){return this.__data__.get(e)},b.prototype.has=function(e){return this.__data__.has(e)},b.prototype.set=function(e,t){var n=this.__data__;if(n instanceof h){var r=n.__data__;if(!Bt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new y(r)}return n.set(e,t),this.size=n.size,this};var tn=function(e,t){if(null==e)return e;if(!ge(e))return function(e,t){return e&&nn(e,t,Ae)}(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e},nn=function(e,t,n){for(var r=-1,o=Object(e),i=(n=n(e)).length;i--;){var a=n[++r];if(!1===t(o[a],a,o))break}return e},rn=xt?function(e,t){return xt(e,"toString",{configurable:!0,enumerable:!1,value:je(t),writable:!0})}:xe,on=_t?function(e){return null==e?[]:(e=Object(e),r(_t(e),(function(t){return At.call(e,t)})))}:Le,an=_t?function(e){for(var t=[];e;)i(t,on(e)),e=Tt(e);return t}:Le,sn=T;(Ut&&"[object DataView]"!=sn(new Ut(new ArrayBuffer(1)))||Bt&&"[object Map]"!=sn(new Bt)||Ft&&"[object Promise]"!=sn(Ft.resolve())||Vt&&"[object Set]"!=sn(new Vt)||Ht&&"[object WeakMap]"!=sn(new Ht))&&(sn=function(e){var t=T(e);if(e=(e="[object Object]"==t?e.constructor:Ue)?se(e):"")switch(e){case Gt:return"[object DataView]";case Jt:return"[object Map]";case Qt:return"[object Promise]";case Wt:return"[object Set]";case Xt:return"[object WeakMap]"}return t});var cn,ln,dn,un,pn,fn,gn=(un=rn,fn=pn=0,function(){var e=qt(),t=16-(e-fn);if(fn=e,0<t){if(800<=++pn)return arguments[0]}else pn=0;return un.apply(Ue,arguments)}),mn=(dn=(ln=ue(ln=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ze,(function(e,n,r,o){t.push(r?o.replace(Je,"$1"):n||e)})),t},(function(e){return 500===dn.size&&dn.clear(),e}))).cache,ln),hn=(cn=ce,function(e,t,n){var r=Object(e);if(!ge(e)){var o=W(t,3);e=Ae(e),t=function(e){return o(r[e],e,r)}}return-1<(t=cn(e,t,n))?r[o?e[t]:t]:Ue});ue.Cache=y;var yn,vn=R(function(){return arguments}())?R:function(e){return be(e)&&bt.call(e,"callee")&&!At.call(e,"callee")},bn=Array.isArray,wn=Mt||$e,En=pt?l(pt):function(e){return be(e)&&"[object Map]"==sn(e)},In=ft?l(ft):function(e){return be(e)&&"[object Set]"==sn(e)},Cn=gt?l(gt):function(e){return be(e)&&ye(e.length)&&!!et[T(e)]},Sn=H((function(e,t,n){_(e,t,n)})),kn=H((function(e,t,n,r){_(e,t,n,r)})),On=gn(ie(yn=function(e,t){var n={};if(null==e)return n;var r=!1;t=o(t,(function(t){return t=$(t,e),r=r||1<t.length,t})),V(e,Q(e),n),r&&(n=k(n,7,z));for(var i=t.length;i--;)L(n,t[i]);return n},Ue,le),yn+"");f.constant=je,f.flatten=le,f.iteratee=_e,f.keys=Ae,f.keysIn=Re,f.memoize=ue,f.merge=Sn,f.mergeWith=kn,f.negate=pe,f.omit=On,f.property=Me,f.reject=function(e,t){return(bn(e)?r:function(e,t){var n=[];return tn(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n})(e,pe(W(t,3)))},f.toPlainObject=Oe,f.values=Ne,f.cloneDeep=function(e){return k(e,5)},f.cloneDeepWith=function(e,t){return k(e,5,t="function"==typeof t?t:Ue)},f.eq=fe,f.find=hn,f.findIndex=ce,f.get=Te,f.has=function(e,t){return null!=e&&K(e,t,P)},f.hasIn=Pe,f.identity=xe,f.includes=function(e,t,n,r){if(e=ge(e)?e:Ne(e),n=n&&!r?Se(n):0,r=e.length,n<0&&(n=$t(r+n,0)),Ee(e))e=n<=r&&-1<e.indexOf(t,n);else{if(r=!!r){if(t==t)e:{for(n-=1,r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=s(e,c,n);r=-1<e}e=r}return e},f.isArguments=vn,f.isArray=bn,f.isArrayLike=ge,f.isArrayLikeObject=me,f.isBuffer=wn,f.isEmpty=function(e){if(null==e)return!0;if(ge(e)&&(bn(e)||"string"==typeof e||"function"==typeof e.splice||wn(e)||Cn(e)||vn(e)))return!e.length;var t=sn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(re(e))return!x(e).length;for(var n in e)if(bt.call(e,n))return!1;return!0},f.isEqual=function(e,t){return N(e,t)},f.isFunction=he,f.isLength=ye,f.isMap=En,f.isNull=function(e){return null===e},f.isObject=ve,f.isObjectLike=be,f.isPlainObject=we,f.isSet=In,f.isString=Ee,f.isSymbol=Ie,f.isTypedArray=Cn,f.last=de,f.stubArray=Le,f.stubFalse=$e,f.toFinite=Ce,f.toInteger=Se,f.toNumber=ke,f.toString=De,f.VERSION="4.17.5",ct&&((ct.exports=f)._=f,st._=f)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t){t.exports={itemType:{DATA:"data",FCTN:"fctn",EVENT:"event",LISTENER_ON:"listenerOn",LISTENER_OFF:"listenerOff"},dataLayerEvent:{CHANGE:"adobeDataLayer:change",EVENT:"adobeDataLayer:event"},listenerScope:{PAST:"past",FUTURE:"future",ALL:"all"}}},{}],3:[function(e,t){var n=e("../custom-lodash"),r=e("../version.json").version,o=n.cloneDeep,i=n.get,a=e("./item"),s=e("./listener"),c=e("./listenerManager"),l=e("./constants"),d=e("./utils/customMerge");t.exports=function(e){function t(e){y=d(y,e.data)}function n(e){function n(e){return 0===m.length||e.index>m.length-1?[]:m.slice(0,e.index).map((function(e){return a(e)}))}e.valid?{data:function(e){t(e),f.triggerListeners(e)},fctn:function(e){e.config.call(m,m)},event:function(e){e.data&&t(e),f.triggerListeners(e)},listenerOn:function(e){var t=s(e);switch(t.scope){case l.listenerScope.PAST:var r,o=u(n(e));try{for(o.s();!(r=o.n()).done;){var i=r.value;f.triggerListener(t,i)}}catch(e){o.e(e)}finally{o.f()}break;case l.listenerScope.FUTURE:f.register(t);break;case l.listenerScope.ALL:if(f.register(t)){var a,c=u(n(e));try{for(c.s();!(a=c.n()).done;){var d=a.value;f.triggerListener(t,d)}}catch(e){c.e(e)}finally{c.f()}}}},listenerOff:function(e){f.unregister(s(e))}}[e.type](e):p(e)}function p(e){var t="The following item cannot be handled by the data layer because it does not have a valid format: "+JSON.stringify(e.config);console.error(t)}var f,g=e||{},m=[],h=[],y={},v={getState:function(){return y},getDataLayer:function(){return m}};return Array.isArray(g.dataLayer)||(g.dataLayer=[]),h=g.dataLayer.splice(0,g.dataLayer.length),(m=g.dataLayer).version=r,y={},f=c(v),m.push=function(e){var t=arguments,r=arguments;if(Object.keys(t).forEach((function(e){var o=a(t[e]);switch(o.valid||(p(o),delete r[e]),o.type){case l.itemType.DATA:case l.itemType.EVENT:n(o);break;case l.itemType.FCTN:delete r[e],n(o);break;case l.itemType.LISTENER_ON:case l.itemType.LISTENER_OFF:delete r[e]}})),r[0])return Array.prototype.push.apply(this,r)},m.getState=function(e){return e?i(o(y),e):o(y)},m.addEventListener=function(e,t,r){n(a({on:e,handler:t,scope:r&&r.scope,path:r&&r.path}))},m.removeEventListener=function(e,t){n(a({off:e,handler:t}))},function(){for(var e=0;e<h.length;e++)m.push(h[e])}(),v}},{"../custom-lodash":1,"../version.json":14,"./constants":2,"./item":5,"./listener":7,"./listenerManager":8,"./utils/customMerge":10}],4:[function(e,t){var n={Manager:e("./dataLayerManager")};window.adobeDataLayer=window.adobeDataLayer||[],window.adobeDataLayer.version?console.warn("Adobe Client Data Layer v".concat(window.adobeDataLayer.version," has already been imported/initialized on this page. You may be erroneously loading it a second time.")):n.Manager({dataLayer:window.adobeDataLayer}),t.exports=n},{"./dataLayerManager":3}],5:[function(e,t){var n=e("../custom-lodash"),r=n.isPlainObject,o=n.isEmpty,i=n.omit,a=n.find,s=e("./utils/dataMatchesContraints"),c=e("./itemConstraints"),l=e("./constants");t.exports=function(e,t){var n=e,d=t,u=a(Object.keys(c),(function(e){return s(n,c[e])}))||"function"==typeof n&&l.itemType.FCTN||r(n)&&l.itemType.DATA,p=function(){var e=i(n,Object.keys(c.event));if(!o(e))return e}();return{config:n,type:u,data:p,valid:!!u,index:d}}},{"../custom-lodash":1,"./constants":2,"./itemConstraints":6,"./utils/dataMatchesContraints":11}],6:[function(e,t){t.exports={event:{event:{type:"string"},eventInfo:{optional:!0}},listenerOn:{on:{type:"string"},handler:{type:"function"},scope:{type:"string",values:["past","future","all"],optional:!0},path:{type:"string",optional:!0}},listenerOff:{off:{type:"string"},handler:{type:"function",optional:!0},scope:{type:"string",values:["past","future","all"],optional:!0},path:{type:"string",optional:!0}}}},{}],7:[function(e,t){var n=e("./constants");t.exports=function(e){return{event:e.config.on||e.config.off,handler:e.config.handler||null,scope:e.config.scope||e.config.on&&n.listenerScope.ALL||null,path:e.config.path||null}}},{"./constants":2}],8:[function(e,t){var n=e("../custom-lodash").cloneDeep,r=e("./constants"),o=e("./utils/listenerMatch"),i=e("./utils/indexOfListener");t.exports=function(e){function t(e,t){if(o(e,t)){var r=[n(t.config)];e.handler.apply(s.getDataLayer(),r)}}var a={},s=e,c=i.bind(null,a);return{register:function(e){var t=e.event;return Object.prototype.hasOwnProperty.call(a,t)?-1===c(e)&&(a[e.event].push(e),!0):(a[e.event]=[e],!0)},unregister:function(e){var t=e.event;if(Object.prototype.hasOwnProperty.call(a,t))if(e.handler||e.scope||e.path){var n=c(e);-1<n&&a[t].splice(n,1)
}else a[t]=[]},triggerListeners:function(e){(function(e){var t=[];switch(e.type){case r.itemType.DATA:t.push(r.dataLayerEvent.CHANGE);break;case r.itemType.EVENT:t.push(r.dataLayerEvent.EVENT),e.data&&t.push(r.dataLayerEvent.CHANGE),e.config.event!==r.dataLayerEvent.CHANGE&&t.push(e.config.event)}return t})(e).forEach((function(n){if(Object.prototype.hasOwnProperty.call(a,n)){var r,o=u(a[n]);try{for(o.s();!(r=o.n()).done;)t(r.value,e)}catch(n){o.e(n)}finally{o.f()}}}))},triggerListener:function(e,n){t(e,n)}}}},{"../custom-lodash":1,"./constants":2,"./utils/indexOfListener":12,"./utils/listenerMatch":13}],9:[function(e,t){var n=e("../../custom-lodash"),r=n.has,o=n.get;t.exports=function(e,t){for(var n=t.substring(0,t.lastIndexOf("."));n;){if(r(e,n)&&null==o(e,n))return!0;n=n.substring(0,n.lastIndexOf("."))}return!1}},{"../../custom-lodash":1}],10:[function(e,t){var n=e("../../custom-lodash"),r=n.cloneDeepWith,o=n.isObject,i=n.isArray,a=n.reject,s=n.mergeWith,c=n.isNull;t.exports=function(e,t){return s(e,t,(function(e,t){if(null==t)return null})),function(e,t){return r(e,(n=1<arguments.length&&void 0!==t?t:function(e){return!e},function e(t){if(o(t)){if(i(t))return a(t,n).map((function(t){return r(t,e)}));for(var s={},c=0,l=Object.keys(t);c<l.length;c++){var d=l[c];n(t[d])||(s[d]=r(t[d],e))}return s}}));var n}(e,c)}},{"../../custom-lodash":1}],11:[function(e,t){var n=e("../../custom-lodash"),r=n.find,o=n.includes;t.exports=function(e,t){return void 0===r(Object.keys(t),(function(n){var r=t[n].type,i=n&&t[n].values,a=!t[n].optional,s=e[n],c=g(s),l=r&&c!==r,d=i&&!o(i,s);return a?!s||l||d:s&&(l||d)}))}},{"../../custom-lodash":1}],12:[function(e,t){var n=e("../../custom-lodash").isEqual;t.exports=function(e,t){var r=t.event;if(Object.prototype.hasOwnProperty.call(e,r)){var o,i=u(e[r].entries());try{for(i.s();!(o=i.n()).done;){var a=s(o.value,2),c=a[0],l=a[1];if(n(l.handler,t.handler))return c}}catch(e){i.e(e)}finally{i.f()}}return-1}},{"../../custom-lodash":1}],13:[function(e,t){function n(e,t){return!t.data||!e.path||r(t.data,e.path)||i(t.data,e.path)}var r=e("../../custom-lodash").has,o=e("../constants"),i=e("./ancestorRemoved");t.exports=function(e,t){var r=e.event,i=t.config,a=!1;return t.type===o.itemType.DATA?r===o.dataLayerEvent.CHANGE&&(a=n(e,t)):t.type===o.itemType.EVENT&&(r!==o.dataLayerEvent.EVENT&&r!==i.event||(a=n(e,t)),t.data&&r===o.dataLayerEvent.CHANGE&&(a=n(e,t))),a}},{"../../custom-lodash":1,"../constants":2,"./ancestorRemoved":9}],14:[function(e,t){t.exports={version:"2.0.2"}},{}]},{},[4])}}}}}},company:{orgId:"8E929CC25A1FB2B30A495C97@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"IEEE Xplore",settings:{domains:["ieee.org"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!0},id:"PRed0dc6bdcea944e79555edad8c0e180b"},rules:[]};var _satellite=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e){var n,r;return!1!==t(e)&&(void 0===(n=e.constructor)||!1!==t(r=n.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}function r(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function o(e){return e.substr(0,e.indexOf("["))}function i(e,t,n){if(e.length&&ut(t)){var a=e[0];if(1!==e.length){var s=e.slice(1);if(!r(a))return i(s,t[a],n);var c=t[a=o(a)];Array.isArray(c)&&c.forEach((function(e){return i(s,e,n)}))}else t.hasOwnProperty(a)&&"string"==typeof t[a]&&(t[a]=n(t[a]))}}if(window.atob){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=document,c=Object.assign,l=window,d=l,u=function(e,t,n,r){var o,i=Boolean(t&&Array.isArray(n)),a=Boolean(i&&e),s=document.createElement("a");if(i){var c=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||c(),/^\/\/.+/.test(e)?s.href=d.location.protocol+e:s.href=e),s.hostname||c(),-1===n.indexOf(s.hostname)){var l=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw l.code="dynamic_host_not_allowed",l}}var u=function(){if(null!=o)return o;if(a){var e=s.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),o=s.protocol+"//"+e}else o="";return o},p=function(e){return a&&"string"==typeof e?[u(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},f={getTurbineHost:u,decorateWithDynamicHost:p,get isDynamicEnforced(){return i}};return d&&r.onDebugChanged((function(e){e?d.dynamicHostResolver=f:delete d.dynamicHostResolver})),f},p=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(n){t.push({rule:e,event:n})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},f="debug",g=function(e,t){var n=function(){return"true"===e.getItem(f)},r=function(t){e.setItem(f,t)},o=[],i=function(e){o.push(e)};return t.outputEnabled=n(),{onDebugChanged:i,getDebugEnabled:n,setDebugEnabled:function(e){n()!==e&&(r(e),t.outputEnabled=e,o.forEach((function(t){t(e)})))}}},m="Module did not export a function.",h=function(e,t,n){return function(r,o,i){i=i||[];var a=e.getModuleExports(r.modulePath);if("function"!=typeof a)throw new Error(m);var s=e.getModuleDefinition(r.modulePath),c=r.settings||{};!r.hasTransformedFilePaths&&s.filePaths&&(n(c,s.filePaths,r.modulePath),r.hasTransformedFilePaths=!0);var l=t(c,o);return a.bind(null,l).apply(null,i)}},y=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},v={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},b="\ud83d\ude80",w=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":b,E=!1,I=function(e){if(E&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(w),e!==v.DEBUG||window.console[e]||(e=v.INFO),window.console[e].apply(window.console,t)}},C=I.bind(null,v.LOG),S=I.bind(null,v.INFO),k=I.bind(null,v.DEBUG),O=I.bind(null,v.WARN),D=I.bind(null,v.ERROR),T=function(){var e=E;E=!0,I.apply(null,Array.prototype.concat(v.WARN,Array.prototype.slice.call(arguments))),e||(E=!1)},P={log:C,info:S,debug:k,warn:O,error:D,deprecation:T,get outputEnabled(){return E},set outputEnabled(e){E=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:C.bind(null,t),info:S.bind(null,t),debug:k.bind(null,t),warn:O.bind(null,t),error:D.bind(null,t)}}},A=l,R="com.adobe.reactor.",N=function(e,t){var n=R+(t||"");return{getItem:function(t){try{return A[e].getItem(n+t)}catch(e){return null}},setItem:function(t,r){try{return A[e].setItem(n+t,r),!0}catch(e){return!1}}}},j=N,x="dataElements.",_=j("sessionStorage",x),M=j("localStorage",x),L={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},$={},q=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},U=y,B=P,F={setValue:function(e,t,n){var r;switch(t){case L.PAGEVIEW:return void($[e]=n);case L.SESSION:return void((r=q(n))&&_.setItem(e,r));case L.VISITOR:return void((r=q(n))&&M.setItem(e,r))}},getValue:function(e,t){var n;switch(t){case L.PAGEVIEW:return $.hasOwnProperty(e)?$[e]:null;case L.SESSION:return null===(n=_.getItem(e))?n:JSON.parse(n);case L.VISITOR:return null===(n=M.getItem(e))?n:JSON.parse(n)}}},V=function(e,t,n,r){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+n+(r?"\n"+r:"")},H=function(e,t,n,r,o){return function(i,a){var s=t(i);if(!s)return r?"":void 0;var c,l,d=s.storageDuration;try{c=e.getModuleExports(s.modulePath),l=e.getModuleDefinition(s.modulePath)}catch(e){return void B.error(V(s,i,e.message,e.stack))}if("function"==typeof c){var u,p=s.settings||{};!s.hasTransformedFilePaths&&l.filePaths&&(o(p,l.filePaths,s.modulePath),s.hasTransformedFilePaths=!0);try{u=c(n(p,a),a)}catch(e){return void B.error(V(s,i,e.message,e.stack))}return d&&(null!=u?F.setValue(i,d,u):u=F.getValue(i,d)),null==u&&null!=s.defaultValue&&(u=s.defaultValue),"string"==typeof u&&(s.cleanText&&(u=U(u)),s.forceLowerCase&&(u=u.toLowerCase())),u}B.error(V(s,i,"Module did not export a function."))}},z=y,G={text:function(e){return e.textContent},cleanText:function(e){return z(e.textContent)}},J=function(e,t,n){for(var r,o=e,i=0,a=t.length;i<a;i++){if(null==o)return;var s=t[i];if(n&&"@"===s.charAt(0)){var c=s.slice(1);o=G[c](o)}else if(o.getAttribute&&(r=s.match(/^getAttribute\((.+)\)$/))){var l=r[1];o=o.getAttribute(l)}else o=o[s]}return o},Q=function(e,t,n){return function(r,o){var i;if(t(r))i=n(r,o);else{var a=r.split("."),s=a.shift();"this"===s?o&&(i=J(o.element,a,!0)):"event"===s?o&&(i=J(o,a)):"target"===s?o&&(i=J(o.target,a)):i=J(e[s],a)}return i}},W=function(e,t){return function(n){var r=n.split(".")[0];return Boolean(t(n)||"this"===r||"event"===r||"target"===r||e.hasOwnProperty(r))}},X=function(e,t,n){var r={exports:{}};return e.call(r.exports,r,r.exports,t,n),r.exports},Y=X,K=P,Z=function(){var e={},t=function(t){var n=e[t];if(!n)throw new Error("Module "+t+" not found.");return n},n=function(){Object.keys(e).forEach((function(e){try{r(e)}catch(n){var t="Error initializing module "+e+". "+n.message+(n.stack?"\n"+n.stack:"");K.error(t)}}))},r=function(e){var n=t(e);return n.hasOwnProperty("exports")||(n.exports=Y(n.definition.script,n.require,n.turbine)),n.exports};return{registerModule:function(t,n,r,o,i){var a={definition:n,extensionName:r,require:o,turbine:i};a.require=o,e[t]=a},hydrateCache:n,getModuleExports:r,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},ee=P,te=!1,ne=function(e){return function(t,n){var r=e._monitors;r&&(te||(ee.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),te=!0),r.forEach((function(e){e[t]&&e[t](n)})))}},re=P,oe=function(e,t,n){var r,o,i,a,s=[],c=function(r,o,i){if(!e(o))return r;s.push(o);var a=t(o,i);return s.pop(),null==a&&n?"":a};return r=function(e,t){var n=/^%([^%]+)%$/.exec(e);return n?c(e,n[1],t):e.replace(/%(.+?)%/g,(function(e,n){return c(e,n,t)}))},o=function(e,t){for(var n={},r=Object.keys(e),o=0;o<r.length;o++){var i=r[o],s=e[i];n[i]=a(s,t)}return n},i=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n.push(a(e[r],t));return n},a=function(e,t){return"string"==typeof e?r(e,t):Array.isArray(e)?i(e,t):"object"==typeof e&&null!==e?o(e,t):e},function(e,t){return s.length>10?(re.error("Data element circular reference detected: "+s.join(" -> ")),e):a(e,t)}},ie=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)e[n]=t[n]}}},ae="undefined"!=typeof window&&window.Promise||void 0!==a&&a.Promise,se=ae,ce=function(e,t,n){return function(r,o,i,a){return a.then((function(){var a,s=r.delayNext;return new se((function(t,n){var o=e(r,i,[i]);if(!s)return t();var c=r.timeout,l=new se((function(e,t){a=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+c/1e3+" seconds to complete. "))}),c)}));se.race([o,l]).then(t,n)})).catch((function(e){return clearTimeout(a),e=t(e),n(r,o,e),se.reject(e)})).then((function(){clearTimeout(a)}))}))}},le=ae,de=function(e,t,n,r,o){return function(i,a,s,c){return c.then((function(){var c;return new le((function(t,n){var r=e(i,s,[s]),o=i.timeout,a=new le((function(e,t){c=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+o/1e3+" seconds to complete. "))}),o)}));le.race([r,a]).then(t,n)})).catch((function(e){return clearTimeout(c),e=t(e),r(i,a,e),le.reject(e)})).then((function(e){if(clearTimeout(c),!n(i,e))return o(i,a),le.reject()}))}))}},ue=ae.resolve(),pe=function(e,t,n){return function(r,o){return r.conditions&&r.conditions.forEach((function(t){ue=e(t,r,o,ue)})),r.actions&&r.actions.forEach((function(e){ue=t(e,r,o,ue)})),ue=(ue=ue.then((function(){n(r)}))).catch((function(){}))}},fe=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},ge=function(e,t,n,r){return function(o,i){var a;if(o.conditions)for(var s=0;s<o.conditions.length;s++){a=o.conditions[s];try{var c=e(a,i,[i]);if(fe(c))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(a,c))return n(a,o),!1}catch(e){return r(a,o,e),!1}}return!0}},me=function(e,t){return function(n,r){e(n,r)&&t(n,r)}},he=function(e){return function(t){var n=e.getModuleDefinition(t.modulePath);return n&&n.displayName||t.modulePath}},ye=function(e){return function(t){var n=t.rule,r=t.event,o=e.getModuleDefinition(r.modulePath).name;return{$type:e.getModuleExtensionName(r.modulePath)+"."+o,$rule:{id:n.id,name:n.name}}}},ve=function(e,t,n,r,o,i){return function(a,s){var c=s.rule,l=s.event;l.settings=l.settings||{};try{var d=o(s);t(l,null,[function(t){var r=n(d,t);a((function(){e(r,c)}))}])}catch(e){i.error(r(l,c,e))}}},be=function(e,t,n,r){return function(o,i,a){var s=t(o);n.error(e(s,i.name,a)),r("ruleActionFailed",{rule:i,action:o})}},we=function(e,t,n,r){return function(o,i,a){var s=t(o);n.error(e(s,i.name,a)),r("ruleConditionFailed",{rule:i,condition:o})}},Ee=function(e,t,n){return function(r,o){var i=e(r);t.log('Condition "'+i+'" for rule "'+o.name+'" was not met.'),n("ruleConditionFailed",{rule:o,condition:r})}},Ie=function(e,t){return function(n){e.log('Rule "'+n.name+'" fired.'),t("ruleCompleted",{rule:n})}},Ce=function(e,t,n){return function(r,o){var i;if(r.actions)for(var a=0;a<r.actions.length;a++){i=r.actions[a];try{e(i,o,[o])}catch(e){return void t(i,r,e)}}n(r)}},Se=function(e,t,n,r){return function(o,i){r("ruleTriggered",{rule:i}),e?n(i,o):t(i,o)}},ke=function(e,t,n){return'Failed to execute "'+e+'" for "'+t+'" rule. '+n.message+(n.stack?"\n"+n.stack:"")},Oe=function(e,t){return t&&!e.negate||!t&&e.negate},De=[],Te=!1,Pe=function(e){Te?e():De.push(e)},Ae=function(e,t,n){e(t).forEach((function(e){n(Pe,e)})),Te=!0,De.forEach((function(e){e()})),De=[]},Re=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.isPlainObject=n;var je,xe=P,_e=c,{isPlainObject:Me}=Ne,Le=function(e,t){return Me(t=t||{})?t=_e({},t,e):_e(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return xe.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},$e=function(e,t){return function(n,r){var o=e[n];if(o){var i=o.modules;if(i)for(var a=Object.keys(i),s=0;s<a.length;s++){var c=a[s],l=i[c];if(l.shared&&l.name===r)return t.getModuleExports(c)}}}},qe=function(e,t){return function(){return t?e(t):{}}},Ue=function(e,t,n){return function(r){if(n){var o=r.split(".");o.splice(o.length-1||1,0,"min"),r=o.join(".")}return e(t)+r}},Be=".js",Fe=function(e){return e.substr(0,e.lastIndexOf("/"))},Ve=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},He=function(e,t){Ve(t,Be)||(t+=Be);var n=t.split("/"),r=Fe(e).split("/");return n.forEach((function(e){e&&"."!==e&&(".."===e?r.length&&r.pop():r.push(e))})),r.join("/")},ze={exports:{}};je=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}return n((function(){}))},ze.exports=je();var Ge=ze.exports,Je={get:Ge.get,set:Ge.set,remove:Ge.remove},Qe=ae,We=function(e,t){return new Qe((function(n,r){t.onload=function(){n(t)},t.onerror=function(){r(new Error("Failed to load script "+e))}}))},Xe=function(e){var t={};if(!e||"string"!=typeof e)return t;var n=e.trim().replace(/^[?#&]/,""),r=new URLSearchParams(n),o=r.keys();do{var i=o.next(),a=i.value;if(a){var s=r.getAll(a);1===s.length?t[a]=s[0]:t[a]=s}}while(!1===i.done);return t},Ye=function(e){var t="{{space}}",n=new URLSearchParams;return Object.keys(e).forEach((function(r){var o=e[r];"string"==typeof e[r]?o=o.replace(/ /g,t):["object","undefined"].includes(typeof o)&&!Array.isArray(o)&&(o=""),Array.isArray(o)?o.forEach((function(e){n.append(r,e)})):n.append(r,o)})),n.toString().replace(new RegExp(encodeURIComponent(t),"g"),"%20")},Ke="@adobe/reactor-",Ze={cookie:Je,document:s,"load-script":function(e){var t=document.createElement("script");t.src=e,t.async=!0;var n=We(e,t);return document.getElementsByTagName("head")[0].appendChild(t),n},"object-assign":c,promise:ae,"query-string":{parse:function(e){return Xe(e)},stringify:function(e){return Ye(e)}},window:l},et=function(e){return function(t){if(0===t.indexOf(Ke)){var n=t.substr(Ke.length),r=Ze[n];if(r)return r}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},tt=$e,nt=qe,rt=Ue,ot=P,it=He,at=et,st=function(e,t,n,r,o,i,a){var s=e.extensions,c=e.buildInfo,l=e.environment,d=e.property.settings;if(s){var u=tt(s,t);Object.keys(s).forEach((function(p){var f=s[p],g=f.settings;Array.isArray(f.filePaths)&&(g=i(g,f.filePaths));var m=nt(r,g);if(f.modules){var h=ot.createPrefixedLogger(f.displayName),y=rt(a,f.hostedLibFilesBaseUrl,c.minified),v={buildInfo:c,environment:l,property:{name:e.property.name,id:e.property.id},getDataElementValue:o,getExtensionSettings:m,getHostedLibFileUrl:y,getSharedModule:u,logger:h,propertySettings:d,replaceTokens:r,onDebugChanged:n.onDebugChanged,get debugEnabled(){return n.getDebugEnabled()}};Object.keys(f.modules).forEach((function(e){var n=f.modules[e],r=at((function(n){var r=it(e,n);return t.getModuleExports(r)}));t.registerModule(e,n,p,r,v)}))}})),t.hydrateCache()}return t},ct=Je,lt=P,dt=function(e,t,n,r,o){var i=lt.createPrefixedLogger("Custom Script");e.track=function(e){lt.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=i,e.notify=function(e,t){switch(lt.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:i.info(e);break;case 4:i.warn(e);break;case 5:i.error(e);break;default:i.log(e)}},e.getVar=r,e.setVar=o,e.setCookie=function(e,t,n){var r="",o={};n&&(r=", { expires: "+n+" }",o.expires=n);var i='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+r+").";lt.deprecation(i),ct.set(e,t,o)},e.readCookie=function(e){return lt.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),ct.get(e)},e.removeCookie=function(e){lt.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),ct.remove(e)},e.cookie=ct,e.pageBottom=function(){},e.setDebug=n;var a=!1;Object.defineProperty(e,"_container",{get:function(){return a||(lt.warn("_satellite._container may change at any time and should only be used for debugging."),a=!0),t}})},{isPlainObject:ut}=Ne,pt=s,ft=c,gt=u,mt=p,ht=g,yt=h,vt=H,bt=Q,wt=W,Et=Z,It=ne,Ct=oe,St=ie,kt=ce,Ot=de,Dt=pe,Tt=ge,Pt=me,At=he,Rt=ye,Nt=ve,jt=be,xt=we,_t=Ee,Mt=Ie,Lt=Ce,$t=Se,qt=ke,Ut=Oe,Bt=Ae,Ft=Re,Vt=Le,Ht=N,zt=st,Gt=dt,Jt=function(e,t){return function(n,r,o){return e&&ut(n)&&Object.keys(n).length&&Array.isArray(r)&&r.length?(r.forEach((function(e){Boolean(null!=o&&/^core\/.*actions.*\/customCode\.js$/.test(o))&&"source"===e&&!n.isExternal||i(e.split("."),n,t)})),n):n}},Qt=P,Wt=window._satellite;if(Wt&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var Xt=Wt.container;delete Wt.container;var Yt=ft({},Xt.buildInfo);Object.defineProperty(Yt,"environment",{get:function(){return Qt.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),Xt.environment.stage}}),Xt.buildInfo=Yt;var Kt,Zt=ht(Ht("localStorage"),Qt),en="";pt.currentScript&&pt.currentScript.getAttribute("src")&&(en=pt.currentScript.getAttribute("src"));try{Kt=gt(en,Boolean(Xt.company.dynamicCdnEnabled),Xt.company.cdnAllowList,Zt)}catch(e){throw Qt.warn("Please review the following error:"),e}var tn,nn=Jt(Kt.isDynamicEnforced,Kt.decorateWithDynamicHost),rn=Et(),on=Xt.property.settings.undefinedVarsReturnEmpty,an=Xt.property.settings.ruleComponentSequencingEnabled,sn=Xt.dataElements||{},cn=function(e){return sn[e]},ln=function(){return tn.apply(null,arguments)},dn=vt(rn,cn,ln,on,nn),un={},pn=St(un),fn=wt(un,cn),gn=bt(un,cn,dn);tn=Ct(fn,gn,on),Gt(Wt,Xt,Zt.setDebugEnabled,gn,pn),zt(Xt,rn,Zt,tn,dn,nn,Kt.decorateWithDynamicHost);var mn=It(Wt),hn=yt(rn,tn,nn),yn=At(rn),vn=_t(yn,Qt,mn),bn=xt(qt,yn,Qt,mn),wn=jt(qt,yn,Qt,mn),En=Mt(Qt,mn),In=Nt($t(an,Pt(Tt(hn,Ut,vn,bn),Lt(hn,wn,En)),Dt(Ot(hn,Ft,Ut,bn,vn),kt(hn,Ft,wn),En),mn),hn,Vt,qt,Rt(rn),Qt);Bt(mt,Xt.rules||[],In)}return e(Wt)}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();